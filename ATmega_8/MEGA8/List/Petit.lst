
AVRASM ver. 2.1.30  C:\Users\ppc\Desktop\FatFs\List\Petit.asm Mon Dec 30 20:15:05 2013

                 
                 
                 ;CodeVisionAVR C Compiler V2.05.6 
                 ;(C) Copyright 1998-2012 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 
                 ;Chip type              : ATmega8
                 ;Program type           : Application
                 ;Clock frequency        : 8,000000 MHz
                 ;Memory model           : Small
                 ;Optimize for           : Size
                 ;(s)printf features     : int, width
                 ;(s)scanf features      : int, width
                 ;External RAM size      : 0
                 ;Data Stack size        : 256 byte(s)
                 ;Heap size              : 0 byte(s)
                 ;Promote 'char' to 'int': Yes
                 ;'char' is unsigned     : Yes
                 ;8 bit enums            : Yes
                 ;Global 'const' stored in FLASH: No
                 ;Enhanced function parameter passing: Yes
                 ;Enhanced core instructions: On
                 ;Automatic register allocation for global variables: On
                 ;Smart register allocation: On
                 
                 	#pragma AVRPART ADMIN PART_NAME ATmega8
                 	#pragma AVRPART MEMORY PROG_FLASH 8192
                 	#pragma AVRPART MEMORY EEPROM 512
                 	#pragma AVRPART MEMORY INT_SRAM SIZE 1024
                 	#pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                 
                 	.LISTMAC
                 	.EQU UDRE=0x5
                 	.EQU RXC=0x7
                 	.EQU USR=0xB
                 	.EQU UDR=0xC
                 	.EQU SPSR=0xE
                 	.EQU SPDR=0xF
                 	.EQU EERE=0x0
                 	.EQU EEWE=0x1
                 	.EQU EEMWE=0x2
                 	.EQU EECR=0x1C
                 	.EQU EEDR=0x1D
                 	.EQU EEARL=0x1E
                 	.EQU EEARH=0x1F
                 	.EQU WDTCR=0x21
                 	.EQU MCUCR=0x35
                 	.EQU GICR=0x3B
                 	.EQU SPL=0x3D
                 	.EQU SPH=0x3E
                 	.EQU SREG=0x3F
                 
                 	.DEF R0X0=R0
                 	.DEF R0X1=R1
                 	.DEF R0X2=R2
                 	.DEF R0X3=R3
                 	.DEF R0X4=R4
                 	.DEF R0X5=R5
                 	.DEF R0X6=R6
                 	.DEF R0X7=R7
                 	.DEF R0X8=R8
                 	.DEF R0X9=R9
                 	.DEF R0XA=R10
                 	.DEF R0XB=R11
                 	.DEF R0XC=R12
                 	.DEF R0XD=R13
                 	.DEF R0XE=R14
                 	.DEF R0XF=R15
                 	.DEF R0X10=R16
                 	.DEF R0X11=R17
                 	.DEF R0X12=R18
                 	.DEF R0X13=R19
                 	.DEF R0X14=R20
                 	.DEF R0X15=R21
                 	.DEF R0X16=R22
                 	.DEF R0X17=R23
                 	.DEF R0X18=R24
                 	.DEF R0X19=R25
                 	.DEF R0X1A=R26
                 	.DEF R0X1B=R27
                 	.DEF R0X1C=R28
                 	.DEF R0X1D=R29
                 	.DEF R0X1E=R30
                 	.DEF R0X1F=R31
                 
                 	.EQU __SRAM_START=0x0060
                 	.EQU __SRAM_END=0x045F
                 	.EQU __DSTACK_SIZE=0x0100
                 	.EQU __HEAP_SIZE=0x0000
                 	.EQU __CLEAR_SRAM_SIZE=__SRAM_END-__SRAM_START+1
                 
                 	.MACRO __CPD1N
                 	CPI  R30,LOW(@0)
                 	LDI  R26,HIGH(@0)
                 	CPC  R31,R26
                 	LDI  R26,BYTE3(@0)
                 	CPC  R22,R26
                 	LDI  R26,BYTE4(@0)
                 	CPC  R23,R26
                 	.ENDM
                 
                 	.MACRO __CPD2N
                 	CPI  R26,LOW(@0)
                 	LDI  R30,HIGH(@0)
                 	CPC  R27,R30
                 	LDI  R30,BYTE3(@0)
                 	CPC  R24,R30
                 	LDI  R30,BYTE4(@0)
                 	CPC  R25,R30
                 	.ENDM
                 
                 	.MACRO __CPWRR
                 	CP   R@0,R@2
                 	CPC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __CPWRN
                 	CPI  R@0,LOW(@2)
                 	LDI  R30,HIGH(@2)
                 	CPC  R@1,R30
                 	.ENDM
                 
                 	.MACRO __ADDB1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDB2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	SBCI R31,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	SBCI R27,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	SBCI R22,BYTE3(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1N
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	SBCI R22,BYTE3(-@0)
                 	SBCI R23,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __ADDD2N
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	SBCI R24,BYTE3(-@0)
                 	SBCI R25,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __SUBD1N
                 	SUBI R30,LOW(@0)
                 	SBCI R31,HIGH(@0)
                 	SBCI R22,BYTE3(@0)
                 	SBCI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __SUBD2N
                 	SUBI R26,LOW(@0)
                 	SBCI R27,HIGH(@0)
                 	SBCI R24,BYTE3(@0)
                 	SBCI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDBMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ANDWMNN
                 	LDS  R30,@0+(@1)
                 	ANDI R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ANDI R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ANDD1N
                 	ANDI R30,LOW(@0)
                 	ANDI R31,HIGH(@0)
                 	ANDI R22,BYTE3(@0)
                 	ANDI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDD2N
                 	ANDI R26,LOW(@0)
                 	ANDI R27,HIGH(@0)
                 	ANDI R24,BYTE3(@0)
                 	ANDI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORBMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __ORWMNN
                 	LDS  R30,@0+(@1)
                 	ORI  R30,LOW(@2)
                 	STS  @0+(@1),R30
                 	LDS  R30,@0+(@1)+1
                 	ORI  R30,HIGH(@2)
                 	STS  @0+(@1)+1,R30
                 	.ENDM
                 
                 	.MACRO __ORD1N
                 	ORI  R30,LOW(@0)
                 	ORI  R31,HIGH(@0)
                 	ORI  R22,BYTE3(@0)
                 	ORI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORD2N
                 	ORI  R26,LOW(@0)
                 	ORI  R27,HIGH(@0)
                 	ORI  R24,BYTE3(@0)
                 	ORI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __DELAY_USB
                 	LDI  R24,LOW(@0)
                 __DELAY_USB_LOOP:
                 	DEC  R24
                 	BRNE __DELAY_USB_LOOP
                 	.ENDM
                 
                 	.MACRO __DELAY_USW
                 	LDI  R24,LOW(@0)
                 	LDI  R25,HIGH(@0)
                 __DELAY_USW_LOOP:
                 	SBIW R24,1
                 	BRNE __DELAY_USW_LOOP
                 	.ENDM
                 
                 	.MACRO __GETD1S
                 	LDD  R30,Y+@0
                 	LDD  R31,Y+@0+1
                 	LDD  R22,Y+@0+2
                 	LDD  R23,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __GETD2S
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	LDD  R24,Y+@0+2
                 	LDD  R25,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __PUTD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R31
                 	STD  Y+@0+2,R22
                 	STD  Y+@0+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTD2S
                 	STD  Y+@0,R26
                 	STD  Y+@0+1,R27
                 	STD  Y+@0+2,R24
                 	STD  Y+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __PUTDZ2
                 	STD  Z+@0,R26
                 	STD  Z+@0+1,R27
                 	STD  Z+@0+2,R24
                 	STD  Z+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __CLRD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R30
                 	STD  Y+@0+2,R30
                 	STD  Y+@0+3,R30
                 	.ENDM
                 
                 	.MACRO __POINTB1MN
                 	LDI  R30,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW1MN
                 	LDI  R30,LOW(@0+(@1))
                 	LDI  R31,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1M
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __POINTW1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	LDI  R22,BYTE3(2*@0+(@1))
                 	LDI  R23,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTB2MN
                 	LDI  R26,LOW(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2MN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTW2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTD2FN
                 	LDI  R26,LOW(2*@0+(@1))
                 	LDI  R27,HIGH(2*@0+(@1))
                 	LDI  R24,BYTE3(2*@0+(@1))
                 	LDI  R25,BYTE4(2*@0+(@1))
                 	.ENDM
                 
                 	.MACRO __POINTBRM
                 	LDI  R@0,LOW(@1)
                 	.ENDM
                 
                 	.MACRO __POINTWRM
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __POINTBRMN
                 	LDI  R@0,LOW(@1+(@2))
                 	.ENDM
                 
                 	.MACRO __POINTWRMN
                 	LDI  R@0,LOW(@2+(@3))
                 	LDI  R@1,HIGH(@2+(@3))
                 	.ENDM
                 
                 	.MACRO __POINTWRFN
                 	LDI  R@0,LOW(@2*2+(@3))
                 	LDI  R@1,HIGH(@2*2+(@3))
                 	.ENDM
                 
                 	.MACRO __GETD1N
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2N
                 	LDI  R26,LOW(@0)
                 	LDI  R27,HIGH(@0)
                 	LDI  R24,BYTE3(@0)
                 	LDI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETB1MN
                 	LDS  R30,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETB1HMN
                 	LDS  R31,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	LDS  R22,@0+(@1)+2
                 	LDS  R23,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __GETBRMN
                 	LDS  R@0,@1+(@2)
                 	.ENDM
                 
                 	.MACRO __GETWRMN
                 	LDS  R@0,@2+(@3)
                 	LDS  R@1,@2+(@3)+1
                 	.ENDM
                 
                 	.MACRO __GETWRZ
                 	LDD  R@0,Z+@2
                 	LDD  R@1,Z+@2+1
                 	.ENDM
                 
                 	.MACRO __GETD2Z
                 	LDD  R26,Z+@0
                 	LDD  R27,Z+@0+1
                 	LDD  R24,Z+@0+2
                 	LDD  R25,Z+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB2MN
                 	LDS  R26,@0+(@1)
                 	.ENDM
                 
                 	.MACRO __GETW2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	.ENDM
                 
                 	.MACRO __GETD2MN
                 	LDS  R26,@0+(@1)
                 	LDS  R27,@0+(@1)+1
                 	LDS  R24,@0+(@1)+2
                 	LDS  R25,@0+(@1)+3
                 	.ENDM
                 
                 	.MACRO __PUTB1MN
                 	STS  @0+(@1),R30
                 	.ENDM
                 
                 	.MACRO __PUTW1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1MN
                 	STS  @0+(@1),R30
                 	STS  @0+(@1)+1,R31
                 	STS  @0+(@1)+2,R22
                 	STS  @0+(@1)+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTB1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	RCALL __EEPROMWRB
                 	.ENDM
                 
                 	.MACRO __PUTW1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	RCALL __EEPROMWRW
                 	.ENDM
                 
                 	.MACRO __PUTD1EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	RCALL __EEPROMWRD
                 	.ENDM
                 
                 	.MACRO __PUTBR0MN
                 	STS  @0+(@1),R0
                 	.ENDM
                 
                 	.MACRO __PUTBMRN
                 	STS  @0+(@1),R@2
                 	.ENDM
                 
                 	.MACRO __PUTWMRN
                 	STS  @0+(@1),R@2
                 	STS  @0+(@1)+1,R@3
                 	.ENDM
                 
                 	.MACRO __PUTBZR
                 	STD  Z+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWZR
                 	STD  Z+@2,R@0
                 	STD  Z+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __GETW1R
                 	MOV  R30,R@0
                 	MOV  R31,R@1
                 	.ENDM
                 
                 	.MACRO __GETW2R
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	.ENDM
                 
                 	.MACRO __GETWRN
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __PUTW1R
                 	MOV  R@0,R30
                 	MOV  R@1,R31
                 	.ENDM
                 
                 	.MACRO __PUTW2R
                 	MOV  R@0,R26
                 	MOV  R@1,R27
                 	.ENDM
                 
                 	.MACRO __ADDWRN
                 	SUBI R@0,LOW(-@2)
                 	SBCI R@1,HIGH(-@2)
                 	.ENDM
                 
                 	.MACRO __ADDWRR
                 	ADD  R@0,R@2
                 	ADC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __SUBWRN
                 	SUBI R@0,LOW(@2)
                 	SBCI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __SUBWRR
                 	SUB  R@0,R@2
                 	SBC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ANDWRN
                 	ANDI R@0,LOW(@2)
                 	ANDI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ANDWRR
                 	AND  R@0,R@2
                 	AND  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ORWRN
                 	ORI  R@0,LOW(@2)
                 	ORI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ORWRR
                 	OR   R@0,R@2
                 	OR   R@1,R@3
                 	.ENDM
                 
                 	.MACRO __EORWRR
                 	EOR  R@0,R@2
                 	EOR  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __GETWRS
                 	LDD  R@0,Y+@2
                 	LDD  R@1,Y+@2+1
                 	.ENDM
                 
                 	.MACRO __PUTBSR
                 	STD  Y+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSR
                 	STD  Y+@2,R@0
                 	STD  Y+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __MOVEWRR
                 	MOV  R@0,R@2
                 	MOV  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __INWR
                 	IN   R@0,@2
                 	IN   R@1,@2+1
                 	.ENDM
                 
                 	.MACRO __OUTWR
                 	OUT  @2+1,R@1
                 	OUT  @2,R@0
                 	.ENDM
                 
                 	.MACRO __CALL1MN
                 	LDS  R30,@0+(@1)
                 	LDS  R31,@0+(@1)+1
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL1FN
                 	LDI  R30,LOW(2*@0+(@1))
                 	LDI  R31,HIGH(2*@0+(@1))
                 	RCALL __GETW1PF
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EN
                 	LDI  R26,LOW(@0+(@1))
                 	LDI  R27,HIGH(@0+(@1))
                 	RCALL __EEPROMRDW
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __GETW1STACK
                 	IN   R26,SPL
                 	IN   R27,SPH
                 	ADIW R26,@0+1
                 	LD   R30,X+
                 	LD   R31,X
                 	.ENDM
                 
                 	.MACRO __GETD1STACK
                 	IN   R26,SPL
                 	IN   R27,SPH
                 	ADIW R26,@0+1
                 	LD   R30,X+
                 	LD   R31,X+
                 	LD   R22,X
                 	.ENDM
                 
                 	.MACRO __NBST
                 	BST  R@0,@1
                 	IN   R30,SREG
                 	LDI  R31,0x40
                 	EOR  R30,R31
                 	OUT  SREG,R30
                 	.ENDM
                 
                 
                 	.MACRO __PUTB1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	RCALL __PUTDP1
                 	.ENDM
                 
                 
                 	.MACRO __GETB1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R30,Z
                 	.ENDM
                 
                 	.MACRO __GETB1HSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	.ENDM
                 
                 	.MACRO __GETW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z+
                 	LD   R23,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __GETB2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R26,X
                 	.ENDM
                 
                 	.MACRO __GETW2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	.ENDM
                 
                 	.MACRO __GETD2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R1,X+
                 	LD   R24,X+
                 	LD   R25,X
                 	MOVW R26,R0
                 	.ENDM
                 
                 	.MACRO __GETBRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	LD   R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETWRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	LD   R@0,Z+
                 	LD   R@1,Z
                 	.ENDM
                 
                 	.MACRO __GETBRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	LD   R@0,X
                 	.ENDM
                 
                 	.MACRO __GETWRSX2
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	LD   R@0,X+
                 	LD   R@1,X
                 	.ENDM
                 
                 	.MACRO __LSLW8SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	CLR  R30
                 	.ENDM
                 
                 	.MACRO __PUTB1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __CLRW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __CLRD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X+,R30
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTB2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R26
                 	.ENDM
                 
                 	.MACRO __PUTW2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z,R27
                 	.ENDM
                 
                 	.MACRO __PUTD2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z+,R27
                 	ST   Z+,R24
                 	ST   Z,R25
                 	.ENDM
                 
                 	.MACRO __PUTBSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	ST   Z,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	ST   Z+,R@0
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __MULBRR
                 	MULS R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRRU
                 	MUL  R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRR0
                 	MULS R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBRRU0
                 	MUL  R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBNWRU
                 	LDI  R26,@2
                 	MUL  R26,R@0
                 	MOVW R30,R0
                 	MUL  R26,R@1
                 	ADD  R31,R0
                 	.ENDM
                 
                 	.CSEG
                 	.ORG 0x00
                 
                 ;START OF CODE MARKER
                 __START_OF_CODE:
                 
                 ;INTERRUPT VECTORS
000000 c05c      	RJMP __RESET
000001 cffe      	RJMP 0x00
000002 cffd      	RJMP 0x00
000003 c088      	RJMP _timer2_comp_isr
000004 cffb      	RJMP 0x00
000005 cffa      	RJMP 0x00
000006 cff9      	RJMP 0x00
000007 cff8      	RJMP 0x00
000008 cff7      	RJMP 0x00
000009 cff6      	RJMP 0x00
00000a cff5      	RJMP 0x00
00000b cff4      	RJMP 0x00
00000c cff3      	RJMP 0x00
00000d cff2      	RJMP 0x00
00000e cff1      	RJMP 0x00
00000f cff0      	RJMP 0x00
000010 cfef      	RJMP 0x00
000011 cfee      	RJMP 0x00
000012 cfed      	RJMP 0x00
                 
                 _0x0:
000013 2e31
000014 6177
000015 0076      	.DB  0x31,0x2E,0x77,0x61,0x76,0x0
                 _0x4004B:
000016 9a80
000017 4190
000018 418e
000019 808f      	.DB  0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80
00001a 4545
00001b 4945
00001c 4949
00001d 8f8e      	.DB  0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F
00001e 9290
00001f 4f92
000020 4f99
000021 5555      	.DB  0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55
000022 9959
000023 9b9a
000024 9d9c
000025 9f9e      	.DB  0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F
000026 4941
000027 554f
000028 a5a5
000029 a7a6      	.DB  0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7
00002a a9a8
00002b abaa
00002c 21ac
00002d afae      	.DB  0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF
00002e b1b0
00002f b3b2
000030 b5b4
000031 b7b6      	.DB  0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7
000032 b9b8
000033 bbba
000034 bdbc
000035 bfbe      	.DB  0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF
000036 c1c0
000037 c3c2
000038 c5c4
000039 c7c6      	.DB  0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7
00003a c9c8
00003b cbca
00003c cdcc
00003d cfce      	.DB  0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF
00003e d1d0
00003f d3d2
000040 d5d4
000041 d7d6      	.DB  0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7
000042 d9d8
000043 dbda
000044 dddc
000045 dfde      	.DB  0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF
000046 e1e0
000047 e3e2
000048 e5e4
000049 e7e6      	.DB  0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7
00004a e9e8
00004b ebea
00004c edec
00004d efee      	.DB  0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF
00004e f1f0
00004f f3f2
000050 f5f4
000051 f7f6      	.DB  0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7
000052 f9f8
000053 fbfa
000054 fdfc
000055 fffe      	.DB  0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF
                 
                 __GLOBAL_INI_TBL:
000056 0006      	.DW  0x06
000057 0160      	.DW  _0x5
000058 0026      	.DW  _0x0*2
                 
000059 0080      	.DW  0x80
00005a 036d      	.DW  _cvt_G002
00005b 002c      	.DW  _0x4004B*2
                 
                 _0xFFFFFFFF:
00005c 0000      	.DW  0
                 
                 __RESET:
00005d 94f8      	CLI
00005e 27ee      	CLR  R30
00005f bbec      	OUT  EECR,R30
                 
                 ;INTERRUPT VECTORS ARE PLACED
                 ;AT THE START OF FLASH
000060 e0f1      	LDI  R31,1
000061 bffb      	OUT  GICR,R31
000062 bfeb      	OUT  GICR,R30
000063 bfe5      	OUT  MCUCR,R30
                 
                 ;DISABLE WATCHDOG
000064 e1f8      	LDI  R31,0x18
000065 bdf1      	OUT  WDTCR,R31
000066 bde1      	OUT  WDTCR,R30
                 
                 ;CLEAR R2-R14
000067 e08d      	LDI  R24,(14-2)+1
000068 e0a2      	LDI  R26,2
000069 27bb      	CLR  R27
                 __CLEAR_REG:
00006a 93ed      	ST   X+,R30
00006b 958a      	DEC  R24
00006c f7e9      	BRNE __CLEAR_REG
                 
                 ;CLEAR SRAM
00006d e080      	LDI  R24,LOW(__CLEAR_SRAM_SIZE)
00006e e094      	LDI  R25,HIGH(__CLEAR_SRAM_SIZE)
00006f e6a0      	LDI  R26,__SRAM_START
                 __CLEAR_SRAM:
000070 93ed      	ST   X+,R30
000071 9701      	SBIW R24,1
000072 f7e9      	BRNE __CLEAR_SRAM
                 
                 ;GLOBAL VARIABLES INITIALIZATION
000073 eaec      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000074 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
                 __GLOBAL_INI_NEXT:
000075 9185      	LPM  R24,Z+
000076 9195      	LPM  R25,Z+
000077 9700      	SBIW R24,0
000078 f061      	BREQ __GLOBAL_INI_END
000079 91a5      	LPM  R26,Z+
00007a 91b5      	LPM  R27,Z+
00007b 9005      	LPM  R0,Z+
00007c 9015      	LPM  R1,Z+
00007d 01bf      	MOVW R22,R30
00007e 01f0      	MOVW R30,R0
                 __GLOBAL_INI_LOOP:
00007f 9005      	LPM  R0,Z+
000080 920d      	ST   X+,R0
000081 9701      	SBIW R24,1
000082 f7e1      	BRNE __GLOBAL_INI_LOOP
000083 01fb      	MOVW R30,R22
000084 cff0      	RJMP __GLOBAL_INI_NEXT
                 __GLOBAL_INI_END:
                 
                 ;HARDWARE STACK POINTER INITIALIZATION
000085 e5ef      	LDI  R30,LOW(__SRAM_END-__HEAP_SIZE)
000086 bfed      	OUT  SPL,R30
000087 e0e4      	LDI  R30,HIGH(__SRAM_END-__HEAP_SIZE)
000088 bfee      	OUT  SPH,R30
                 
                 ;DATA STACK POINTER INITIALIZATION
000089 e6c0      	LDI  R28,LOW(__SRAM_START+__DSTACK_SIZE)
00008a e0d1      	LDI  R29,HIGH(__SRAM_START+__DSTACK_SIZE)
                 
00008b c027      	RJMP _main
                 
                 	.ESEG
                 	.ORG 0
                 
                 	.DSEG
                 	.ORG 0x160
                 
                 	.CSEG
                 ;#include <mega8.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#define __SLEEP_DEFINED__
                 	.EQU __se_bit=0x80
                 	.EQU __sm_mask=0x70
                 	.EQU __sm_powerdown=0x20
                 	.EQU __sm_powersave=0x30
                 	.EQU __sm_standby=0x60
                 	.EQU __sm_ext_standby=0x70
                 	.EQU __sm_adc_noise_red=0x10
                 	.SET power_ctrl_reg=mcucr
                 	#endif
                 ;#include "diskio.h"
                 ;#include "pff.h"
                 ;
                 ;unsigned char buffer[512];   /* буфер дл€ копировани€ данных файла */
                 ;volatile unsigned int count;
                 ;
                 ;interrupt [TIM2_COMP] void timer2_comp_isr(void)
                 ; 0000 0009 {
                 
                 	.CSEG
                 _timer2_comp_isr:
00008c 93aa      	ST   -Y,R26
00008d 93ba      	ST   -Y,R27
00008e 93ea      	ST   -Y,R30
00008f 93fa      	ST   -Y,R31
000090 b7ef      	IN   R30,SREG
000091 93ea      	ST   -Y,R30
                 ; 0000 000A     OCR1A = buffer[count];
000092 91e0 0366 	LDS  R30,_count
000094 91f0 0367 	LDS  R31,_count+1
000096 59ea      	SUBI R30,LOW(-_buffer)
000097 4ffe      	SBCI R31,HIGH(-_buffer)
000098 81e0      	LD   R30,Z
000099 e0f0      	LDI  R31,0
00009a bdfb      	OUT  0x2A+1,R31
00009b bdea      	OUT  0x2A,R30
                 ; 0000 000B 	if (++count >= 512)
00009c e6a6      	LDI  R26,LOW(_count)
00009d e0b3      	LDI  R27,HIGH(_count)
00009e 91ed      	LD   R30,X+
00009f 91fd      	LD   R31,X+
0000a0 9631      	ADIW R30,1
0000a1 93fe      	ST   -X,R31
0000a2 93ee      	ST   -X,R30
0000a3 30e0      	CPI  R30,LOW(0x200)
0000a4 e0a2      	LDI  R26,HIGH(0x200)
0000a5 07fa      	CPC  R31,R26
0000a6 f028      	BRLO _0x3
                 ; 0000 000C 		count = 0;
0000a7 e0e0      	LDI  R30,LOW(0)
0000a8 93e0 0366 	STS  _count,R30
0000aa 93e0 0367 	STS  _count+1,R30
                 ; 0000 000D }
                 _0x3:
0000ac 91e9      	LD   R30,Y+
0000ad bfef      	OUT  SREG,R30
0000ae 91f9      	LD   R31,Y+
0000af 91e9      	LD   R30,Y+
0000b0 91b9      	LD   R27,Y+
0000b1 91a9      	LD   R26,Y+
0000b2 9518      	RETI
                 ;
                 ;void main(void)
                 ; 0000 0010 {
                 _main:
                 ; 0000 0011     unsigned int br;         /* счетчик чтени€/записи файла */
                 ; 0000 0012     unsigned char buf = 0;
                 ; 0000 0013     FATFS fs;         /* –абоча€ область (file system object) дл€ логических дисков */
                 ; 0000 0014 
                 ; 0000 0015 PORTB=0x00;
0000b3 97ac      	SBIW R28,44
                 ;	br -> R16,R17
                 ;	buf -> R19
                 ;	fs -> Y+0
0000b4 e030      	LDI  R19,0
0000b5 e0e0      	LDI  R30,LOW(0)
0000b6 bbe8      	OUT  0x18,R30
                 ; 0000 0016 DDRB=0x02;
0000b7 e0e2      	LDI  R30,LOW(2)
0000b8 bbe7      	OUT  0x17,R30
                 ; 0000 0017 
                 ; 0000 0018 // Timer/Counter 1 initialization
                 ; 0000 0019 // Clock source: System Clock
                 ; 0000 001A // Clock value: 8000,000 kHz
                 ; 0000 001B // Mode: Fast PWM top=0x00FF
                 ; 0000 001C // OC1A output: Non-Inv.
                 ; 0000 001D TCCR1A=0x81;
0000b9 e8e1      	LDI  R30,LOW(129)
0000ba bdef      	OUT  0x2F,R30
                 ; 0000 001E TCCR1B=0x09;
0000bb e0e9      	LDI  R30,LOW(9)
0000bc bdee      	OUT  0x2E,R30
                 ; 0000 001F TCNT1H=0x00;
0000bd e0e0      	LDI  R30,LOW(0)
0000be bded      	OUT  0x2D,R30
                 ; 0000 0020 TCNT1L=0x00;
0000bf bdec      	OUT  0x2C,R30
                 ; 0000 0021 OCR1A=0x00;
0000c0 d718      	RCALL SUBOPT_0x0
0000c1 bdfb      	OUT  0x2A+1,R31
0000c2 bdea      	OUT  0x2A,R30
                 ; 0000 0022 
                 ; 0000 0023 
                 ; 0000 0024 // Timer/Counter 2 initialization
                 ; 0000 0025 // Clock source: System Clock
                 ; 0000 0026 // Clock value: 250,000 kHz
                 ; 0000 0027 // Mode: CTC top=OCR2
                 ; 0000 0028 // OC2 output: Disconnected
                 ; 0000 0029 TCCR2=0x0B;
0000c3 e0eb      	LDI  R30,LOW(11)
0000c4 bde5      	OUT  0x25,R30
                 ; 0000 002A TCNT2=0x00;
0000c5 e0e0      	LDI  R30,LOW(0)
0000c6 bde4      	OUT  0x24,R30
                 ; 0000 002B //OCR2=0x1F; //дл€ 8к√ц
                 ; 0000 002C OCR2=0xB;    //дл€ 22к√ц
0000c7 e0eb      	LDI  R30,LOW(11)
0000c8 bde3      	OUT  0x23,R30
                 ; 0000 002D 
                 ; 0000 002E #asm("sei")
0000c9 9478      	sei
                 ; 0000 002F // Timer(s)/Counter(s) Interrupt(s) initialization
                 ; 0000 0030 
                 ; 0000 0031 
                 ; 0000 0032 if(disk_initialize()==0) //инициализируем флешку
0000ca d0a7      	RCALL _disk_initialize
0000cb 30e0      	CPI  R30,0
0000cc f009      	BREQ PC+2
0000cd c04c      	RJMP _0x4
                 ; 0000 0033 {
                 ; 0000 0034   pf_mount(&fs);  //монтируем файловую систему
0000ce 01de      	MOVW R26,R28
0000cf d476      	RCALL _pf_mount
                 ; 0000 0035   pf_open("1.wav");  //открываем вавку
                +
0000d0 e6a0     +LDI R26 , LOW ( _0x5 + ( 0 ) )
0000d1 e0b1     +LDI R27 , HIGH ( _0x5 + ( 0 ) )
                 	__POINTW2MN _0x5,0
0000d2 d55c      	RCALL _pf_open
                 ; 0000 0036   pf_lseek(44);     //перемещаем указатель на 44
                +
0000d3 e2ac     +LDI R26 , LOW ( 0x2C )
0000d4 e0b0     +LDI R27 , HIGH ( 0x2C )
0000d5 e080     +LDI R24 , BYTE3 ( 0x2C )
0000d6 e090     +LDI R25 , BYTE4 ( 0x2C )
                 	__GETD2N 0x2C
0000d7 d663      	RCALL _pf_lseek
                 ; 0000 0037   pf_read(buffer, 512,&br);
0000d8 d703      	RCALL SUBOPT_0x1
0000d9 e0e0      	LDI  R30,LOW(512)
0000da e0f2      	LDI  R31,HIGH(512)
0000db d705      	RCALL SUBOPT_0x2
0000dc b7ad      	IN   R26,SPL
0000dd b7be      	IN   R27,SPH
0000de 9711      	SBIW R26,1
0000df 931f      	PUSH R17
0000e0 930f      	PUSH R16
0000e1 d597      	RCALL _pf_read
0000e2 910f      	POP  R16
0000e3 911f      	POP  R17
                 ; 0000 0038   TIMSK=0x80;
0000e4 e8e0      	LDI  R30,LOW(128)
0000e5 bfe9      	OUT  0x39,R30
                 ; 0000 0039   while(1)
                 _0x6:
                 ; 0000 003A   {
                 ; 0000 003B      if(!buf && count>255)
0000e6 3030      	CPI  R19,0
0000e7 f411      	BRNE _0xA
0000e8 d6fb      	RCALL SUBOPT_0x3
0000e9 f408      	BRSH _0xB
                 _0xA:
0000ea c011      	RJMP _0x9
                 _0xB:
                 ; 0000 003C      {
                 ; 0000 003D         pf_read(&buffer[0], 256,&br);
0000eb d6f0      	RCALL SUBOPT_0x1
0000ec e0e0      	LDI  R30,LOW(256)
0000ed e0f1      	LDI  R31,HIGH(256)
0000ee d6f2      	RCALL SUBOPT_0x2
0000ef b7ad      	IN   R26,SPL
0000f0 b7be      	IN   R27,SPH
0000f1 9711      	SBIW R26,1
0000f2 931f      	PUSH R17
0000f3 930f      	PUSH R16
0000f4 d584      	RCALL _pf_read
0000f5 910f      	POP  R16
0000f6 911f      	POP  R17
                 ; 0000 003E         buf=1;
0000f7 e031      	LDI  R19,LOW(1)
                 ; 0000 003F         if (br < 256)
                +
0000f8 3000     +CPI R16 , LOW ( 256 )
0000f9 e0e1     +LDI R30 , HIGH ( 256 )
0000fa 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
0000fb f0c8      	BRLO _0x8
                 ; 0000 0040 	break;
                 ; 0000 0041      }
                 ; 0000 0042      if(buf && count<256)
                 _0x9:
0000fc 3030      	CPI  R19,0
0000fd f011      	BREQ _0xE
0000fe d6e5      	RCALL SUBOPT_0x3
0000ff f008      	BRLO _0xF
                 _0xE:
000100 c013      	RJMP _0xD
                 _0xF:
                 ; 0000 0043      {
                 ; 0000 0044         pf_read(&buffer[256], 256,&br);
                +
000101 e6e6     +LDI R30 , LOW ( _buffer + ( 256 ) )
000102 e0f2     +LDI R31 , HIGH ( _buffer + ( 256 ) )
                 	__POINTW1MN _buffer,256
000103 d6dd      	RCALL SUBOPT_0x2
000104 e0e0      	LDI  R30,LOW(256)
000105 e0f1      	LDI  R31,HIGH(256)
000106 d6da      	RCALL SUBOPT_0x2
000107 b7ad      	IN   R26,SPL
000108 b7be      	IN   R27,SPH
000109 9711      	SBIW R26,1
00010a 931f      	PUSH R17
00010b 930f      	PUSH R16
00010c d56c      	RCALL _pf_read
00010d 910f      	POP  R16
00010e 911f      	POP  R17
                 ; 0000 0045         buf = 0;
00010f e030      	LDI  R19,LOW(0)
                 ; 0000 0046         if (br < 256)
                +
000110 3000     +CPI R16 , LOW ( 256 )
000111 e0e1     +LDI R30 , HIGH ( 256 )
000112 071e     +CPC R17 , R30
                 	__CPWRN 16,17,256
000113 f008      	BRLO _0x8
                 ; 0000 0047 	break;
                 ; 0000 0048      }
                 ; 0000 0049 
                 ; 0000 004A   }
                 _0xD:
000114 cfd1      	RJMP _0x6
                 _0x8:
                 ; 0000 004B   TIMSK = 0x00;
000115 e0e0      	LDI  R30,LOW(0)
000116 bfe9      	OUT  0x39,R30
                 ; 0000 004C   pf_mount(0x00);
000117 e0a0      	LDI  R26,LOW(0)
000118 e0b0      	LDI  R27,0
000119 d42c      	RCALL _pf_mount
                 ; 0000 004D }
                 ; 0000 004E 
                 ; 0000 004F while (1)
                 _0x4:
                 _0x11:
                 ; 0000 0050       {
                 ; 0000 0051 
                 ; 0000 0052 
                 ; 0000 0053       }
00011a cfff      	RJMP _0x11
                 ; 0000 0054 }
                 _0x14:
00011b cfff      	RJMP _0x14
                 
                 	.DSEG
                 _0x5:
000160           	.BYTE 0x6
                 ;//-----------------------------------------------------------------------
                 ;// PFF - Low level disk control module for ATmega32
                 ;//-----------------------------------------------------------------------
                 ;#define _WRITE_FUNC	1			//allow write operations
                 ;
                 ;#include <mega8.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;#include "diskio.h"
                 ;
                 ;// Definitions for MMC/SDC connection
                 ;#define SD_DI   3
                 ;#define SD_DO   4
                 ;#define SD_CLK  5
                 ;#define SD_CS   2
                 ;//#define SD_INS  6
                 ;//#define SD_WP   7
                 ;
                 ;// Definitions for MMC/SDC command
                 ;#define CMD0	(0x40+0)	// GO_IDLE_STATE
                 ;#define CMD1	(0x40+1)	// SEND_OP_COND (MMC)
                 ;#define	ACMD41	(0xC0+41)	// SEND_OP_COND (SDC)
                 ;#define CMD8	(0x40+8)	// SEND_IF_COND
                 ;#define CMD16	(0x40+16)	// SET_BLOCKLEN
                 ;#define CMD17	(0x40+17)	// READ_SINGLE_BLOCK
                 ;#define CMD24	(0x40+24)	// WRITE_BLOCK
                 ;#define CMD55	(0x40+55)	// APP_CMD
                 ;#define CMD58	(0x40+58)	// READ_OCR
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// SPI functions
                 ;//-----------------------------------------------------------------------
                 ;#define hardware_spi // если определено, то spi аппаратный
                 ;
                 ;#define SPI_PORTX PORTB
                 ;#define SPI_DDRX DDRB
                 ;
                 ;#define SPI_MISO SD_DO
                 ;#define SPI_MOSI SD_DI
                 ;#define SPI_SCK SD_CLK
                 ;#define SPI_SS SD_CS
                 ;
                 ;void INIT_SPI(void) {
                 ; 0001 0029 void INIT_SPI(void) {
                 
                 	.CSEG
                 _INIT_SPI:
                 ; 0001 002A #ifdef hardware_spi
                 ; 0001 002B 	/*настройка портов ввода-вывода
                 ; 0001 002C 	 все выводы, кроме MISO выходы*/
                 ; 0001 002D 	SPI_DDRX |= (1 << SPI_MOSI) | (1 << SPI_SCK) | (1 << SPI_SS) | (0 << SPI_MISO);
00011c b3e7      	IN   R30,0x17
00011d 62ec      	ORI  R30,LOW(0x2C)
00011e bbe7      	OUT  0x17,R30
                 ; 0001 002E 	SPI_PORTX |= (1 << SPI_MOSI) | (1 << SPI_SCK) | (1 << SPI_SS) | (1 << SPI_MISO);
00011f b3e8      	IN   R30,0x18
000120 63ec      	ORI  R30,LOW(0x3C)
000121 bbe8      	OUT  0x18,R30
                 ; 0001 002F 
                 ; 0001 0030 	/*разрешение spi,старший бит вперед,мастер, режим 0*/
                 ; 0001 0031 	SPCR = (1 << SPE) | (0 << DORD) | (1 << MSTR) | (0 << CPOL) | (0 << CPHA) | (1 << SPR1) | (1 << SPR0);
000122 e5e3      	LDI  R30,LOW(83)
000123 b9ed      	OUT  0xD,R30
                 ; 0001 0032 	SPSR = (0 << SPI2X);
000124 e0e0      	LDI  R30,LOW(0)
000125 b9ee      	OUT  0xE,R30
                 ; 0001 0033 #else
                 ; 0001 0034 	PORTB |= (1<<SD_CS) | (1<<SD_DO) | (1<<SD_DI)/* | (1<<SD_WP) | (1<<SD_INS)*/;
                 ; 0001 0035 	DDRB |=(1<<SD_CS) | (1<<SD_DI) | (1<<SD_CLK);
                 ; 0001 0036 #endif
                 ; 0001 0037 }
000126 9508      	RET
                 ;
                 ;void xmit_spi(BYTE data) {		// Send a byte
                 ; 0001 0039 void xmit_spi(BYTE data) {
                 _xmit_spi:
                 ; 0001 003A #ifdef hardware_spi
                 ; 0001 003B 	SPDR = data;
000127 93aa      	ST   -Y,R26
                 ;	data -> Y+0
000128 81e8      	LD   R30,Y
000129 b9ef      	OUT  0xF,R30
                 ; 0001 003C 	while (!(SPSR & (1 << SPIF)));
                 _0x20003:
00012a 9b77      	SBIS 0xE,7
00012b cffe      	RJMP _0x20003
                 ; 0001 003D #else
                 ; 0001 003E 	BYTE i;
                 ; 0001 003F 
                 ; 0001 0040 	for (i = 0; i < 8; i++) {
                 ; 0001 0041 		if ((data & 0x80) == 0x00)
                 ; 0001 0042 			PORTB &= ~(1<<SD_DI);
                 ; 0001 0043 		else
                 ; 0001 0044 			PORTB |= (1<<SD_DI);
                 ; 0001 0045 		data = data << 1;
                 ; 0001 0046 		PORTB |= (1<<SD_CLK);
                 ; 0001 0047 		#asm("nop")
                 ; 0001 0048 		PORTB &= ~(1<<SD_CLK);
                 ; 0001 0049 	}
                 ; 0001 004A #endif
                 ; 0001 004B }
00012c 9621      	ADIW R28,1
00012d 9508      	RET
                 ;
                 ;BYTE rcv_spi(void) {				// Send 0xFF and receive a byte
                 ; 0001 004D BYTE rcv_spi(void) {
                 _rcv_spi:
                 ; 0001 004E #ifdef hardware_spi
                 ; 0001 004F 	unsigned char data;
                 ; 0001 0050 	SPDR = 0xFF;
00012e 931a      	ST   -Y,R17
                 ;	data -> R17
00012f efef      	LDI  R30,LOW(255)
000130 b9ef      	OUT  0xF,R30
                 ; 0001 0051 	while (!(SPSR & (1 << SPIF)));
                 _0x20006:
000131 9b77      	SBIS 0xE,7
000132 cffe      	RJMP _0x20006
                 ; 0001 0052 	data = SPDR;
000133 b11f      	IN   R17,15
                 ; 0001 0053 	return data;
000134 2fe1      	MOV  R30,R17
000135 9119      	LD   R17,Y+
000136 9508      	RET
                 ; 0001 0054 #else
                 ; 0001 0055 	BYTE i, res = 0;
                 ; 0001 0056 
                 ; 0001 0057 	PORTB |= (1<<SD_DI);
                 ; 0001 0058 
                 ; 0001 0059 	for (i = 0; i < 8; i++) {
                 ; 0001 005A 		PORTB |= (1<<SD_CLK);
                 ; 0001 005B 		res = res << 1;
                 ; 0001 005C 		if ((PINB & (1<<SD_DO))!=0x00)
                 ; 0001 005D 		res = res | 0x01;
                 ; 0001 005E 		PORTB &= ~(1<<SD_CLK);
                 ; 0001 005F 		#asm("nop")
                 ; 0001 0060 	}
                 ; 0001 0061 	return res;
                 ; 0001 0062 #endif
                 ; 0001 0063 } /* Send 0xFF and receive a byte */
                 ;//-----------------------------------------------------------------------
                 ;
                 ;// Port Controls (Platform dependent)
                 ;#define SELECT()	PORTB &= ~(1<<SD_CS)		// MMC CS = L
                 ;#define	DESELECT()	PORTB |=  (1<<SD_CS)		// MMC CS = H
                 ;#define	MMC_SEL		!(PORTB & (1<<SD_CS))	// MMC CS status (true:selected)
                 ;
                 ;//-----------------------------------------------------------------------
                 ;//   Module Private Function
                 ;//-----------------------------------------------------------------------
                 ;static BYTE CardType;
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Deselect the card and release SPI bus
                 ;//-----------------------------------------------------------------------
                 ;static
                 ;void release_spi (void)
                 ; 0001 0075 {
                 _release_spi_G001:
                 ; 0001 0076 	rcv_spi();
000137 dff6      	RCALL _rcv_spi
                 ; 0001 0077 }
000138 9508      	RET
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Send a command packet to MMC
                 ;//-----------------------------------------------------------------------
                 ;static
                 ;BYTE send_cmd (
                 ; 0001 007E 	BYTE cmd,		// Command byte
                 ; 0001 007F 	DWORD arg		// Argument
                 ; 0001 0080 )
                 ; 0001 0081 {
                 _send_cmd_G001:
                 ; 0001 0082 	BYTE n, res;
                 ; 0001 0083 
                 ; 0001 0084 
                 ; 0001 0085 	if (cmd & 0x80) {	// ACMD<n> is the command sequense of CMD55-CMD<n>
000139 d92a      	RCALL __PUTPARD2
00013a d953      	RCALL __SAVELOCR2
                 ;	cmd -> Y+6
                 ;	arg -> Y+2
                 ;	n -> R17
                 ;	res -> R16
00013b 81ee      	LDD  R30,Y+6
00013c 78e0      	ANDI R30,LOW(0x80)
00013d f041      	BREQ _0x20009
                 ; 0001 0086 		cmd &= 0x7F;
00013e 81ee      	LDD  R30,Y+6
00013f 77ef      	ANDI R30,0x7F
000140 83ee      	STD  Y+6,R30
                 ; 0001 0087 		res = send_cmd(CMD55, 0);
000141 e7e7      	LDI  R30,LOW(119)
000142 d6a9      	RCALL SUBOPT_0x4
000143 2f0e      	MOV  R16,R30
                 ; 0001 0088 		if (res > 1) return res;
000144 3002      	CPI  R16,2
000145 f540      	BRSH _0x200000D
                 ; 0001 0089 	}
                 ; 0001 008A 
                 ; 0001 008B 	// Select the card
                 ; 0001 008C 	DESELECT();
                 _0x20009:
000146 9ac2      	SBI  0x18,2
                 ; 0001 008D 	rcv_spi();
000147 dfe6      	RCALL _rcv_spi
                 ; 0001 008E 	SELECT();
000148 98c2      	CBI  0x18,2
                 ; 0001 008F 	rcv_spi();
000149 dfe4      	RCALL _rcv_spi
                 ; 0001 0090 
                 ; 0001 0091 	// Send a command packet
                 ; 0001 0092 	xmit_spi(cmd);						// Start + Command index
00014a 81ae      	LDD  R26,Y+6
00014b d6a6      	RCALL SUBOPT_0x5
                 ; 0001 0093 	xmit_spi((BYTE)(arg >> 24));		// Argument[31..24]
00014c e1e8      	LDI  R30,LOW(24)
00014d d86a      	RCALL __LSRD12
00014e 2fae      	MOV  R26,R30
00014f dfd7      	RCALL _xmit_spi
                 ; 0001 0094 	xmit_spi((BYTE)(arg >> 16));		// Argument[23..16]
000150 d6a7      	RCALL SUBOPT_0x6
000151 d884      	RCALL __LSRD16
000152 2fae      	MOV  R26,R30
000153 d69e      	RCALL SUBOPT_0x5
                 ; 0001 0095 	xmit_spi((BYTE)(arg >> 8));			// Argument[15..8]
000154 e0e8      	LDI  R30,LOW(8)
000155 d862      	RCALL __LSRD12
000156 2fae      	MOV  R26,R30
000157 dfcf      	RCALL _xmit_spi
                 ; 0001 0096 	xmit_spi((BYTE)arg);				// Argument[7..0]
000158 81aa      	LDD  R26,Y+2
000159 dfcd      	RCALL _xmit_spi
                 ; 0001 0097 	n = 0x01;							// Dummy CRC + Stop
00015a e011      	LDI  R17,LOW(1)
                 ; 0001 0098 	if (cmd == CMD0) n = 0x95;			// Valid CRC for CMD0(0)
00015b 81ae      	LDD  R26,Y+6
00015c 34a0      	CPI  R26,LOW(0x40)
00015d f409      	BRNE _0x2000B
00015e e915      	LDI  R17,LOW(149)
                 ; 0001 0099 	if (cmd == CMD8) n = 0x87;			// Valid CRC for CMD8(0x1AA)
                 _0x2000B:
00015f 81ae      	LDD  R26,Y+6
000160 34a8      	CPI  R26,LOW(0x48)
000161 f409      	BRNE _0x2000C
000162 e817      	LDI  R17,LOW(135)
                 ; 0001 009A 	xmit_spi(n);
                 _0x2000C:
000163 2fa1      	MOV  R26,R17
000164 dfc2      	RCALL _xmit_spi
                 ; 0001 009B 
                 ; 0001 009C 	// Receive a command response
                 ; 0001 009D 	n = 10;								// Wait for a valid response in timeout of 10 attempts
000165 e01a      	LDI  R17,LOW(10)
                 ; 0001 009E 	do {
                 _0x2000E:
                 ; 0001 009F 		res = rcv_spi();
000166 dfc7      	RCALL _rcv_spi
000167 2f0e      	MOV  R16,R30
                 ; 0001 00A0 	} while ((res & 0x80) && --n);
000168 ff07      	SBRS R16,7
000169 c002      	RJMP _0x20010
00016a 5011      	SUBI R17,LOW(1)
00016b f409      	BRNE _0x20011
                 _0x20010:
00016c c001      	RJMP _0x2000F
                 _0x20011:
00016d cff8      	RJMP _0x2000E
                 _0x2000F:
                 ; 0001 00A1 
                 ; 0001 00A2 	return res;			// Return with the response value
                 _0x200000D:
00016e 2fe0      	MOV  R30,R16
00016f d925      	RCALL __LOADLOCR2
000170 9627      	ADIW R28,7
000171 9508      	RET
                 ; 0001 00A3 }
                 ;
                 ;//--------------------------------------------------------------------------
                 ;//
                 ;//   Public Functions
                 ;//
                 ;//--------------------------------------------------------------------------
                 ;
                 ;//--------------------------------------------------------------------------
                 ;// Initialize Disk Drive
                 ;//--------------------------------------------------------------------------
                 ;DSTATUS disk_initialize (void)
                 ; 0001 00AF {
                 _disk_initialize:
                 ; 0001 00B0 	BYTE n, cmd, ty, ocr[4];
                 ; 0001 00B1 	WORD tmr;
                 ; 0001 00B2 
                 ; 0001 00B3 
                 ; 0001 00B4 	INIT_SPI();
000172 9724      	SBIW R28,4
000173 d916      	RCALL __SAVELOCR6
                 ;	n -> R17
                 ;	cmd -> R16
                 ;	ty -> R19
                 ;	ocr -> Y+6
                 ;	tmr -> R20,R21
000174 dfa7      	RCALL _INIT_SPI
                 ; 0001 00B5 
                 ; 0001 00B6 //	if ((PINB&_BV(SD_INS))!=0x00) return STA_NOINIT;
                 ; 0001 00B7 
                 ; 0001 00B8 #if _WRITE_FUNC
                 ; 0001 00B9 	if (MMC_SEL) disk_writep(0, 0);		// Finalize write process if it is in progress
000175 99c2      	SBIC 0x18,2
000176 c004      	RJMP _0x20012
000177 d661      	RCALL SUBOPT_0x0
000178 d668      	RCALL SUBOPT_0x2
000179 d683      	RCALL SUBOPT_0x7
00017a d0c8      	RCALL _disk_writep
                 ; 0001 00BA #endif
                 ; 0001 00BB 	for (n = 100; n; n--) rcv_spi();	// Dummy clocks
                 _0x20012:
00017b e614      	LDI  R17,LOW(100)
                 _0x20014:
00017c 3010      	CPI  R17,0
00017d f019      	BREQ _0x20015
00017e dfaf      	RCALL _rcv_spi
00017f 5011      	SUBI R17,1
000180 cffb      	RJMP _0x20014
                 _0x20015:
                 ; 0001 00BD ty = 0;
000181 e030      	LDI  R19,LOW(0)
                 ; 0001 00BE 	if (send_cmd(CMD0, 0) == 1) {			// Enter Idle state
000182 e4e0      	LDI  R30,LOW(64)
000183 d668      	RCALL SUBOPT_0x4
000184 30e1      	CPI  R30,LOW(0x1)
000185 f009      	BREQ PC+2
000186 c064      	RJMP _0x20016
                 ; 0001 00BF 		if (send_cmd(CMD8, 0x1AA) == 1) {	// SDv2
000187 e4e8      	LDI  R30,LOW(72)
000188 93ea      	ST   -Y,R30
                +
000189 eaaa     +LDI R26 , LOW ( 0x1AA )
00018a e0b1     +LDI R27 , HIGH ( 0x1AA )
00018b e080     +LDI R24 , BYTE3 ( 0x1AA )
00018c e090     +LDI R25 , BYTE4 ( 0x1AA )
                 	__GETD2N 0x1AA
00018d dfab      	RCALL _send_cmd_G001
00018e 30e1      	CPI  R30,LOW(0x1)
00018f f5f1      	BRNE _0x20017
                 ; 0001 00C0 			for (n = 0; n < 4; n++) ocr[n] = rcv_spi();		// Get trailing return value of R7 resp
000190 e010      	LDI  R17,LOW(0)
                 _0x20019:
000191 3014      	CPI  R17,4
000192 f448      	BRSH _0x2001A
000193 d66e      	RCALL SUBOPT_0x8
000194 93ff      	PUSH R31
000195 93ef      	PUSH R30
000196 df97      	RCALL _rcv_spi
000197 91af      	POP  R26
000198 91bf      	POP  R27
000199 93ec      	ST   X,R30
00019a 5f1f      	SUBI R17,-1
00019b cff5      	RJMP _0x20019
                 _0x2001A:
                 ; 0001 00C1 if (ocr[2] == 0x01 && ocr[3] == 0xAA) {
00019c 85a8      	LDD  R26,Y+8
00019d 30a1      	CPI  R26,LOW(0x1)
00019e f419      	BRNE _0x2001C
00019f 85a9      	LDD  R26,Y+9
0001a0 3aaa      	CPI  R26,LOW(0xAA)
0001a1 f009      	BREQ _0x2001D
                 _0x2001C:
0001a2 c02a      	RJMP _0x2001B
                 _0x2001D:
                 ; 0001 00C2 				for (tmr = 12000; tmr && send_cmd(ACMD41, 1UL << 30); tmr--) ;	// Wait for leaving idle state (ACMD41 with HCS bit)
                +
0001a3 ee40     +LDI R20 , LOW ( 12000 )
0001a4 e25e     +LDI R21 , HIGH ( 12000 )
                 	__GETWRN 20,21,12000
                 _0x2001F:
0001a5 d663      	RCALL SUBOPT_0x9
0001a6 f041      	BREQ _0x20021
0001a7 eee9      	LDI  R30,LOW(233)
0001a8 93ea      	ST   -Y,R30
                +
0001a9 e0a0     +LDI R26 , LOW ( 0x40000000 )
0001aa e0b0     +LDI R27 , HIGH ( 0x40000000 )
0001ab e080     +LDI R24 , BYTE3 ( 0x40000000 )
0001ac e490     +LDI R25 , BYTE4 ( 0x40000000 )
                 	__GETD2N 0x40000000
0001ad d65e      	RCALL SUBOPT_0xA
0001ae f409      	BRNE _0x20022
                 _0x20021:
0001af c003      	RJMP _0x20020
                 _0x20022:
                +
0001b0 5041     +SUBI R20 , LOW ( 1 )
0001b1 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
0001b2 cff2      	RJMP _0x2001F
                 _0x20020:
                 ; 0001 00C3 				if (tmr && send_cmd(CMD58, 0) == 0) {		// Check CCS bit in the OCR
0001b3 d655      	RCALL SUBOPT_0x9
0001b4 f021      	BREQ _0x20024
0001b5 e7ea      	LDI  R30,LOW(122)
0001b6 d635      	RCALL SUBOPT_0x4
0001b7 30e0      	CPI  R30,0
0001b8 f009      	BREQ _0x20025
                 _0x20024:
0001b9 c013      	RJMP _0x20023
                 _0x20025:
                 ; 0001 00C4 					for (n = 0; n < 4; n++) ocr[n] = rcv_spi();
0001ba e010      	LDI  R17,LOW(0)
                 _0x20027:
0001bb 3014      	CPI  R17,4
0001bc f448      	BRSH _0x20028
0001bd d644      	RCALL SUBOPT_0x8
0001be 93ff      	PUSH R31
0001bf 93ef      	PUSH R30
0001c0 df6d      	RCALL _rcv_spi
0001c1 91af      	POP  R26
0001c2 91bf      	POP  R27
0001c3 93ec      	ST   X,R30
0001c4 5f1f      	SUBI R17,-1
0001c5 cff5      	RJMP _0x20027
                 _0x20028:
                 ; 0001 00C5 ty = (ocr[0] & 0x40) ? 0x04	 | 0x08	 : 0x04	;
0001c6 81ee      	LDD  R30,Y+6
0001c7 74e0      	ANDI R30,LOW(0x40)
0001c8 f011      	BREQ _0x20029
0001c9 e0ec      	LDI  R30,LOW(12)
0001ca c001      	RJMP _0x2002A
                 _0x20029:
0001cb e0e4      	LDI  R30,LOW(4)
                 _0x2002A:
0001cc 2f3e      	MOV  R19,R30
                 ; 0001 00C6 				}
                 ; 0001 00C7 			}
                 _0x20023:
                 ; 0001 00C8 		} else {							// SDv1 or MMCv3
                 _0x2001B:
0001cd c01d      	RJMP _0x2002C
                 _0x20017:
                 ; 0001 00C9 			if (send_cmd(ACMD41, 0) <= 1) 	{
0001ce eee9      	LDI  R30,LOW(233)
0001cf d61c      	RCALL SUBOPT_0x4
0001d0 30e2      	CPI  R30,LOW(0x2)
0001d1 f418      	BRSH _0x2002D
                 ; 0001 00CA 				ty = CT_SD1; cmd = ACMD41;	// SDv1
0001d2 e032      	LDI  R19,LOW(2)
0001d3 ee09      	LDI  R16,LOW(233)
                 ; 0001 00CB 			} else {
0001d4 c002      	RJMP _0x2002E
                 _0x2002D:
                 ; 0001 00CC 				ty = CT_MMC; cmd = CMD1;	// MMCv3
0001d5 e031      	LDI  R19,LOW(1)
0001d6 e401      	LDI  R16,LOW(65)
                 ; 0001 00CD 			}
                 _0x2002E:
                 ; 0001 00CE 			for (tmr = 25000; tmr && send_cmd(cmd, 0); tmr--) ;	// Wait for leaving idle state
                +
0001d7 ea48     +LDI R20 , LOW ( 25000 )
0001d8 e651     +LDI R21 , HIGH ( 25000 )
                 	__GETWRN 20,21,25000
                 _0x20030:
0001d9 d62f      	RCALL SUBOPT_0x9
0001da f021      	BREQ _0x20032
0001db 930a      	ST   -Y,R16
0001dc d620      	RCALL SUBOPT_0x7
0001dd d62e      	RCALL SUBOPT_0xA
0001de f409      	BRNE _0x20033
                 _0x20032:
0001df c003      	RJMP _0x20031
                 _0x20033:
                +
0001e0 5041     +SUBI R20 , LOW ( 1 )
0001e1 4050     +SBCI R21 , HIGH ( 1 )
                 	__SUBWRN 20,21,1
0001e2 cff6      	RJMP _0x20030
                 _0x20031:
                 ; 0001 00CF 			if (!tmr || send_cmd(CMD16, 512) != 0)			// Set R/W block length to 512
0001e3 d625      	RCALL SUBOPT_0x9
0001e4 f029      	BREQ _0x20035
0001e5 e5e0      	LDI  R30,LOW(80)
0001e6 93ea      	ST   -Y,R30
0001e7 d627      	RCALL SUBOPT_0xB
0001e8 d623      	RCALL SUBOPT_0xA
0001e9 f009      	BREQ _0x20034
                 _0x20035:
                 ; 0001 00D0 				ty = 0;
0001ea e030      	LDI  R19,LOW(0)
                 ; 0001 00D1 		}
                 _0x20034:
                 _0x2002C:
                 ; 0001 00D2 	}
                 ; 0001 00D3 	CardType = ty;
                 _0x20016:
0001eb 9330 0368 	STS  _CardType_G001,R19
                 ; 0001 00D4 	release_spi();
0001ed df49      	RCALL _release_spi_G001
                 ; 0001 00D5 
                 ; 0001 00D6 #ifdef hardware_spi
                 ; 0001 00D7 	//дл€ аппаратного SPI!!!--------------------------------------------
                 ; 0001 00D8 	SPCR &= ~((1 << SPR1) | (1 << SPR0)); // убираем предделитель
0001ee b1ed      	IN   R30,0xD
0001ef 7fec      	ANDI R30,LOW(0xFC)
0001f0 b9ed      	OUT  0xD,R30
                 ; 0001 00D9 	SPSR |= (1 << SPI2X); // удваиваем частоту
0001f1 9a70      	SBI  0xE,0
                 ; 0001 00DA 	//------------------------------------------------------------------
                 ; 0001 00DB #endif
                 ; 0001 00DC 
                 ; 0001 00DD 	return ty ? 0 : STA_NOINIT;
0001f2 3030      	CPI  R19,0
0001f3 f011      	BREQ _0x20037
0001f4 e0e0      	LDI  R30,LOW(0)
0001f5 c001      	RJMP _0x20038
                 _0x20037:
0001f6 e0e1      	LDI  R30,LOW(1)
                 _0x20038:
0001f7 d899      	RCALL __LOADLOCR6
0001f8 c22e      	RJMP _0x200000A
                 ; 0001 00DE }
                 ;//-----------------------------------------------------------------------
                 ;// Read partial sector
                 ;//-----------------------------------------------------------------------
                 ;
                 ;DRESULT disk_readp (
                 ; 0001 00E4 	BYTE *buff,		// Pointer to the read buffer (NULL:Read bytes are forwarded to the stream)
                 ; 0001 00E5 	DWORD lba,		// Sector number (LBA)
                 ; 0001 00E6 	WORD ofs,		// Byte offset to read from (0..511)
                 ; 0001 00E7 	WORD cnt		// Number of bytes to read (ofs + cnt mus be <= 512)
                 ; 0001 00E8 )
                 ; 0001 00E9 {
                 _disk_readp:
                 ; 0001 00EA 	DRESULT res;
                 ; 0001 00EB 	BYTE rc;
                 ; 0001 00EC 	WORD bc;
                 ; 0001 00ED 
                 ; 0001 00EE //	if ((PINB&_BV(SD_INS))!=0x00) return RES_ERROR;
                 ; 0001 00EF 
                 ; 0001 00F0 	if (!(CardType & CT_BLOCK)) lba *= 512;		// Convert to byte address if needed
0001f9 d61a      	RCALL SUBOPT_0xC
0001fa d891      	RCALL __SAVELOCR4
                 ;	*buff -> Y+12
                 ;	lba -> Y+8
                 ;	ofs -> Y+6
                 ;	cnt -> Y+4
                 ;	res -> R17
                 ;	rc -> R16
                 ;	bc -> R18,R19
0001fb 91e0 0368 	LDS  R30,_CardType_G001
0001fd 70e8      	ANDI R30,LOW(0x8)
0001fe f421      	BRNE _0x2003A
0001ff d617      	RCALL SUBOPT_0xD
000200 d60e      	RCALL SUBOPT_0xB
000201 d7e8      	RCALL __MULD12U
000202 d619      	RCALL SUBOPT_0xE
                 ; 0001 00F1 
                 ; 0001 00F2 	res = RES_ERROR;
                 _0x2003A:
000203 e011      	LDI  R17,LOW(1)
                 ; 0001 00F3 	if (send_cmd(CMD17, lba) == 0) {		// READ_SINGLE_BLOCK
000204 e5e1      	LDI  R30,LOW(81)
000205 93ea      	ST   -Y,R30
000206 d61a      	RCALL SUBOPT_0xF
000207 d604      	RCALL SUBOPT_0xA
000208 f5b9      	BRNE _0x2003B
                 ; 0001 00F4 
                 ; 0001 00F5 		bc = 30000;
                +
000209 e320     +LDI R18 , LOW ( 30000 )
00020a e735     +LDI R19 , HIGH ( 30000 )
                 	__GETWRN 18,19,30000
                 ; 0001 00F6 		do {							// Wait for data packet in timeout of 100ms
                 _0x2003D:
                 ; 0001 00F7 			rc = rcv_spi();
00020b df22      	RCALL _rcv_spi
00020c 2f0e      	MOV  R16,R30
                 ; 0001 00F8 		} while (rc == 0xFF && --bc);
00020d 3f0f      	CPI  R16,255
00020e f411      	BRNE _0x2003F
00020f d616      	RCALL SUBOPT_0x10
000210 f409      	BRNE _0x20040
                 _0x2003F:
000211 c001      	RJMP _0x2003E
                 _0x20040:
000212 cff8      	RJMP _0x2003D
                 _0x2003E:
                 ; 0001 00F9 
                 ; 0001 00FA 		if (rc == 0xFE) {				// A data packet arrived
000213 3f0e      	CPI  R16,254
000214 f559      	BRNE _0x20041
                 ; 0001 00FB 			bc = 514 - ofs - cnt;
000215 d613      	RCALL SUBOPT_0x11
000216 e0e2      	LDI  R30,LOW(514)
000217 e0f2      	LDI  R31,HIGH(514)
000218 1bea      	SUB  R30,R26
000219 0bfb      	SBC  R31,R27
00021a 01df      	MOVW R26,R30
00021b d610      	RCALL SUBOPT_0x12
00021c 1bae      	SUB  R26,R30
00021d 0bbf      	SBC  R27,R31
00021e 019d      	MOVW R18,R26
                 ; 0001 00FC 
                 ; 0001 00FD 			// Skip leading bytes
                 ; 0001 00FE 			if (ofs) {
00021f d60f      	RCALL SUBOPT_0x13
000220 9730      	SBIW R30,0
000221 f019      	BREQ _0x20042
                 ; 0001 00FF 				do rcv_spi(); while (--ofs);
                 _0x20044:
000222 df0b      	RCALL _rcv_spi
000223 d60e      	RCALL SUBOPT_0x14
000224 f7e9      	BRNE _0x20044
                 ; 0001 0100 			}
                 ; 0001 0101 
                 ; 0001 0102 			// Receive a part of the sector
                 ; 0001 0103 			if (buff) {	// Store data to the memory
                 _0x20042:
000225 85ec      	LDD  R30,Y+12
000226 85fd      	LDD  R31,Y+12+1
000227 9730      	SBIW R30,0
000228 f079      	BREQ _0x20046
                 ; 0001 0104 				do
                 _0x20048:
                 ; 0001 0105 					*buff++ = rcv_spi();
000229 85ec      	LDD  R30,Y+12
00022a 85fd      	LDD  R31,Y+12+1
00022b 9631      	ADIW R30,1
00022c 87ec      	STD  Y+12,R30
00022d 87fd      	STD  Y+12+1,R31
00022e 9731      	SBIW R30,1
00022f 93ff      	PUSH R31
000230 93ef      	PUSH R30
000231 defc      	RCALL _rcv_spi
000232 91af      	POP  R26
000233 91bf      	POP  R27
000234 93ec      	ST   X,R30
                 ; 0001 0106 				while (--cnt);
000235 d601      	RCALL SUBOPT_0x15
000236 f791      	BRNE _0x20048
                 ; 0001 0107 			} else {	// Forward data to the outgoing stream (depends on the project)
000237 c002      	RJMP _0x2004A
                 _0x20046:
                 ; 0001 0108 				do
                 _0x2004C:
                 ; 0001 0109                 ;//uart_transmit(rcv_spi());		// (Console output)
                 ; 0001 010A 				while (--cnt);
000238 d5fe      	RCALL SUBOPT_0x15
000239 f7f1      	BRNE _0x2004C
                 ; 0001 010B 			}
                 _0x2004A:
                 ; 0001 010C 
                 ; 0001 010D 			// Skip trailing bytes and CRC
                 ; 0001 010E 			do rcv_spi(); while (--bc);
                 _0x2004F:
00023a def3      	RCALL _rcv_spi
00023b 01f9      	MOVW R30,R18
00023c 9731      	SBIW R30,1
00023d 019f      	MOVW R18,R30
00023e f7d9      	BRNE _0x2004F
                 ; 0001 010F 
                 ; 0001 0110 			res = RES_OK;
00023f e010      	LDI  R17,LOW(0)
                 ; 0001 0111 		}
                 ; 0001 0112 	}
                 _0x20041:
                 ; 0001 0113 
                 ; 0001 0114 	release_spi();
                 _0x2003B:
000240 def6      	RCALL _release_spi_G001
                 ; 0001 0115 
                 ; 0001 0116 	return res;
000241 d5fa      	RCALL SUBOPT_0x16
000242 c288      	RJMP _0x2000008
                 ; 0001 0117 }
                 ;
                 ;//-----------------------------------------------------------------------
                 ;// Write partial sector
                 ;//-----------------------------------------------------------------------
                 ;#if _WRITE_FUNC
                 ;
                 ;DRESULT disk_writep (
                 ; 0001 011F 	const BYTE *buff,	// Pointer to the bytes to be written (NULL:Initiate/Finalize sector write)
                 ; 0001 0120 	DWORD sa			// Number of bytes to send, Sector number (LBA) or zero
                 ; 0001 0121 )
                 ; 0001 0122 {
                 _disk_writep:
                 ; 0001 0123 	DRESULT res;
                 ; 0001 0124 	WORD bc;
                 ; 0001 0125 	static WORD wc;
                 ; 0001 0126 
                 ; 0001 0127 //	if ((PINB&_BV(SD_INS))!=0x00) return RES_ERROR;
                 ; 0001 0128 //	if ((PINB&_BV(SD_WP))!=0x00) return RES_ERROR;
                 ; 0001 0129 
                 ; 0001 012A 	res = RES_ERROR;
000243 d820      	RCALL __PUTPARD2
000244 d847      	RCALL __SAVELOCR4
                 ;	*buff -> Y+8
                 ;	sa -> Y+4
                 ;	res -> R17
                 ;	bc -> R18,R19
000245 e011      	LDI  R17,LOW(1)
                 ; 0001 012B 
                 ; 0001 012C 	if (buff) {		// Send data bytes
000246 d5f8      	RCALL SUBOPT_0x17
000247 9730      	SBIW R30,0
000248 f0c9      	BREQ _0x20051
                 ; 0001 012D 		bc = (WORD)sa;
                +
000249 812c     +LDD R18 , Y + 4
00024a 813d     +LDD R19 , Y + 4 + 1
                 	__GETWRS 18,19,4
                 ; 0001 012E 		while (bc && wc) {		// Send data bytes to the card
                 _0x20052:
00024b d5f6      	RCALL SUBOPT_0x18
00024c f019      	BREQ _0x20055
00024d d5f7      	RCALL SUBOPT_0x19
00024e 9730      	SBIW R30,0
00024f f409      	BRNE _0x20056
                 _0x20055:
000250 c00f      	RJMP _0x20054
                 _0x20056:
                 ; 0001 012F 			xmit_spi(*buff++);
000251 d5f8      	RCALL SUBOPT_0x1A
000252 91ed      	LD   R30,X+
000253 87a8      	STD  Y+8,R26
000254 87b9      	STD  Y+8+1,R27
000255 2fae      	MOV  R26,R30
000256 ded0      	RCALL _xmit_spi
                 ; 0001 0130 			wc--; bc--;
000257 e6a9      	LDI  R26,LOW(_wc_S0010007000)
000258 e0b3      	LDI  R27,HIGH(_wc_S0010007000)
000259 91ed      	LD   R30,X+
00025a 91fd      	LD   R31,X+
00025b 9731      	SBIW R30,1
00025c 93fe      	ST   -X,R31
00025d 93ee      	ST   -X,R30
00025e d5c7      	RCALL SUBOPT_0x10
                 ; 0001 0131 		}
00025f cfeb      	RJMP _0x20052
                 _0x20054:
                 ; 0001 0132 		res = RES_OK;
000260 e010      	LDI  R17,LOW(0)
                 ; 0001 0133 	} else {
000261 c038      	RJMP _0x20057
                 _0x20051:
                 ; 0001 0134 		if (sa) {	// Initiate sector write process
000262 d5ea      	RCALL SUBOPT_0x1B
000263 d812      	RCALL __CPD10
000264 f0c9      	BREQ _0x20058
                 ; 0001 0135 			if (!(CardType & CT_BLOCK)) sa *= 512;	// Convert to byte address if needed
000265 91e0 0368 	LDS  R30,_CardType_G001
000267 70e8      	ANDI R30,LOW(0x8)
000268 f421      	BRNE _0x20059
000269 d5e3      	RCALL SUBOPT_0x1B
00026a d5a4      	RCALL SUBOPT_0xB
00026b d77e      	RCALL __MULD12U
00026c d5e5      	RCALL SUBOPT_0x1C
                 ; 0001 0136 			if (send_cmd(CMD24, sa) == 0) {			// WRITE_SINGLE_BLOCK
                 _0x20059:
00026d e5e8      	LDI  R30,LOW(88)
00026e 93ea      	ST   -Y,R30
00026f d5e7      	RCALL SUBOPT_0x1D
000270 d59b      	RCALL SUBOPT_0xA
000271 f459      	BRNE _0x2005A
                 ; 0001 0137 				xmit_spi(0xFF); xmit_spi(0xFE);		// Data block header
000272 efaf      	LDI  R26,LOW(255)
000273 deb3      	RCALL _xmit_spi
000274 efae      	LDI  R26,LOW(254)
000275 deb1      	RCALL _xmit_spi
                 ; 0001 0138 				wc = 512;							// Set byte counter
000276 e0e0      	LDI  R30,LOW(512)
000277 e0f2      	LDI  R31,HIGH(512)
000278 93e0 0369 	STS  _wc_S0010007000,R30
00027a 93f0 036a 	STS  _wc_S0010007000+1,R31
                 ; 0001 0139 				res = RES_OK;
00027c e010      	LDI  R17,LOW(0)
                 ; 0001 013A 			}
                 ; 0001 013B 		} else {	// Finalize sector write process
                 _0x2005A:
00027d c01c      	RJMP _0x2005B
                 _0x20058:
                 ; 0001 013C 			bc = wc + 2;
00027e d5c6      	RCALL SUBOPT_0x19
00027f 9632      	ADIW R30,2
000280 019f      	MOVW R18,R30
                 ; 0001 013D 			while (bc--) xmit_spi(0);	// Fill left bytes and CRC with zeros
                 _0x2005C:
000281 01f9      	MOVW R30,R18
000282 d5a3      	RCALL SUBOPT_0x10
000283 9730      	SBIW R30,0
000284 f019      	BREQ _0x2005E
000285 e0a0      	LDI  R26,LOW(0)
000286 dea0      	RCALL _xmit_spi
000287 cff9      	RJMP _0x2005C
                 _0x2005E:
                 ; 0001 013E if ((rcv_spi() & 0x1F) == 0x05) {
000288 dea5      	RCALL _rcv_spi
000289 71ef      	ANDI R30,LOW(0x1F)
00028a 30e5      	CPI  R30,LOW(0x5)
00028b f469      	BRNE _0x2005F
                 ; 0001 013F 				for (bc = 65000; rcv_spi() != 0xFF && bc; bc--) ;	// Wait ready
                +
00028c ee28     +LDI R18 , LOW ( - 536 )
00028d ef3d     +LDI R19 , HIGH ( - 536 )
                 	__GETWRN 18,19,-536
                 _0x20061:
00028e de9f      	RCALL _rcv_spi
00028f 3fef      	CPI  R30,LOW(0xFF)
000290 f011      	BREQ _0x20063
000291 d5b0      	RCALL SUBOPT_0x18
000292 f409      	BRNE _0x20064
                 _0x20063:
000293 c002      	RJMP _0x20062
                 _0x20064:
000294 d591      	RCALL SUBOPT_0x10
000295 cff8      	RJMP _0x20061
                 _0x20062:
                 ; 0001 0140 				if (bc) res = RES_OK;
000296 d5ab      	RCALL SUBOPT_0x18
000297 f009      	BREQ _0x20065
000298 e010      	LDI  R17,LOW(0)
                 ; 0001 0141 			}
                 _0x20065:
                 ; 0001 0142 			release_spi();
                 _0x2005F:
000299 de9d      	RCALL _release_spi_G001
                 ; 0001 0143 		}
                 _0x2005B:
                 ; 0001 0144 	}
                 _0x20057:
                 ; 0001 0145 
                 ; 0001 0146 	return res;
00029a 2fe1      	MOV  R30,R17
00029b c18a      	RJMP _0x2000009
                 ; 0001 0147 }
                 ;#endif
                 ;/*----------------------------------------------------------------------------/
                 ;/  Petit FatFs - FAT file system module  R0.02                 (C)ChaN, 2009
                 ;/-----------------------------------------------------------------------------/
                 ;/ Petit FatFs module is an open source software to implement FAT file system to
                 ;/ small embedded systems. This is a free software and is opened for education,
                 ;/ research and commercial developments under license policy of following trems.
                 ;/
                 ;/  Copyright (C) 2009, ChaN, all right reserved.
                 ;/
                 ;/ * The Petit FatFs module is a free software and there is NO WARRANTY.
                 ;/ * No restriction on use. You can use, modify and redistribute it for
                 ;/   personal, non-profit or commercial use UNDER YOUR RESPONSIBILITY.
                 ;/ * Redistributions of source code must retain the above copyright notice.
                 ;/
                 ;/-----------------------------------------------------------------------------/
                 ;/ Jun 15,'09  R0.01a  First release. (Branched from FatFs R0.07b.)
                 ;/
                 ;/ Dec 14,'09  R0.02   Added multiple code page support.
                 ;/                     Added write funciton.
                 ;/                     Changed stream read mode interface.
                 ;/----------------------------------------------------------------------------*/
                 ;
                 ;#include "pff.h"		/* Petit FatFs configurations and declarations */
                 ;#include "diskio.h"		/* Declarations of low level disk I/O functions */
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Private Functions
                 ;
                 ;---------------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FATFS *FatFs;	/* Pointer to the file system object (logical drive) */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* String functions                                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;/* Fill memory */
                 ;static
                 ;void mem_set (void* dst, int val, int cnt) {
                 ; 0002 002C void mem_set (void* dst, int val, int cnt) {
                 
                 	.CSEG
                 _mem_set_G002:
                 ; 0002 002D 	char *d = (char*)dst;
                 ; 0002 002E 	while (cnt--) *d++ = (char)val;
00029c d577      	RCALL SUBOPT_0xC
00029d d7f0      	RCALL __SAVELOCR2
                 ;	*dst -> Y+6
                 ;	val -> Y+4
                 ;	cnt -> Y+2
                 ;	*d -> R16,R17
                +
00029e 810e     +LDD R16 , Y + 6
00029f 811f     +LDD R17 , Y + 6 + 1
                 	__GETWRS 16,17,6
                 _0x40003:
0002a0 81ea      	LDD  R30,Y+2
0002a1 81fb      	LDD  R31,Y+2+1
0002a2 9731      	SBIW R30,1
0002a3 83ea      	STD  Y+2,R30
0002a4 83fb      	STD  Y+2+1,R31
0002a5 9631      	ADIW R30,1
0002a6 f049      	BREQ _0x40005
0002a7 931f      	PUSH R17
0002a8 930f      	PUSH R16
                +
0002a9 5f0f     +SUBI R16 , LOW ( - 1 )
0002aa 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0002ab 81ec      	LDD  R30,Y+4
0002ac 91af      	POP  R26
0002ad 91bf      	POP  R27
0002ae 93ec      	ST   X,R30
0002af cff0      	RJMP _0x40003
                 _0x40005:
                 ; 0002 002F }
0002b0 d7e4      	RCALL __LOADLOCR2
0002b1 c26b      	RJMP _0x2000007
                 ;
                 ;/* Compare memory to memory */
                 ;static
                 ;int mem_cmp (const void* dst, const void* src, int cnt) {
                 ; 0002 0033 int mem_cmp (const void* dst, const void* src, int cnt) {
                 _mem_cmp_G002:
                 ; 0002 0034 	const char *d = (const char *)dst, *s = (const char *)src;
                 ; 0002 0035 	int r = 0;
                 ; 0002 0036 	while (cnt-- && (r = *d++ - *s++) == 0) ;
0002b2 d561      	RCALL SUBOPT_0xC
0002b3 d7d6      	RCALL __SAVELOCR6
                 ;	*dst -> Y+10
                 ;	*src -> Y+8
                 ;	cnt -> Y+6
                 ;	*d -> R16,R17
                 ;	*s -> R18,R19
                 ;	r -> R20,R21
                +
0002b4 850a     +LDD R16 , Y + 10
0002b5 851b     +LDD R17 , Y + 10 + 1
                 	__GETWRS 16,17,10
                +
0002b6 8528     +LDD R18 , Y + 8
0002b7 8539     +LDD R19 , Y + 8 + 1
                 	__GETWRS 18,19,8
                +
0002b8 e040     +LDI R20 , LOW ( 0 )
0002b9 e050     +LDI R21 , HIGH ( 0 )
                 	__GETWRN 20,21,0
                 _0x40006:
0002ba d577      	RCALL SUBOPT_0x14
0002bb 9631      	ADIW R30,1
0002bc f081      	BREQ _0x40009
0002bd 01d8      	MOVW R26,R16
                +
0002be 5f0f     +SUBI R16 , LOW ( - 1 )
0002bf 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
0002c0 900c      	LD   R0,X
0002c1 2411      	CLR  R1
0002c2 01d9      	MOVW R26,R18
                +
0002c3 5f2f     +SUBI R18 , LOW ( - 1 )
0002c4 4f3f     +SBCI R19 , HIGH ( - 1 )
                 	__ADDWRN 18,19,1
0002c5 91ac      	LD   R26,X
0002c6 27bb      	CLR  R27
0002c7 01f0      	MOVW R30,R0
0002c8 1bea      	SUB  R30,R26
0002c9 0bfb      	SBC  R31,R27
0002ca 01af      	MOVW R20,R30
0002cb 9730      	SBIW R30,0
0002cc f009      	BREQ _0x4000A
                 _0x40009:
0002cd c001      	RJMP _0x40008
                 _0x4000A:
0002ce cfeb      	RJMP _0x40006
                 _0x40008:
                 ; 0002 0037 	return r;
0002cf 01fa      	MOVW R30,R20
0002d0 d7c0      	RCALL __LOADLOCR6
0002d1 962c      	ADIW R28,12
0002d2 9508      	RET
                 ; 0002 0038 }
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* FAT access - Read value of a FAT entry                                */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;CLUST get_fat (	/* 1:IO error, Else:Cluster status */
                 ; 0002 0042 	CLUST clst	/* Cluster# to get the link information */
                 ; 0002 0043 )
                 ; 0002 0044 {
                 _get_fat_G002:
                 ; 0002 0045 	WORD wc, bc, ofs;
                 ; 0002 0046 	BYTE buf[4];
                 ; 0002 0047 	FATFS *fs = FatFs;
                 ; 0002 0048 
                 ; 0002 0049 
                 ; 0002 004A 	if (clst < 2 || clst >= fs->max_clust)	/* Range check */
0002d3 d790      	RCALL __PUTPARD2
0002d4 9726      	SBIW R28,6
0002d5 d7b4      	RCALL __SAVELOCR6
                 ;	clst -> Y+12
                 ;	wc -> R16,R17
                 ;	bc -> R18,R19
                 ;	ofs -> R20,R21
                 ;	buf -> Y+8
                 ;	*fs -> Y+6
0002d6 d585      	RCALL SUBOPT_0x1E
0002d7 83ee      	STD  Y+6,R30
0002d8 83ff      	STD  Y+6+1,R31
0002d9 d587      	RCALL SUBOPT_0x1F
0002da d58b      	RCALL SUBOPT_0x20
0002db f028      	BRLO _0x4000C
0002dc d54c      	RCALL SUBOPT_0x11
0002dd d590      	RCALL SUBOPT_0x21
0002de d582      	RCALL SUBOPT_0x1F
0002df d7a5      	RCALL __CPD21
0002e0 f008      	BRLO _0x4000B
                 _0x4000C:
                 ; 0002 004B 		return 1;
0002e1 c085      	RJMP _0x200000C
                 ; 0002 004C 
                 ; 0002 004D 	switch (fs->fs_type) {
                 _0x4000B:
0002e2 d546      	RCALL SUBOPT_0x11
0002e3 91ec      	LD   R30,X
0002e4 e0f0      	LDI  R31,0
                 ; 0002 004E 	case FS_FAT12 :
0002e5 30e1      	CPI  R30,LOW(0x1)
0002e6 e0a0      	LDI  R26,HIGH(0x1)
0002e7 07fa      	CPC  R31,R26
0002e8 f5e9      	BRNE _0x40011
                 ; 0002 004F 		bc = (WORD)clst; bc += bc / 2;
                +
0002e9 852c     +LDD R18 , Y + 12
0002ea 853d     +LDD R19 , Y + 12 + 1
                 	__GETWRS 18,19,12
0002eb 01f9      	MOVW R30,R18
0002ec 95f6      	LSR  R31
0002ed 95e7      	ROR  R30
                +
0002ee 0f2e     +ADD R18 , R30
0002ef 1f3f     +ADC R19 , R31
                 	__ADDWRR 18,19,30,31
                 ; 0002 0050 		ofs = bc % 512; bc /= 512;
0002f0 01f9      	MOVW R30,R18
0002f1 70f1      	ANDI R31,HIGH(0x1FF)
0002f2 01af      	MOVW R20,R30
0002f3 01d9      	MOVW R26,R18
0002f4 e0e0      	LDI  R30,LOW(512)
0002f5 e0f2      	LDI  R31,HIGH(512)
0002f6 d713      	RCALL __DIVW21U
0002f7 019f      	MOVW R18,R30
                 ; 0002 0051 		if (ofs != 511) {
0002f8 efef      	LDI  R30,LOW(511)
0002f9 e0f1      	LDI  R31,HIGH(511)
0002fa 17e4      	CP   R30,R20
0002fb 07f5      	CPC  R31,R21
0002fc f039      	BREQ _0x40012
                 ; 0002 0052 			if (disk_readp(buf, fs->fatbase + bc, ofs, 2)) break;
0002fd d573      	RCALL SUBOPT_0x22
0002fe 935a      	ST   -Y,R21
0002ff 934a      	ST   -Y,R20
000300 d57e      	RCALL SUBOPT_0x23
000301 f009      	BREQ _0x40013
000302 c064      	RJMP _0x40010
                 ; 0002 0053 		} else {
                 _0x40013:
000303 c015      	RJMP _0x40014
                 _0x40012:
                 ; 0002 0054 			if (disk_readp(buf, fs->fatbase + bc, 511, 1)) break;
000304 d56c      	RCALL SUBOPT_0x22
000305 efef      	LDI  R30,LOW(511)
000306 e0f1      	LDI  R31,HIGH(511)
000307 d57c      	RCALL SUBOPT_0x24
000308 f009      	BREQ _0x40015
000309 c05d      	RJMP _0x40010
                 ; 0002 0055 			if (disk_readp(buf+1, fs->fatbase + bc + 1, 0, 1)) break;
                 _0x40015:
00030a 01fe      	MOVW R30,R28
00030b 9639      	ADIW R30,9
00030c d57d      	RCALL SUBOPT_0x25
00030d 01f9      	MOVW R30,R18
00030e d582      	RCALL SUBOPT_0x26
00030f d68f      	RCALL __ADDD12
                +
000310 5fef     +SUBI R30 , LOW ( - 1 )
000311 4fff     +SBCI R31 , HIGH ( - 1 )
000312 4f6f     +SBCI R22 , BYTE3 ( - 1 )
000313 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__ADDD1N 1
000314 d74a      	RCALL __PUTPARD1
000315 d4c3      	RCALL SUBOPT_0x0
000316 d56d      	RCALL SUBOPT_0x24
000317 f009      	BREQ _0x40016
000318 c04e      	RJMP _0x40010
                 ; 0002 0056 		}
                 _0x40016:
                 _0x40014:
                 ; 0002 0057 		wc = LD_WORD(buf);
                +
000319 8508     +LDD R16 , Y + 8
00031a 8519     +LDD R17 , Y + 8 + 1
                 	__GETWRS 16,17,8
                 ; 0002 0058 		return (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
00031b 85ec      	LDD  R30,Y+12
00031c 70e1      	ANDI R30,LOW(0x1)
00031d f019      	BREQ _0x40017
00031e 01f8      	MOVW R30,R16
00031f d6ad      	RCALL __LSRW4
000320 c002      	RJMP _0x400CD
                 _0x40017:
000321 01f8      	MOVW R30,R16
000322 70ff      	ANDI R31,HIGH(0xFFF)
                 _0x400CD:
000323 2766      	CLR  R22
000324 2777      	CLR  R23
000325 c045      	RJMP _0x200000B
                 ; 0002 0059 
                 ; 0002 005A 	case FS_FAT16 :
                 _0x40011:
000326 30e2      	CPI  R30,LOW(0x2)
000327 e0a0      	LDI  R26,HIGH(0x2)
000328 07fa      	CPC  R31,R26
000329 f4d1      	BRNE _0x4001A
                 ; 0002 005B 		if (disk_readp(buf, fs->fatbase + clst / 256, (WORD)(((WORD)clst % 256) * 2), 2)) break;
00032a 01fe      	MOVW R30,R28
00032b 9638      	ADIW R30,8
00032c d55d      	RCALL SUBOPT_0x25
00032d 939f      	PUSH R25
00032e 938f      	PUSH R24
00032f 93bf      	PUSH R27
000330 93af      	PUSH R26
000331 d562      	RCALL SUBOPT_0x27
                +
000332 e0e0     +LDI R30 , LOW ( 0x100 )
000333 e0f1     +LDI R31 , HIGH ( 0x100 )
000334 e060     +LDI R22 , BYTE3 ( 0x100 )
000335 e070     +LDI R23 , BYTE4 ( 0x100 )
                 	__GETD1N 0x100
000336 d6e6      	RCALL __DIVD21U
000337 91af      	POP  R26
000338 91bf      	POP  R27
000339 918f      	POP  R24
00033a 919f      	POP  R25
00033b d55d      	RCALL SUBOPT_0x28
00033c 70f0      	ANDI R31,HIGH(0xFF)
00033d 0fee      	LSL  R30
00033e 1fff      	ROL  R31
00033f d55e      	RCALL SUBOPT_0x29
000340 f531      	BRNE _0x40010
                 ; 0002 005C 		return LD_WORD(buf);
000341 d4fd      	RCALL SUBOPT_0x17
000342 d54e      	RCALL SUBOPT_0x26
000343 c027      	RJMP _0x200000B
                 ; 0002 005D #if _FS_FAT32
                 ; 0002 005E 	case FS_FAT32 :
                 _0x4001A:
000344 30e3      	CPI  R30,LOW(0x3)
000345 e0a0      	LDI  R26,HIGH(0x3)
000346 07fa      	CPC  R31,R26
000347 f4f9      	BRNE _0x40010
                 ; 0002 005F 		if (disk_readp(buf, fs->fatbase + clst / 128, (WORD)(((WORD)clst % 128) * 4), 4)) break;
000348 01fe      	MOVW R30,R28
000349 9638      	ADIW R30,8
00034a d53f      	RCALL SUBOPT_0x25
00034b 939f      	PUSH R25
00034c 938f      	PUSH R24
00034d 93bf      	PUSH R27
00034e 93af      	PUSH R26
00034f d544      	RCALL SUBOPT_0x27
                +
000350 e8e0     +LDI R30 , LOW ( 0x80 )
000351 e0f0     +LDI R31 , HIGH ( 0x80 )
000352 e060     +LDI R22 , BYTE3 ( 0x80 )
000353 e070     +LDI R23 , BYTE4 ( 0x80 )
                 	__GETD1N 0x80
000354 d6c8      	RCALL __DIVD21U
000355 91af      	POP  R26
000356 91bf      	POP  R27
000357 918f      	POP  R24
000358 919f      	POP  R25
000359 d53f      	RCALL SUBOPT_0x28
00035a 77ef      	ANDI R30,LOW(0x7F)
00035b 70f0      	ANDI R31,HIGH(0x7F)
00035c d66b      	RCALL __LSLW2
00035d d483      	RCALL SUBOPT_0x2
00035e e0a4      	LDI  R26,LOW(4)
00035f d540      	RCALL SUBOPT_0x2A
000360 f431      	BRNE _0x40010
                 ; 0002 0060 		return LD_DWORD(buf) & 0x0FFFFFFF;
000361 d4b5      	RCALL SUBOPT_0xD
                +
000362 7fef     +ANDI R30 , LOW ( 0xFFFFFFF )
000363 7fff     +ANDI R31 , HIGH ( 0xFFFFFFF )
000364 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFFF )
000365 707f     +ANDI R23 , BYTE4 ( 0xFFFFFFF )
                 	__ANDD1N 0xFFFFFFF
000366 c004      	RJMP _0x200000B
                 ; 0002 0061 #endif
                 ; 0002 0062 	}
                 _0x40010:
                 ; 0002 0063 
                 ; 0002 0064 	return 1;	/* An error occured at the disk I/O layer */
                 _0x200000C:
                +
000367 e0e1     +LDI R30 , LOW ( 0x1 )
000368 e0f0     +LDI R31 , HIGH ( 0x1 )
000369 e060     +LDI R22 , BYTE3 ( 0x1 )
00036a e070     +LDI R23 , BYTE4 ( 0x1 )
                 	__GETD1N 0x1
                 _0x200000B:
00036b d725      	RCALL __LOADLOCR6
00036c 9660      	ADIW R28,16
00036d 9508      	RET
                 ; 0002 0065 }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get sector# from cluster#                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
                 ; 0002 0070 	CLUST clst		/* Cluster# to be converted */
                 ; 0002 0071 )
                 ; 0002 0072 {
                 _clust2sect_G002:
                 ; 0002 0073 	FATFS *fs = FatFs;
                 ; 0002 0074 
                 ; 0002 0075 
                 ; 0002 0076 	clst -= 2;
00036e d6f5      	RCALL __PUTPARD2
00036f d534      	RCALL SUBOPT_0x2B
                 ;	clst -> Y+2
                 ;	*fs -> R16,R17
000370 d487      	RCALL SUBOPT_0x6
                +
000371 50e2     +SUBI R30 , LOW ( 2 )
000372 40f0     +SBCI R31 , HIGH ( 2 )
000373 4060     +SBCI R22 , BYTE3 ( 2 )
000374 4070     +SBCI R23 , BYTE4 ( 2 )
                 	__SUBD1N 2
000375 d534      	RCALL SUBOPT_0x2C
                 ; 0002 0077 	if (clst >= (fs->max_clust - 2)) return 0;		/* Invalid cluster# */
000376 01f8      	MOVW R30,R16
000377 d537      	RCALL SUBOPT_0x2D
                +
000378 e0e2     +LDI R30 , LOW ( 0x2 )
000379 e0f0     +LDI R31 , HIGH ( 0x2 )
00037a e060     +LDI R22 , BYTE3 ( 0x2 )
00037b e070     +LDI R23 , BYTE4 ( 0x2 )
                 	__GETD1N 0x2
00037c d6ec      	RCALL __SWAPD12
00037d d626      	RCALL __SUBD12
00037e d535      	RCALL SUBOPT_0x2E
00037f d705      	RCALL __CPD21
000380 f018      	BRLO _0x4001E
000381 d537      	RCALL SUBOPT_0x2F
000382 d712      	RCALL __LOADLOCR2
000383 c1c0      	RJMP _0x2000006
                 ; 0002 0078 	return (DWORD)clst * fs->csize + fs->database;
                 _0x4001E:
000384 01f8      	MOVW R30,R16
000385 d538      	RCALL SUBOPT_0x30
000386 d52d      	RCALL SUBOPT_0x2E
000387 d658      	RCALL __CWD1
000388 d661      	RCALL __MULD12U
000389 937f      	PUSH R23
00038a 936f      	PUSH R22
00038b 93ff      	PUSH R31
00038c 93ef      	PUSH R30
00038d 01d8      	MOVW R26,R16
00038e 9654      	ADIW R26,20
00038f d6ba      	RCALL __GETD1P
000390 91af      	POP  R26
000391 91bf      	POP  R27
000392 918f      	POP  R24
000393 919f      	POP  R25
000394 d60a      	RCALL __ADDD12
000395 d6ff      	RCALL __LOADLOCR2
000396 c1ad      	RJMP _0x2000006
                 ; 0002 0079 }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Rewind directory index                           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_rewind (
                 ; 0002 0084 	DIR *dj			/* Pointer to directory object */
                 ; 0002 0085 )
                 ; 0002 0086 {
                 _dir_rewind_G002:
                 ; 0002 0087 	CLUST clst;
                 ; 0002 0088 	FATFS *fs = FatFs;
                 ; 0002 0089 
                 ; 0002 008A 
                 ; 0002 008B 	dj->index = 0;
000397 d47c      	RCALL SUBOPT_0xC
000398 9724      	SBIW R28,4
000399 d50a      	RCALL SUBOPT_0x2B
                 ;	*dj -> Y+6
                 ;	clst -> Y+2
                 ;	*fs -> R16,R17
00039a d48e      	RCALL SUBOPT_0x11
00039b d43d      	RCALL SUBOPT_0x0
00039c 93ed      	ST   X+,R30
00039d 93fc      	ST   X,R31
                 ; 0002 008C 	clst = dj->sclust;
00039e d48a      	RCALL SUBOPT_0x11
00039f 9614      	ADIW R26,4
0003a0 d6a9      	RCALL __GETD1P
0003a1 d508      	RCALL SUBOPT_0x2C
                 ; 0002 008D 	if (clst == 1 || clst >= fs->max_clust)	/* Check start cluster range */
0003a2 d511      	RCALL SUBOPT_0x2E
                +
0003a3 30a1     +CPI R26 , LOW ( 0x1 )
0003a4 e0e0     +LDI R30 , HIGH ( 0x1 )
0003a5 07be     +CPC R27 , R30
0003a6 e0e0     +LDI R30 , BYTE3 ( 0x1 )
0003a7 078e     +CPC R24 , R30
0003a8 e0e0     +LDI R30 , BYTE4 ( 0x1 )
0003a9 079e     +CPC R25 , R30
                 	__CPD2N 0x1
0003aa f029      	BREQ _0x40020
0003ab 01d8      	MOVW R26,R16
0003ac d4c1      	RCALL SUBOPT_0x21
0003ad d506      	RCALL SUBOPT_0x2E
0003ae d6d6      	RCALL __CPD21
0003af f018      	BRLO _0x4001F
                 _0x40020:
                 ; 0002 008E 		return FR_DISK_ERR;
0003b0 e0e1      	LDI  R30,LOW(1)
0003b1 d6e3      	RCALL __LOADLOCR2
0003b2 c16a      	RJMP _0x2000007
                 ; 0002 008F #if _FS_FAT32
                 ; 0002 0090 	if (!clst && fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
                 _0x4001F:
0003b3 d444      	RCALL SUBOPT_0x6
0003b4 d6c1      	RCALL __CPD10
0003b5 f421      	BRNE _0x40023
0003b6 01d8      	MOVW R26,R16
0003b7 91ac      	LD   R26,X
0003b8 30a3      	CPI  R26,LOW(0x3)
0003b9 f009      	BREQ _0x40024
                 _0x40023:
0003ba c004      	RJMP _0x40022
                 _0x40024:
                 ; 0002 0091 		clst = fs->dirbase;
0003bb 01d8      	MOVW R26,R16
0003bc 9650      	ADIW R26,16
0003bd d68c      	RCALL __GETD1P
0003be d4eb      	RCALL SUBOPT_0x2C
                 ; 0002 0092 #endif
                 ; 0002 0093 	dj->clust = clst;						/* Current cluster */
                 _0x40022:
0003bf d438      	RCALL SUBOPT_0x6
                +
0003c0 81ae     +LDD R26 , Y + 6
0003c1 81bf     +LDD R27 , Y + 6 + 1
0003c2 9618     +ADIW R26 , 8
0003c3 d691     +RCALL __PUTDP1
                 	__PUTD1SNS 6,8
                 ; 0002 0094 	dj->sect = clst ? clust2sect(clst) : fs->dirbase;	/* Current sector */
0003c4 d433      	RCALL SUBOPT_0x6
0003c5 d6b0      	RCALL __CPD10
0003c6 f019      	BREQ _0x40025
0003c7 d4ec      	RCALL SUBOPT_0x2E
0003c8 dfa5      	RCALL _clust2sect_G002
0003c9 c003      	RJMP _0x40026
                 _0x40025:
0003ca 01d8      	MOVW R26,R16
0003cb 9650      	ADIW R26,16
0003cc d67d      	RCALL __GETD1P
                 _0x40026:
                +
0003cd 81ae     +LDD R26 , Y + 6
0003ce 81bf     +LDD R27 , Y + 6 + 1
0003cf 961c     +ADIW R26 , 12
0003d0 d684     +RCALL __PUTDP1
                 	__PUTD1SNS 6,12
                 ; 0002 0095 
                 ; 0002 0096 	return FR_OK;	/* Seek succeeded */
0003d1 e0e0      	LDI  R30,LOW(0)
0003d2 d6c2      	RCALL __LOADLOCR2
0003d3 c149      	RJMP _0x2000007
                 ; 0002 0097 }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Move directory index next                        */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table */
                 ; 0002 00A2 	DIR *dj			/* Pointer to directory object */
                 ; 0002 00A3 )
                 ; 0002 00A4 {
                 _dir_next_G002:
                 ; 0002 00A5 	CLUST clst;
                 ; 0002 00A6 	WORD i;
                 ; 0002 00A7 	FATFS *fs = FatFs;
                 ; 0002 00A8 
                 ; 0002 00A9 
                 ; 0002 00AA 	i = dj->index + 1;
0003d4 d43f      	RCALL SUBOPT_0xC
0003d5 9724      	SBIW R28,4
0003d6 d4ea      	RCALL SUBOPT_0x31
                 ;	*dj -> Y+8
                 ;	clst -> Y+4
                 ;	i -> R16,R17
                 ;	*fs -> R18,R19
0003d7 d472      	RCALL SUBOPT_0x1A
0003d8 d66d      	RCALL __GETW1P
0003d9 9631      	ADIW R30,1
0003da 018f      	MOVW R16,R30
                 ; 0002 00AB 	if (!i || !dj->sect)	/* Report EOT when index has reached 65535 */
0003db 2e00      	MOV  R0,R16
0003dc 2a01      	OR   R0,R17
0003dd f029      	BREQ _0x40029
0003de d46b      	RCALL SUBOPT_0x1A
0003df 961c      	ADIW R26,12
0003e0 d669      	RCALL __GETD1P
0003e1 d694      	RCALL __CPD10
0003e2 f411      	BRNE _0x40028
                 _0x40029:
                 ; 0002 00AC 		return FR_NO_FILE;
0003e3 e0e3      	LDI  R30,LOW(3)
0003e4 c041      	RJMP _0x2000009
                 ; 0002 00AD 
                 ; 0002 00AE 	if (!(i & (16-1))) {	/* Sector changed? */
                 _0x40028:
0003e5 01f8      	MOVW R30,R16
0003e6 70ef      	ANDI R30,LOW(0xF)
0003e7 f5d1      	BRNE _0x4002B
                 ; 0002 00AF 		dj->sect++;			/* Next sector */
0003e8 d461      	RCALL SUBOPT_0x1A
0003e9 961c      	ADIW R26,12
0003ea d665      	RCALL __GETD1P_INC
                +
0003eb 5fef     +SUBI R30 , LOW ( - 1 )
0003ec 4fff     +SBCI R31 , HIGH ( - 1 )
0003ed 4f6f     +SBCI R22 , BYTE3 ( - 1 )
0003ee 4f7f     +SBCI R23 , BYTE4 ( - 1 )
                 	__SUBD1N -1
0003ef d66a      	RCALL __PUTDP1_DEC
                 ; 0002 00B0 
                 ; 0002 00B1 		if (dj->clust == 0) {	/* Static table */
0003f0 d459      	RCALL SUBOPT_0x1A
0003f1 d47c      	RCALL SUBOPT_0x21
0003f2 d683      	RCALL __CPD10
0003f3 f449      	BRNE _0x4002C
                 ; 0002 00B2 			if (i >= fs->n_rootdir)	/* Report EOT when end of table */
0003f4 01d9      	MOVW R26,R18
0003f5 9614      	ADIW R26,4
0003f6 d64f      	RCALL __GETW1P
0003f7 170e      	CP   R16,R30
0003f8 071f      	CPC  R17,R31
0003f9 f010      	BRLO _0x4002D
                 ; 0002 00B3 				return FR_NO_FILE;
0003fa e0e3      	LDI  R30,LOW(3)
0003fb c02a      	RJMP _0x2000009
                 ; 0002 00B4 		}
                 _0x4002D:
                 ; 0002 00B5 		else {					/* Dynamic table */
0003fc c025      	RJMP _0x4002E
                 _0x4002C:
                 ; 0002 00B6 			if (((i / 16) & (fs->csize-1)) == 0) {	/* Cluster changed? */
0003fd 01f8      	MOVW R30,R16
0003fe d5ce      	RCALL __LSRW4
0003ff 01df      	MOVW R26,R30
000400 01f9      	MOVW R30,R18
000401 d4bc      	RCALL SUBOPT_0x30
000402 9731      	SBIW R30,1
000403 23ea      	AND  R30,R26
000404 23fb      	AND  R31,R27
000405 9730      	SBIW R30,0
000406 f4d9      	BRNE _0x4002F
                 ; 0002 00B7 				clst = get_fat(dj->clust);		/* Get next cluster */
000407 d437      	RCALL SUBOPT_0x17
000408 d4a6      	RCALL SUBOPT_0x2D
000409 dec9      	RCALL _get_fat_G002
00040a d447      	RCALL SUBOPT_0x1C
                 ; 0002 00B8 				if (clst <= 1) return FR_DISK_ERR;
00040b d4bb      	RCALL SUBOPT_0x32
00040c d459      	RCALL SUBOPT_0x20
00040d f410      	BRSH _0x40030
00040e e0e1      	LDI  R30,LOW(1)
00040f c016      	RJMP _0x2000009
                 ; 0002 00B9 				if (clst >= fs->max_clust)		/* When it reached end of dynamic table */
                 _0x40030:
000410 01d9      	MOVW R26,R18
000411 d45c      	RCALL SUBOPT_0x21
000412 d4b4      	RCALL SUBOPT_0x32
000413 d671      	RCALL __CPD21
000414 f010      	BRLO _0x40031
                 ; 0002 00BA 					return FR_NO_FILE;			/* Report EOT */
000415 e0e3      	LDI  R30,LOW(3)
000416 c00f      	RJMP _0x2000009
                 ; 0002 00BB 				dj->clust = clst;				/* Initialize data for new cluster */
                 _0x40031:
000417 d435      	RCALL SUBOPT_0x1B
                +
000418 85a8     +LDD R26 , Y + 8
000419 85b9     +LDD R27 , Y + 8 + 1
00041a 9618     +ADIW R26 , 8
00041b d639     +RCALL __PUTDP1
                 	__PUTD1SNS 8,8
                 ; 0002 00BC 				dj->sect = clust2sect(clst);
00041c d4aa      	RCALL SUBOPT_0x32
00041d df50      	RCALL _clust2sect_G002
                +
00041e 85a8     +LDD R26 , Y + 8
00041f 85b9     +LDD R27 , Y + 8 + 1
000420 961c     +ADIW R26 , 12
000421 d633     +RCALL __PUTDP1
                 	__PUTD1SNS 8,12
                 ; 0002 00BD 			}
                 ; 0002 00BE 		}
                 _0x4002F:
                 _0x4002E:
                 ; 0002 00BF 	}
                 ; 0002 00C0 
                 ; 0002 00C1 	dj->index = i;
                 _0x4002B:
000422 d427      	RCALL SUBOPT_0x1A
000423 930d      	ST   X+,R16
000424 931c      	ST   X,R17
                 ; 0002 00C2 
                 ; 0002 00C3 	return FR_OK;
000425 e0e0      	LDI  R30,LOW(0)
                 _0x2000009:
000426 d66c      	RCALL __LOADLOCR4
                 _0x200000A:
000427 962a      	ADIW R28,10
000428 9508      	RET
                 ; 0002 00C4 }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Directory handling - Find an object in the directory                  */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT dir_find (
                 ; 0002 00CF 	DIR *dj			/* Pointer to the directory object linked to the file name */
                 ; 0002 00D0 )
                 ; 0002 00D1 {
                 _dir_find_G002:
                 ; 0002 00D2 	FRESULT res;
                 ; 0002 00D3 	BYTE c, *dir;
                 ; 0002 00D4 
                 ; 0002 00D5 
                 ; 0002 00D6 	res = dir_rewind(dj);			/* Rewind directory object */
000429 d3ea      	RCALL SUBOPT_0xC
00042a d661      	RCALL __SAVELOCR4
                 ;	*dj -> Y+4
                 ;	res -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
00042b d4a0      	RCALL SUBOPT_0x33
00042c df6a      	RCALL _dir_rewind_G002
00042d d4a1      	RCALL SUBOPT_0x34
                 ; 0002 00D7 	if (res != FR_OK) return res;
00042e f011      	BREQ _0x40032
00042f d40c      	RCALL SUBOPT_0x16
000430 c113      	RJMP _0x2000006
                 ; 0002 00D8 
                 ; 0002 00D9 	dir = FatFs->buf;
                 _0x40032:
000431 d4a0      	RCALL SUBOPT_0x35
                 ; 0002 00DA 	do {
                 _0x40034:
                 ; 0002 00DB 		res = disk_readp(dir, dj->sect, (WORD)((dj->index % 16) * 32), 32)	/* Read an entry */
                 ; 0002 00DC 			? FR_DISK_ERR : FR_OK;
000432 933a      	ST   -Y,R19
000433 932a      	ST   -Y,R18
000434 d3fa      	RCALL SUBOPT_0x13
000435 d4a4      	RCALL SUBOPT_0x36
000436 d62d      	RCALL __PUTPARD2
000437 85aa      	LDD  R26,Y+10
000438 85bb      	LDD  R27,Y+10+1
000439 d60c      	RCALL __GETW1P
00043a 70ef      	ANDI R30,LOW(0xF)
00043b 70f0      	ANDI R31,HIGH(0xF)
00043c 0fee      	LSL  R30
00043d d586      	RCALL __LSLW4
00043e d3a2      	RCALL SUBOPT_0x2
00043f e2a0      	LDI  R26,LOW(32)
000440 d45f      	RCALL SUBOPT_0x2A
000441 f011      	BREQ _0x40036
000442 e0e1      	LDI  R30,LOW(1)
000443 c001      	RJMP _0x40037
                 _0x40036:
000444 e0e0      	LDI  R30,LOW(0)
                 _0x40037:
000445 d489      	RCALL SUBOPT_0x34
                 ; 0002 00DD 		if (res != FR_OK) break;
000446 f4e1      	BRNE _0x40035
                 ; 0002 00DE 		c = dir[DIR_Name];	/* First character */
000447 01d9      	MOVW R26,R18
000448 910c      	LD   R16,X
                 ; 0002 00DF 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
000449 3000      	CPI  R16,0
00044a f411      	BRNE _0x4003A
00044b e013      	LDI  R17,LOW(3)
00044c c016      	RJMP _0x40035
                 ; 0002 00E0 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dj->fn, 11)) /* Is it a valid entry? */
                 _0x4003A:
00044d 01f9      	MOVW R30,R18
00044e 85e3      	LDD  R30,Z+11
00044f 70e8      	ANDI R30,LOW(0x8)
000450 f459      	BRNE _0x4003C
000451 933a      	ST   -Y,R19
000452 932a      	ST   -Y,R18
000453 d3db      	RCALL SUBOPT_0x13
000454 81a2      	LDD  R26,Z+2
000455 81b3      	LDD  R27,Z+3
000456 d3bd      	RCALL SUBOPT_0xC
000457 e0ab      	LDI  R26,LOW(11)
000458 e0b0      	LDI  R27,0
000459 de58      	RCALL _mem_cmp_G002
00045a 9730      	SBIW R30,0
00045b f009      	BREQ _0x4003D
                 _0x4003C:
00045c c001      	RJMP _0x4003B
                 _0x4003D:
                 ; 0002 00E1 			break;
00045d c005      	RJMP _0x40035
                 ; 0002 00E2 		res = dir_next(dj);							/* Next entry */
                 _0x4003B:
00045e d46d      	RCALL SUBOPT_0x33
00045f df74      	RCALL _dir_next_G002
000460 2f1e      	MOV  R17,R30
                 ; 0002 00E3 	} while (res == FR_OK);
000461 3010      	CPI  R17,0
000462 f279      	BREQ _0x40034
                 _0x40035:
                 ; 0002 00E4 
                 ; 0002 00E5 	return res;
000463 d3d8      	RCALL SUBOPT_0x16
000464 c0df      	RJMP _0x2000006
                 ; 0002 00E6 }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read an object from the directory                                     */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;static
                 ;FRESULT dir_read (
                 ; 0002 00F1 	DIR *dj			/* Pointer to the directory object to store read object name */
                 ; 0002 00F2 )
                 ; 0002 00F3 {
                 ; 0002 00F4 	FRESULT res;
                 ; 0002 00F5 	BYTE a, c, *dir;
                 ; 0002 00F6 
                 ; 0002 00F7 
                 ; 0002 00F8 	res = FR_NO_FILE;
                 ;	*dj -> Y+6
                 ;	res -> R17
                 ;	a -> R16
                 ;	c -> R19
                 ;	*dir -> R20,R21
                 ; 0002 00F9 	dir = FatFs->buf;
                 ; 0002 00FA 	while (dj->sect) {
                 ; 0002 00FB 		res = disk_readp(dir, dj->sect, (WORD)((dj->index % 16) * 32), 32)	/* Read an entry */
                 ; 0002 00FC 			? FR_DISK_ERR : FR_OK;
                 ; 0002 00FD 		if (res != FR_OK) break;
                 ; 0002 00FE 		c = dir[DIR_Name];
                 ; 0002 00FF 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
                 ; 0002 0100 		a = dir[DIR_Attr] & AM_MASK;
                 ; 0002 0101 		if (c != 0xE5 && c != '.' && !(a & AM_VOL))	/* Is it a valid entry? */
                 ; 0002 0102 			break;
                 ; 0002 0103 		res = dir_next(dj);				/* Next entry */
                 ; 0002 0104 		if (res != FR_OK) break;
                 ; 0002 0105 	}
                 ; 0002 0106 
                 ; 0002 0107 	if (res != FR_OK) dj->sect = 0;
                 ; 0002 0108 
                 ; 0002 0109 	return res;
                 ; 0002 010A }
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Pick a segment and create the object name in directory form           */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;#ifdef _EXCVT
                 ;	static const BYTE cvt[] = _EXCVT;
                 
                 	.DSEG
                 ;#endif
                 ;
                 ;static
                 ;FRESULT create_name (
                 ; 0002 0119 	DIR *dj,			/* Pointer to the directory object */
                 ; 0002 011A 	const char **path	/* Pointer to pointer to the segment in the path string */
                 ; 0002 011B )
                 ; 0002 011C {
                 
                 	.CSEG
                 _create_name_G002:
                 ; 0002 011D 	BYTE c, d, ni, si, i, *sfn;
                 ; 0002 011E 	const char *p;
                 ; 0002 011F 
                 ; 0002 0120 	/* Create file name in directory form */
                 ; 0002 0121 	sfn = dj->fn;
000465 d3ae      	RCALL SUBOPT_0xC
000466 9724      	SBIW R28,4
000467 d622      	RCALL __SAVELOCR6
                 ;	*dj -> Y+12
                 ;	*path -> Y+10
                 ;	c -> R17
                 ;	d -> R16
                 ;	ni -> R19
                 ;	si -> R18
                 ;	i -> R21
                 ;	*sfn -> Y+8
                 ;	*p -> Y+6
000468 85ac      	LDD  R26,Y+12
000469 85bd      	LDD  R27,Y+12+1
00046a 9612      	ADIW R26,2
00046b d5da      	RCALL __GETW1P
00046c 87e8      	STD  Y+8,R30
00046d 87f9      	STD  Y+8+1,R31
                 ; 0002 0122 	mem_set(sfn, ' ', 11);
00046e d3d0      	RCALL SUBOPT_0x17
00046f d371      	RCALL SUBOPT_0x2
000470 e2e0      	LDI  R30,LOW(32)
000471 e0f0      	LDI  R31,HIGH(32)
000472 d36e      	RCALL SUBOPT_0x2
000473 e0ab      	LDI  R26,LOW(11)
000474 e0b0      	LDI  R27,0
000475 de26      	RCALL _mem_set_G002
                 ; 0002 0123 	si = i = 0; ni = 8;
000476 e0e0      	LDI  R30,LOW(0)
000477 2f5e      	MOV  R21,R30
000478 2f2e      	MOV  R18,R30
000479 e038      	LDI  R19,LOW(8)
                 ; 0002 0124 	p = *path;
00047a 85aa      	LDD  R26,Y+10
00047b 85bb      	LDD  R27,Y+10+1
00047c d5c9      	RCALL __GETW1P
00047d 83ee      	STD  Y+6,R30
00047e 83ff      	STD  Y+6+1,R31
                 ; 0002 0125 	for (;;) {
                 _0x4004D:
                 ; 0002 0126 		c = p[si++];
00047f d45f      	RCALL SUBOPT_0x37
000480 911c      	LD   R17,X
                 ; 0002 0127 		if (c <= ' ' || c == '/') break;	/* Break on end of segment */
000481 3211      	CPI  R17,33
000482 f010      	BRLO _0x40050
000483 321f      	CPI  R17,47
000484 f409      	BRNE _0x4004F
                 _0x40050:
000485 c031      	RJMP _0x4004E
                 ; 0002 0128 		if (c == '.' || i >= ni) {
                 _0x4004F:
000486 321e      	CPI  R17,46
000487 f011      	BREQ _0x40053
000488 1753      	CP   R21,R19
000489 f040      	BRLO _0x40052
                 _0x40053:
                 ; 0002 0129 			if (ni != 8 || c != '.') break;
00048a 3038      	CPI  R19,8
00048b f411      	BRNE _0x40056
00048c 321e      	CPI  R17,46
00048d f009      	BREQ _0x40055
                 _0x40056:
00048e c028      	RJMP _0x4004E
                 ; 0002 012A 			i = 8; ni = 11;
                 _0x40055:
00048f e058      	LDI  R21,LOW(8)
000490 e03b      	LDI  R19,LOW(11)
                 ; 0002 012B 			continue;
000491 c024      	RJMP _0x4004C
                 ; 0002 012C 		}
                 ; 0002 012D #ifdef _EXCVT
                 ; 0002 012E 		if (c >= 0x80)					/* To upper extended char (SBCS) */
                 _0x40052:
000492 3810      	CPI  R17,128
000493 f038      	BRLO _0x40058
                 ; 0002 012F 			c = cvt[c - 0x80];
000494 2fe1      	MOV  R30,R17
000495 e0f0      	LDI  R31,0
000496 58e0      	SUBI R30,LOW(128)
000497 40f0      	SBCI R31,HIGH(128)
000498 59e3      	SUBI R30,LOW(-_cvt_G002)
000499 4ffc      	SBCI R31,HIGH(-_cvt_G002)
00049a 8110      	LD   R17,Z
                 ; 0002 0130 #endif
                 ; 0002 0131 		if (IsDBCS1(c) && i >= ni - 1) {	/* DBC 1st byte? */
                 _0x40058:
00049b e0e0      	LDI  R30,LOW(0)
00049c 30e0      	CPI  R30,0
00049d f041      	BREQ _0x4005A
00049e 2fe3      	MOV  R30,R19
00049f e0f0      	LDI  R31,0
0004a0 9731      	SBIW R30,1
0004a1 2fa5      	MOV  R26,R21
0004a2 e0b0      	LDI  R27,0
0004a3 17ae      	CP   R26,R30
0004a4 07bf      	CPC  R27,R31
0004a5 f40c      	BRGE _0x4005B
                 _0x4005A:
0004a6 c007      	RJMP _0x40059
                 _0x4005B:
                 ; 0002 0132 			d = p[si++];					/* Get 2nd byte */
0004a7 d437      	RCALL SUBOPT_0x37
0004a8 910c      	LD   R16,X
                 ; 0002 0133 			sfn[i++] = c;
0004a9 d43c      	RCALL SUBOPT_0x38
0004aa 8310      	ST   Z,R17
                 ; 0002 0134 			sfn[i++] = d;
0004ab d43a      	RCALL SUBOPT_0x38
0004ac 8300      	ST   Z,R16
                 ; 0002 0135 		} else {						/* Single byte code */
0004ad c008      	RJMP _0x4005C
                 _0x40059:
                 ; 0002 0136 			if (IsLower(c)) c -= 0x20;	/* toupper */
0004ae 3611      	CPI  R17,97
0004af f010      	BRLO _0x4005E
0004b0 371b      	CPI  R17,123
0004b1 f008      	BRLO _0x4005F
                 _0x4005E:
0004b2 c001      	RJMP _0x4005D
                 _0x4005F:
0004b3 5210      	SUBI R17,LOW(32)
                 ; 0002 0137 			sfn[i++] = c;
                 _0x4005D:
0004b4 d431      	RCALL SUBOPT_0x38
0004b5 8310      	ST   Z,R17
                 ; 0002 0138 		}
                 _0x4005C:
                 ; 0002 0139 	}
                 _0x4004C:
0004b6 cfc8      	RJMP _0x4004D
                 _0x4004E:
                 ; 0002 013A 	*path = &p[si];						/* Rerurn pointer to the next segment */
0004b7 2fe2      	MOV  R30,R18
0004b8 d370      	RCALL SUBOPT_0x11
0004b9 e0f0      	LDI  R31,0
0004ba 0fea      	ADD  R30,R26
0004bb 1ffb      	ADC  R31,R27
0004bc 85aa      	LDD  R26,Y+10
0004bd 85bb      	LDD  R27,Y+10+1
0004be 93ed      	ST   X+,R30
0004bf 93fc      	ST   X,R31
                 ; 0002 013B 
                 ; 0002 013C 	sfn[11] = (c <= ' ') ? 1 : 0;		/* Set last segment flag if end of path */
0004c0 3211      	CPI  R17,33
0004c1 f410      	BRSH _0x40060
0004c2 e0e1      	LDI  R30,LOW(1)
0004c3 c001      	RJMP _0x40061
                 _0x40060:
0004c4 e0e0      	LDI  R30,LOW(0)
                 _0x40061:
                +
0004c5 85a8     +LDD R26 , Y + 8
0004c6 85b9     +LDD R27 , Y + 8 + 1
0004c7 961b     +ADIW R26 , 11
0004c8 93ec     +ST X , R30
                 	__PUTB1SNS 8,11
                 ; 0002 013D 
                 ; 0002 013E 	return FR_OK;
0004c9 e0e0      	LDI  R30,LOW(0)
0004ca d5c6      	RCALL __LOADLOCR6
                 _0x2000008:
0004cb 962e      	ADIW R28,14
0004cc 9508      	RET
                 ; 0002 013F }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Get file information from directory entry                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;static
                 ;void get_fileinfo (		/* No return code */
                 ; 0002 014A 	DIR *dj,			/* Pointer to the directory object */
                 ; 0002 014B 	FILINFO *fno	 	/* Pointer to store the file information */
                 ; 0002 014C )
                 ; 0002 014D {
                 ; 0002 014E 	BYTE i, c, *dir;
                 ; 0002 014F 	char *p;
                 ; 0002 0150 
                 ; 0002 0151 
                 ; 0002 0152 	p = fno->fname;
                 ;	*dj -> Y+8
                 ;	*fno -> Y+6
                 ;	i -> R17
                 ;	c -> R16
                 ;	*dir -> R18,R19
                 ;	*p -> R20,R21
                 ; 0002 0153 	if (dj->sect) {
                 ; 0002 0154 		dir = FatFs->buf;
                 ; 0002 0155 		for (i = 0; i < 8; i++) {	/* Copy file name body */
                 ; 0002 0156 			c = dir[i];
                 ; 0002 0157 			if (c == ' ') break;
                 ; 0002 0158 			if (c == 0x05) c = 0xE5;
                 ; 0002 0159 			*p++ = c;
                 ; 0002 015A 		}
                 ; 0002 015B 		if (dir[8] != ' ') {		/* Copy file name extension */
                 ; 0002 015C 			*p++ = '.';
                 ; 0002 015D 			for (i = 8; i < 11; i++) {
                 ; 0002 015E 				c = dir[i];
                 ; 0002 015F 				if (c == ' ') break;
                 ; 0002 0160 				*p++ = c;
                 ; 0002 0161 			}
                 ; 0002 0162 		}
                 ; 0002 0163 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
                 ; 0002 0164 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
                 ; 0002 0165 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
                 ; 0002 0166 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
                 ; 0002 0167 	}
                 ; 0002 0168 	*p = 0;
                 ; 0002 0169 }
                 ;#endif /* _USE_DIR */
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Follow a file path                                                    */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
                 ; 0002 0174 	DIR *dj,			/* Directory object to return last directory and found object */
                 ; 0002 0175 	const char *path	/* Full-path string to find a file or directory */
                 ; 0002 0176 )
                 ; 0002 0177 {
                 _follow_path_G002:
                 ; 0002 0178 	FRESULT res;
                 ; 0002 0179 	BYTE *dir;
                 ; 0002 017A 
                 ; 0002 017B 
                 ; 0002 017C 	while (*path == ' ') path++;		/* Skip leading spaces */
0004cd d346      	RCALL SUBOPT_0xC
0004ce d5bd      	RCALL __SAVELOCR4
                 ;	*dj -> Y+6
                 ;	*path -> Y+4
                 ;	res -> R17
                 ;	*dir -> R18,R19
                 _0x4006E:
0004cf d3fc      	RCALL SUBOPT_0x33
0004d0 91ac      	LD   R26,X
0004d1 32a0      	CPI  R26,LOW(0x20)
0004d2 f411      	BRNE _0x40070
0004d3 d419      	RCALL SUBOPT_0x39
0004d4 cffa      	RJMP _0x4006E
                 _0x40070:
                 ; 0002 017D if (*path == '/') path++;
0004d5 d3f6      	RCALL SUBOPT_0x33
0004d6 91ac      	LD   R26,X
0004d7 32af      	CPI  R26,LOW(0x2F)
0004d8 f409      	BRNE _0x40071
0004d9 d413      	RCALL SUBOPT_0x39
                 ; 0002 017E 	dj->sclust = 0;						/* Set start directory (always root dir) */
                 _0x40071:
0004da d34e      	RCALL SUBOPT_0x11
0004db 9614      	ADIW R26,4
0004dc d3dc      	RCALL SUBOPT_0x2F
0004dd d577      	RCALL __PUTDP1
                 ; 0002 017F 
                 ; 0002 0180 	if ((BYTE)*path <= ' ') {			/* Null path means the root directory */
0004de d3ed      	RCALL SUBOPT_0x33
0004df 91ac      	LD   R26,X
0004e0 32a1      	CPI  R26,LOW(0x21)
0004e1 f440      	BRSH _0x40072
                 ; 0002 0181 		res = dir_rewind(dj);
0004e2 d346      	RCALL SUBOPT_0x11
0004e3 deb3      	RCALL _dir_rewind_G002
0004e4 2f1e      	MOV  R17,R30
                 ; 0002 0182 		FatFs->buf[0] = 0;
0004e5 d376      	RCALL SUBOPT_0x1E
0004e6 81a6      	LDD  R26,Z+6
0004e7 81b7      	LDD  R27,Z+7
0004e8 d409      	RCALL SUBOPT_0x3A
                 ; 0002 0183 
                 ; 0002 0184 	} else {							/* Follow path */
0004e9 c032      	RJMP _0x40073
                 _0x40072:
                 ; 0002 0185 		for (;;) {
                 _0x40075:
                 ; 0002 0186 			res = create_name(dj, &path);	/* Get a segment */
0004ea d344      	RCALL SUBOPT_0x13
0004eb d2f5      	RCALL SUBOPT_0x2
0004ec 01de      	MOVW R26,R28
0004ed 9616      	ADIW R26,6
0004ee df76      	RCALL _create_name_G002
0004ef d3df      	RCALL SUBOPT_0x34
                 ; 0002 0187 			if (res != FR_OK) break;
0004f0 f559      	BRNE _0x40076
                 ; 0002 0188 			res = dir_find(dj);				/* Find it */
0004f1 d337      	RCALL SUBOPT_0x11
0004f2 df36      	RCALL _dir_find_G002
0004f3 d3db      	RCALL SUBOPT_0x34
                 ; 0002 0189 			if (res != FR_OK) {				/* Could not find the object */
0004f4 f039      	BREQ _0x40078
                 ; 0002 018A 				if (res == FR_NO_FILE && !*(dj->fn+11))
0004f5 3013      	CPI  R17,3
0004f6 f411      	BRNE _0x4007A
0004f7 d3fd      	RCALL SUBOPT_0x3B
0004f8 f009      	BREQ _0x4007B
                 _0x4007A:
0004f9 c001      	RJMP _0x40079
                 _0x4007B:
                 ; 0002 018B 					res = FR_NO_PATH;
0004fa e014      	LDI  R17,LOW(4)
                 ; 0002 018C 				break;
                 _0x40079:
0004fb c020      	RJMP _0x40076
                 ; 0002 018D 			}
                 ; 0002 018E 			if (*(dj->fn+11)) break;		/* Last segment match. Function completed. */
                 _0x40078:
0004fc d3f8      	RCALL SUBOPT_0x3B
0004fd f4f1      	BRNE _0x40076
                 ; 0002 018F 			dir = FatFs->buf;				/* There is next segment. Follow the sub directory */
0004fe d3d3      	RCALL SUBOPT_0x35
                 ; 0002 0190 			if (!(dir[DIR_Attr] & AM_DIR)) { /* Cannot follow because it is a file */
0004ff 01f9      	MOVW R30,R18
000500 85e3      	LDD  R30,Z+11
000501 71e0      	ANDI R30,LOW(0x10)
000502 f411      	BRNE _0x4007D
                 ; 0002 0191 				res = FR_NO_PATH; break;
000503 e014      	LDI  R17,LOW(4)
000504 c017      	RJMP _0x40076
                 ; 0002 0192 			}
                 ; 0002 0193 			dj->sclust =
                 _0x4007D:
                 ; 0002 0194 #if _FS_FAT32
                 ; 0002 0195 				((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0002 0196 #endif
                 ; 0002 0197 				LD_WORD(dir+DIR_FstClusLO);
000505 01d9      	MOVW R26,R18
000506 9654      	ADIW R26,20
000507 d53e      	RCALL __GETW1P
000508 d388      	RCALL SUBOPT_0x26
000509 d4d1      	RCALL __LSLD16
00050a 937f      	PUSH R23
00050b 936f      	PUSH R22
00050c 93ff      	PUSH R31
00050d 93ef      	PUSH R30
00050e 01d9      	MOVW R26,R18
00050f 965a      	ADIW R26,26
000510 d535      	RCALL __GETW1P
000511 91af      	POP  R26
000512 91bf      	POP  R27
000513 918f      	POP  R24
000514 919f      	POP  R25
000515 d37b      	RCALL SUBOPT_0x26
000516 d49c      	RCALL __ORD12
                +
000517 81ae     +LDD R26 , Y + 6
000518 81bf     +LDD R27 , Y + 6 + 1
000519 9614     +ADIW R26 , 4
00051a d53a     +RCALL __PUTDP1
                 	__PUTD1SNS 6,4
                 ; 0002 0198 		}
00051b cfce      	RJMP _0x40075
                 _0x40076:
                 ; 0002 0199 	}
                 _0x40073:
                 ; 0002 019A 
                 ; 0002 019B 	return res;
00051c d31f      	RCALL SUBOPT_0x16
                 _0x2000007:
00051d 9628      	ADIW R28,8
00051e 9508      	RET
                 ; 0002 019C }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Check a sector if it is an FAT boot record                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;static
                 ;BYTE check_fs (	/* 0:The FAT boot record, 1:Valid boot record but not an FAT, 2:Not a boot record, 3:Error */
                 ; 0002 01A7 	BYTE *buf,	/* Working buffer */
                 ; 0002 01A8 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
                 ; 0002 01A9 )
                 ; 0002 01AA {
                 _check_fs_G002:
                 ; 0002 01AB 	if (disk_readp(buf, sect, 510, 2))		/* Read the boot sector */
00051f d544      	RCALL __PUTPARD2
                 ;	*buf -> Y+4
                 ;	sect -> Y+0
000520 d3da      	RCALL SUBOPT_0x3C
000521 efee      	LDI  R30,LOW(510)
000522 e0f1      	LDI  R31,HIGH(510)
000523 d37a      	RCALL SUBOPT_0x29
000524 f011      	BREQ _0x4007E
                 ; 0002 01AC 		return 3;
000525 e0e3      	LDI  R30,LOW(3)
000526 c01d      	RJMP _0x2000006
                 ; 0002 01AD 	if (LD_WORD(buf) != 0xAA55)				/* Check record signature */
                 _0x4007E:
000527 d3a4      	RCALL SUBOPT_0x33
000528 d51d      	RCALL __GETW1P
000529 35e5      	CPI  R30,LOW(0xAA55)
00052a eaaa      	LDI  R26,HIGH(0xAA55)
00052b 07fa      	CPC  R31,R26
00052c f011      	BREQ _0x4007F
                 ; 0002 01AE 		return 2;
00052d e0e2      	LDI  R30,LOW(2)
00052e c015      	RJMP _0x2000006
                 ; 0002 01AF 
                 ; 0002 01B0 	if (!disk_readp(buf, sect, BS_FilSysType, 2) && LD_WORD(buf) == 0x4146)	/* Check FAT12/16 */
                 _0x4007F:
00052f d3cb      	RCALL SUBOPT_0x3C
000530 e3e6      	LDI  R30,LOW(54)
000531 e0f0      	LDI  R31,HIGH(54)
000532 d36b      	RCALL SUBOPT_0x29
000533 f411      	BRNE _0x40081
000534 d3cb      	RCALL SUBOPT_0x3D
000535 f009      	BREQ _0x40082
                 _0x40081:
000536 c002      	RJMP _0x40080
                 _0x40082:
                 ; 0002 01B1 		return 0;
000537 e0e0      	LDI  R30,LOW(0)
000538 c00b      	RJMP _0x2000006
                 ; 0002 01B2 #if _FS_FAT32
                 ; 0002 01B3 	if (!disk_readp(buf, sect, BS_FilSysType32, 2) && LD_WORD(buf) == 0x4146)	/* Check FAT32 */
                 _0x40080:
000539 d3c1      	RCALL SUBOPT_0x3C
00053a e5e2      	LDI  R30,LOW(82)
00053b e0f0      	LDI  R31,HIGH(82)
00053c d361      	RCALL SUBOPT_0x29
00053d f411      	BRNE _0x40084
00053e d3c1      	RCALL SUBOPT_0x3D
00053f f009      	BREQ _0x40085
                 _0x40084:
000540 c002      	RJMP _0x40083
                 _0x40085:
                 ; 0002 01B4 		return 0;
000541 e0e0      	LDI  R30,LOW(0)
000542 c001      	RJMP _0x2000006
                 ; 0002 01B5 #endif
                 ; 0002 01B6 	return 1;
                 _0x40083:
000543 e0e1      	LDI  R30,LOW(1)
                 _0x2000006:
000544 9626      	ADIW R28,6
000545 9508      	RET
                 ; 0002 01B7 }
                 ;
                 ;
                 ;
                 ;
                 ;/*--------------------------------------------------------------------------
                 ;
                 ;   Public Functions
                 ;
                 ;--------------------------------------------------------------------------*/
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Mount/Unmount a Locical Drive                                         */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_mount (
                 ; 0002 01C9 	FATFS *fs		/* Pointer to new file system object (NULL: Unmount) */
                 ; 0002 01CA )
                 ; 0002 01CB {
                 _pf_mount:
                 ; 0002 01CC 	BYTE fmt, buf[36];
                 ; 0002 01CD 	DWORD bsect, fsize, tsect, mclst;
                 ; 0002 01CE 
                 ; 0002 01CF 
                 ; 0002 01D0 	FatFs = 0;
000546 d2cd      	RCALL SUBOPT_0xC
000547 97e4      	SBIW R28,52
000548 931a      	ST   -Y,R17
                 ;	*fs -> Y+53
                 ;	fmt -> R17
                 ;	buf -> Y+17
                 ;	bsect -> Y+13
                 ;	fsize -> Y+9
                 ;	tsect -> Y+5
                 ;	mclst -> Y+1
000549 e0e0      	LDI  R30,LOW(0)
00054a 93e0 036b 	STS  _FatFs_G002,R30
00054c 93e0 036c 	STS  _FatFs_G002+1,R30
                 ; 0002 01D1 	if (!fs) return FR_OK;				/* Unregister fs object */
00054e d3b7      	RCALL SUBOPT_0x3E
00054f 9730      	SBIW R30,0
000550 f409      	BRNE _0x40086
000551 c0d9      	RJMP _0x2000005
                 ; 0002 01D2 
                 ; 0002 01D3 	if (disk_initialize() & STA_NOINIT)	/* Check if the drive is ready or not */
                 _0x40086:
000552 dc1f      	RCALL _disk_initialize
000553 70e1      	ANDI R30,LOW(0x1)
000554 f011      	BREQ _0x40087
                 ; 0002 01D4 		return FR_NOT_READY;
000555 e0e2      	LDI  R30,LOW(2)
000556 c0d5      	RJMP _0x2000004
                 ; 0002 01D5 
                 ; 0002 01D6 	/* Search FAT partition on the drive */
                 ; 0002 01D7 	bsect = 0;
                 _0x40087:
000557 e0e0      	LDI  R30,LOW(0)
                +
000558 87ed     +STD Y + 13 , R30
000559 87ee     +STD Y + 13 + 1 , R30
00055a 87ef     +STD Y + 13 + 2 , R30
00055b 8be8     +STD Y + 13 + 3 , R30
                 	__CLRD1S 13
                 ; 0002 01D8 	fmt = check_fs(buf, bsect);			/* Check sector 0 as an SFD format */
00055c d3ac      	RCALL SUBOPT_0x3F
00055d d3ae      	RCALL SUBOPT_0x40
                 ; 0002 01D9 	if (fmt == 1) {						/* Not an FAT boot record, it may be FDISK format */
00055e 3011      	CPI  R17,1
00055f f4b9      	BRNE _0x40088
                 ; 0002 01DA 		/* Check a partition listed in top of the partition table */
                 ; 0002 01DB 		if (disk_readp(buf, bsect, MBR_Table, 16)) {	/* 1st partition entry */
000560 d3a8      	RCALL SUBOPT_0x3F
000561 d3b1      	RCALL SUBOPT_0x41
000562 ebee      	LDI  R30,LOW(446)
000563 e0f1      	LDI  R31,HIGH(446)
000564 d27c      	RCALL SUBOPT_0x2
000565 e1a0      	LDI  R26,LOW(16)
000566 d339      	RCALL SUBOPT_0x2A
000567 f011      	BREQ _0x40089
                 ; 0002 01DC 			fmt = 3;
000568 e013      	LDI  R17,LOW(3)
                 ; 0002 01DD 		} else {
000569 c00d      	RJMP _0x4008A
                 _0x40089:
                 ; 0002 01DE 			if (buf[4]) {					/* Is the partition existing? */
00056a 89ed      	LDD  R30,Y+21
00056b 30e0      	CPI  R30,0
00056c f051      	BREQ _0x4008B
                 ; 0002 01DF 				bsect = LD_DWORD(&buf[8]);	/* Partition offset in LBA */
                +
00056d 8de9     +LDD R30 , Y + 25
00056e 8dfa     +LDD R31 , Y + 25 + 1
00056f 8d6b     +LDD R22 , Y + 25 + 2
000570 8d7c     +LDD R23 , Y + 25 + 3
                 	__GETD1S 25
                +
000571 87ed     +STD Y + 13 , R30
000572 87fe     +STD Y + 13 + 1 , R31
000573 876f     +STD Y + 13 + 2 , R22
000574 8b78     +STD Y + 13 + 3 , R23
                 	__PUTD1S 13
                 ; 0002 01E0 				fmt = check_fs(buf, bsect);	/* Check the partition */
000575 d393      	RCALL SUBOPT_0x3F
000576 d395      	RCALL SUBOPT_0x40
                 ; 0002 01E1 			}
                 ; 0002 01E2 		}
                 _0x4008B:
                 _0x4008A:
                 ; 0002 01E3 	}
                 ; 0002 01E4 	if (fmt == 3) return FR_DISK_ERR;
                 _0x40088:
000577 3013      	CPI  R17,3
000578 f411      	BRNE _0x4008C
000579 e0e1      	LDI  R30,LOW(1)
00057a c0b1      	RJMP _0x2000004
                 ; 0002 01E5 	if (fmt) return FR_NO_FILESYSTEM;	/* No valid FAT patition is found */
                 _0x4008C:
00057b 3010      	CPI  R17,0
00057c f011      	BREQ _0x4008D
00057d e0e7      	LDI  R30,LOW(7)
00057e c0ad      	RJMP _0x2000004
                 ; 0002 01E6 
                 ; 0002 01E7 	/* Initialize the file system object */
                 ; 0002 01E8 	if (disk_readp(buf, bsect, 13, sizeof(buf))) return FR_DISK_ERR;
                 _0x4008D:
00057f d389      	RCALL SUBOPT_0x3F
000580 d392      	RCALL SUBOPT_0x41
000581 e0ed      	LDI  R30,LOW(13)
000582 e0f0      	LDI  R31,HIGH(13)
000583 d25d      	RCALL SUBOPT_0x2
000584 e2a4      	LDI  R26,LOW(36)
000585 d31a      	RCALL SUBOPT_0x2A
000586 f011      	BREQ _0x4008E
000587 e0e1      	LDI  R30,LOW(1)
000588 c0a3      	RJMP _0x2000004
                 ; 0002 01E9 
                 ; 0002 01EA 	fsize = LD_WORD(buf+BPB_FATSz16-13);				/* Number of sectors per FAT */
                 _0x4008E:
000589 01fe      	MOVW R30,R28
00058a 96b7      	ADIW R30,39
00058b d38d      	RCALL SUBOPT_0x42
00058c d4b9      	RCALL __GETW1P
00058d d303      	RCALL SUBOPT_0x26
00058e d38d      	RCALL SUBOPT_0x43
                 ; 0002 01EB 	if (!fsize) fsize = LD_DWORD(buf+BPB_FATSz32-13);
00058f d391      	RCALL SUBOPT_0x44
000590 d4e5      	RCALL __CPD10
000591 f429      	BRNE _0x4008F
000592 01fe      	MOVW R30,R28
000593 96f5      	ADIW R30,53
000594 d384      	RCALL SUBOPT_0x42
000595 d4b4      	RCALL __GETD1P
000596 d385      	RCALL SUBOPT_0x43
                 ; 0002 01EC 
                 ; 0002 01ED 	fsize *= buf[BPB_NumFATs-13];						/* Number of sectors in FAT area */
                 _0x4008F:
000597 89ec      	LDD  R30,Y+20
000598 e0f0      	LDI  R31,0
000599 d287      	RCALL SUBOPT_0xF
00059a d38b      	RCALL SUBOPT_0x45
00059b d44e      	RCALL __MULD12U
00059c d37f      	RCALL SUBOPT_0x43
                 ; 0002 01EE 	fs->fatbase = bsect + LD_WORD(buf+BPB_RsvdSecCnt-13); /* FAT start sector (lba) */
00059d 01fe      	MOVW R30,R28
00059e 967f      	ADIW R30,31
00059f d379      	RCALL SUBOPT_0x42
0005a0 d4a5      	RCALL __GETW1P
                +
0005a1 85ad     +LDD R26 , Y + 13
0005a2 85be     +LDD R27 , Y + 13 + 1
0005a3 858f     +LDD R24 , Y + 13 + 2
0005a4 8998     +LDD R25 , Y + 13 + 3
                 	__GETD2S 13
0005a5 d2eb      	RCALL SUBOPT_0x26
0005a6 d3f8      	RCALL __ADDD12
                +
0005a7 a9ad     +LDD R26 , Y + 53
0005a8 a9be     +LDD R27 , Y + 53 + 1
0005a9 961c     +ADIW R26 , 12
0005aa d4aa     +RCALL __PUTDP1
                 	__PUTD1SNS 53,12
                 ; 0002 01EF 	fs->csize = buf[BPB_SecPerClus-13];					/* Number of sectors per cluster */
0005ab 89e9      	LDD  R30,Y+17
                +
0005ac a9ad     +LDD R26 , Y + 53
0005ad a9be     +LDD R27 , Y + 53 + 1
0005ae 9611     +ADIW R26 , 1
0005af 93ec     +ST X , R30
                 	__PUTB1SNS 53,1
                 ; 0002 01F0 	fs->n_rootdir = LD_WORD(buf+BPB_RootEntCnt-13);		/* Nmuber of root directory entries */
0005b0 01fe      	MOVW R30,R28
0005b1 96b2      	ADIW R30,34
0005b2 d366      	RCALL SUBOPT_0x42
0005b3 d492      	RCALL __GETW1P
                +
0005b4 a9ad     +LDD R26 , Y + 53
0005b5 a9be     +LDD R27 , Y + 53 + 1
0005b6 9614     +ADIW R26 , 4
0005b7 93ed     +ST X + , R30
0005b8 93fc     +ST X , R31
                 	__PUTW1SNS 53,4
                 ; 0002 01F1 	tsect = LD_WORD(buf+BPB_TotSec16-13);				/* Number of sectors on the file system */
0005b9 01fe      	MOVW R30,R28
0005ba 96b4      	ADIW R30,36
0005bb d35d      	RCALL SUBOPT_0x42
0005bc d489      	RCALL __GETW1P
0005bd d2d3      	RCALL SUBOPT_0x26
0005be d369      	RCALL SUBOPT_0x46
                 ; 0002 01F2 	if (!tsect) tsect = LD_DWORD(buf+BPB_TotSec32-13);
                +
0005bf 81ed     +LDD R30 , Y + 5
0005c0 81fe     +LDD R31 , Y + 5 + 1
0005c1 816f     +LDD R22 , Y + 5 + 2
0005c2 8578     +LDD R23 , Y + 5 + 3
                 	__GETD1S 5
0005c3 d4b2      	RCALL __CPD10
0005c4 f429      	BRNE _0x40090
0005c5 01fe      	MOVW R30,R28
0005c6 96f1      	ADIW R30,49
0005c7 d351      	RCALL SUBOPT_0x42
0005c8 d481      	RCALL __GETD1P
0005c9 d35e      	RCALL SUBOPT_0x46
                 ; 0002 01F3 	mclst = (tsect						/* Last cluster# + 1 */
                 _0x40090:
                 ; 0002 01F4 		- LD_WORD(buf+BPB_RsvdSecCnt-13) - fsize - fs->n_rootdir / 16
                 ; 0002 01F5 		) / fs->csize + 2;
0005ca 01fe      	MOVW R30,R28
0005cb 967f      	ADIW R30,31
0005cc d34c      	RCALL SUBOPT_0x42
0005cd d478      	RCALL __GETW1P
0005ce d288      	RCALL SUBOPT_0x1D
0005cf d2c1      	RCALL SUBOPT_0x26
0005d0 d498      	RCALL __SWAPD12
0005d1 d3d2      	RCALL __SUBD12
0005d2 d24e      	RCALL SUBOPT_0xF
0005d3 d3d0      	RCALL __SUBD12
0005d4 937f      	PUSH R23
0005d5 936f      	PUSH R22
0005d6 93ff      	PUSH R31
0005d7 93ef      	PUSH R30
0005d8 d354      	RCALL SUBOPT_0x47
0005d9 91af      	POP  R26
0005da 91bf      	POP  R27
0005db 918f      	POP  R24
0005dc 919f      	POP  R25
0005dd d2b3      	RCALL SUBOPT_0x26
0005de d3ca      	RCALL __SUBD21
0005df d326      	RCALL SUBOPT_0x3E
0005e0 d2dd      	RCALL SUBOPT_0x30
0005e1 d344      	RCALL SUBOPT_0x45
0005e2 d43a      	RCALL __DIVD21U
                +
0005e3 5fee     +SUBI R30 , LOW ( - 2 )
0005e4 4fff     +SBCI R31 , HIGH ( - 2 )
0005e5 4f6f     +SBCI R22 , BYTE3 ( - 2 )
0005e6 4f7f     +SBCI R23 , BYTE4 ( - 2 )
                 	__ADDD1N 2
                +
0005e7 83e9     +STD Y + 1 , R30
0005e8 83fa     +STD Y + 1 + 1 , R31
0005e9 836b     +STD Y + 1 + 2 , R22
0005ea 837c     +STD Y + 1 + 3 , R23
                 	__PUTD1S 1
                 ; 0002 01F6 	fs->max_clust = (CLUST)mclst;
                +
0005eb a9ad     +LDD R26 , Y + 53
0005ec a9be     +LDD R27 , Y + 53 + 1
0005ed 9618     +ADIW R26 , 8
0005ee d466     +RCALL __PUTDP1
                 	__PUTD1SNS 53,8
                 ; 0002 01F7 
                 ; 0002 01F8 	fmt = FS_FAT12;							/* Determine the FAT sub type */
0005ef e011      	LDI  R17,LOW(1)
                 ; 0002 01F9 	if (mclst >= 0xFF7) fmt = FS_FAT16;		/* Number of clusters >= 0xFF5 */
0005f0 d342      	RCALL SUBOPT_0x48
                +
0005f1 3fa7     +CPI R26 , LOW ( 0xFF7 )
0005f2 e0ef     +LDI R30 , HIGH ( 0xFF7 )
0005f3 07be     +CPC R27 , R30
0005f4 e0e0     +LDI R30 , BYTE3 ( 0xFF7 )
0005f5 078e     +CPC R24 , R30
0005f6 e0e0     +LDI R30 , BYTE4 ( 0xFF7 )
0005f7 079e     +CPC R25 , R30
                 	__CPD2N 0xFF7
0005f8 f008      	BRLO _0x40091
0005f9 e012      	LDI  R17,LOW(2)
                 ; 0002 01FA 	if (mclst >= 0xFFF7)					/* Number of clusters >= 0xFFF5 */
                 _0x40091:
0005fa d338      	RCALL SUBOPT_0x48
                +
0005fb 3fa7     +CPI R26 , LOW ( 0xFFF7 )
0005fc efef     +LDI R30 , HIGH ( 0xFFF7 )
0005fd 07be     +CPC R27 , R30
0005fe e0e0     +LDI R30 , BYTE3 ( 0xFFF7 )
0005ff 078e     +CPC R24 , R30
000600 e0e0     +LDI R30 , BYTE4 ( 0xFFF7 )
000601 079e     +CPC R25 , R30
                 	__CPD2N 0xFFF7
000602 f008      	BRLO _0x40092
                 ; 0002 01FB #if _FS_FAT32
                 ; 0002 01FC 		fmt = FS_FAT32;
000603 e013      	LDI  R17,LOW(3)
                 ; 0002 01FD #else
                 ; 0002 01FE 		return FR_NO_FILESYSTEM;
                 ; 0002 01FF #endif
                 ; 0002 0200 
                 ; 0002 0201 	fs->fs_type = fmt;		/* FAT sub-type */
                 _0x40092:
000604 a9ad      	LDD  R26,Y+53
000605 a9be      	LDD  R27,Y+53+1
000606 931c      	ST   X,R17
                 ; 0002 0202 #if _FS_FAT32
                 ; 0002 0203 	if (fmt == FS_FAT32)
000607 3013      	CPI  R17,3
000608 f429      	BRNE _0x40093
                 ; 0002 0204 		fs->dirbase = LD_DWORD(buf+(BPB_RootClus-13));	/* Root directory start cluster */
                +
000609 a9e8     +LDD R30 , Y + 48
00060a a9f9     +LDD R31 , Y + 48 + 1
00060b a96a     +LDD R22 , Y + 48 + 2
00060c a97b     +LDD R23 , Y + 48 + 3
                 	__GETD1S 48
00060d c001      	RJMP _0x400CE
                 ; 0002 0205 	else
                 _0x40093:
                 ; 0002 0206 #endif
                 ; 0002 0207 		fs->dirbase = fs->fatbase + fsize;				/* Root directory start sector (lba) */
00060e d329      	RCALL SUBOPT_0x49
                 _0x400CE:
                +
00060f a9ad     +LDD R26 , Y + 53
000610 a9be     +LDD R27 , Y + 53 + 1
000611 9650     +ADIW R26 , 16
000612 d442     +RCALL __PUTDP1
                 	__PUTD1SNS 53,16
                 ; 0002 0208 	fs->database = fs->fatbase + fsize + fs->n_rootdir / 16;	/* Data start sector (lba) */
000613 d324      	RCALL SUBOPT_0x49
000614 937f      	PUSH R23
000615 936f      	PUSH R22
000616 93ff      	PUSH R31
000617 93ef      	PUSH R30
000618 d314      	RCALL SUBOPT_0x47
000619 91af      	POP  R26
00061a 91bf      	POP  R27
00061b 918f      	POP  R24
00061c 919f      	POP  R25
00061d d273      	RCALL SUBOPT_0x26
00061e d380      	RCALL __ADDD12
                +
00061f a9ad     +LDD R26 , Y + 53
000620 a9be     +LDD R27 , Y + 53 + 1
000621 9654     +ADIW R26 , 20
000622 d432     +RCALL __PUTDP1
                 	__PUTD1SNS 53,20
                 ; 0002 0209 
                 ; 0002 020A 	fs->flag = 0;
000623 a9ad      	LDD  R26,Y+53
000624 a9be      	LDD  R27,Y+53+1
000625 d317      	RCALL SUBOPT_0x4A
                 ; 0002 020B 	FatFs = fs;
000626 d2df      	RCALL SUBOPT_0x3E
000627 93e0 036b 	STS  _FatFs_G002,R30
000629 93f0 036c 	STS  _FatFs_G002+1,R31
                 ; 0002 020C 
                 ; 0002 020D 	return FR_OK;
                 _0x2000005:
00062b e0e0      	LDI  R30,LOW(0)
                 _0x2000004:
00062c 8118      	LDD  R17,Y+0
00062d 96e7      	ADIW R28,55
00062e 9508      	RET
                 ; 0002 020E }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Open or Create a File                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_open (
                 ; 0002 0218 	const char *path	/* Pointer to the file name */
                 ; 0002 0219 )
                 ; 0002 021A {
                 _pf_open:
                 ; 0002 021B 	FRESULT res;
                 ; 0002 021C 	DIR dj;
                 ; 0002 021D 	BYTE sp[12], dir[32];
                 ; 0002 021E 	FATFS *fs = FatFs;
                 ; 0002 021F 
                 ; 0002 0220 
                 ; 0002 0221 	if (!fs)						/* Check file system */
00062f d1e4      	RCALL SUBOPT_0xC
000630 97ec      	SBIW R28,60
000631 d28f      	RCALL SUBOPT_0x31
                 ;	*path -> Y+64
                 ;	res -> R17
                 ;	dj -> Y+48
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
000632 d20f      	RCALL SUBOPT_0x18
000633 f411      	BRNE _0x40095
                 ; 0002 0222 		return FR_NOT_ENABLED;
000634 e0e6      	LDI  R30,LOW(6)
000635 c03f      	RJMP _0x2000003
                 ; 0002 0223 
                 ; 0002 0224 	fs->flag = 0;
                 _0x40095:
000636 01d9      	MOVW R26,R18
000637 d305      	RCALL SUBOPT_0x4A
                 ; 0002 0225 	fs->buf = dir;
000638 01fe      	MOVW R30,R28
000639 9634      	ADIW R30,4
                +
00063a 01d9     +MOVW R26 , R18
00063b 9616     +ADIW R26 , 6
00063c 93ed     +ST X + , R30
00063d 93fc     +ST X , R31
                 	__PUTW1RNS 18,6
                 ; 0002 0226 	dj.fn = sp;
00063e 01fe      	MOVW R30,R28
00063f 96b4      	ADIW R30,36
000640 abea      	STD  Y+50,R30
000641 abfb      	STD  Y+50+1,R31
                 ; 0002 0227 	res = follow_path(&dj, path);	/* Follow the file path */
000642 01fe      	MOVW R30,R28
000643 96f0      	ADIW R30,48
000644 d19c      	RCALL SUBOPT_0x2
                +
000645 01de     +MOVW R26 , R28
000646 5bae     +SUBI R26 , LOW ( - 66 )
000647 4fbf     +SBCI R27 , HIGH ( - 66 )
000648 900d     +LD R0 , X +
000649 91bc     +LD R27 , X
00064a 2da0     +MOV R26 , R0
                 	__GETW2SX 66
00064b de81      	RCALL _follow_path_G002
00064c d282      	RCALL SUBOPT_0x34
                 ; 0002 0228 	if (res != FR_OK) return res;	/* Follow failed */
00064d f011      	BREQ _0x40096
00064e 2fe1      	MOV  R30,R17
00064f c025      	RJMP _0x2000003
                 ; 0002 0229 	if (!dir[0] || (dir[DIR_Attr] & AM_DIR))	/* It is a directory */
                 _0x40096:
000650 81ec      	LDD  R30,Y+4
000651 30e0      	CPI  R30,0
000652 f019      	BREQ _0x40098
000653 85ef      	LDD  R30,Y+15
000654 71e0      	ANDI R30,LOW(0x10)
000655 f011      	BREQ _0x40097
                 _0x40098:
                 ; 0002 022A 		return FR_NO_FILE;
000656 e0e3      	LDI  R30,LOW(3)
000657 c01d      	RJMP _0x2000003
                 ; 0002 022B 
                 ; 0002 022C 	fs->org_clust =						/* File start cluster */
                 _0x40097:
                 ; 0002 022D #if _FS_FAT32
                 ; 0002 022E 		((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0002 022F #endif
                 ; 0002 0230 		LD_WORD(dir+DIR_FstClusLO);
000658 8de8      	LDD  R30,Y+24
000659 8df9      	LDD  R31,Y+24+1
00065a d236      	RCALL SUBOPT_0x26
00065b d37f      	RCALL __LSLD16
00065c 01df      	MOVW R26,R30
00065d 01cb      	MOVW R24,R22
00065e 8dee      	LDD  R30,Y+30
00065f 8dff      	LDD  R31,Y+30+1
000660 d230      	RCALL SUBOPT_0x26
000661 d351      	RCALL __ORD12
                +
000662 01d9     +MOVW R26 , R18
000663 9690     +ADIW R26 , 32
000664 d3f0     +RCALL __PUTDP1
                 	__PUTD1RNS 18,32
                 ; 0002 0231 	fs->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
                +
000665 a1e8     +LDD R30 , Y + 32
000666 a1f9     +LDD R31 , Y + 32 + 1
000667 a16a     +LDD R22 , Y + 32 + 2
000668 a17b     +LDD R23 , Y + 32 + 3
                 	__GETD1S 32
                +
000669 01d9     +MOVW R26 , R18
00066a 965c     +ADIW R26 , 28
00066b d3e9     +RCALL __PUTDP1
                 	__PUTD1RNS 18,28
                 ; 0002 0232 	fs->fptr = 0;						/* File pointer */
00066c 01d9      	MOVW R26,R18
00066d 9658      	ADIW R26,24
00066e d24a      	RCALL SUBOPT_0x2F
00066f d3e5      	RCALL __PUTDP1
                 ; 0002 0233 	fs->flag = FA_OPENED;
000670 01d9      	MOVW R26,R18
000671 9612      	ADIW R26,2
000672 e0e1      	LDI  R30,LOW(1)
000673 93ec      	ST   X,R30
                 ; 0002 0234 
                 ; 0002 0235 	return FR_OK;
000674 e0e0      	LDI  R30,LOW(0)
                 _0x2000003:
000675 d41d      	RCALL __LOADLOCR4
000676 96ef      	ADIW R28,63
000677 9623      	ADIW R28,3
000678 9508      	RET
                 ; 0002 0236 }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read File                                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_READ
                 ;
                 ;FRESULT pf_read (
                 ; 0002 0241 	void* buff,		/* Pointer to the read buffer (NULL:Forward data to the stream)*/
                 ; 0002 0242 	WORD btr,		/* Number of bytes to read */
                 ; 0002 0243 	WORD* br		/* Pointer to number of bytes read */
                 ; 0002 0244 )
                 ; 0002 0245 {
                 _pf_read:
                 ; 0002 0246 	DRESULT dr;
                 ; 0002 0247 	CLUST clst;
                 ; 0002 0248 	DWORD sect, remain;
                 ; 0002 0249 	BYTE *rbuff = buff;
                 ; 0002 024A 	WORD rcnt;
                 ; 0002 024B 	FATFS *fs = FatFs;
                 ; 0002 024C 
                 ; 0002 024D 
                 ; 0002 024E 	*br = 0;
000679 d19a      	RCALL SUBOPT_0xC
00067a 972e      	SBIW R28,14
00067b d40e      	RCALL __SAVELOCR6
                 ;	*buff -> Y+24
                 ;	btr -> Y+22
                 ;	*br -> Y+20
                 ;	dr -> R17
                 ;	clst -> Y+16
                 ;	sect -> Y+12
                 ;	remain -> Y+8
                 ;	*rbuff -> R18,R19
                 ;	rcnt -> R20,R21
                 ;	*fs -> Y+6
                +
00067c 8d28     +LDD R18 , Y + 24
00067d 8d39     +LDD R19 , Y + 24 + 1
                 	__GETWRS 18,19,24
00067e d1dd      	RCALL SUBOPT_0x1E
00067f 83ee      	STD  Y+6,R30
000680 83ff      	STD  Y+6+1,R31
000681 89ac      	LDD  R26,Y+20
000682 89bd      	LDD  R27,Y+20+1
000683 d155      	RCALL SUBOPT_0x0
000684 93ed      	ST   X+,R30
000685 93fc      	ST   X,R31
                 ; 0002 024F 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
000686 d1a8      	RCALL SUBOPT_0x13
000687 9730      	SBIW R30,0
000688 f411      	BRNE _0x4009A
000689 e0e6      	LDI  R30,LOW(6)
00068a c0ad      	RJMP _0x2000002
                 ; 0002 0250 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x4009A:
00068b d1a3      	RCALL SUBOPT_0x13
00068c 81a2      	LDD  R26,Z+2
00068d 70a1      	ANDI R26,LOW(0x1)
00068e f411      	BRNE _0x4009B
                 ; 0002 0251 		return FR_NOT_OPENED;
00068f e0e5      	LDI  R30,LOW(5)
000690 c0a7      	RJMP _0x2000002
                 ; 0002 0252 
                 ; 0002 0253 	remain = fs->fsize - fs->fptr;
                 _0x4009B:
000691 d19d      	RCALL SUBOPT_0x13
                +
000692 8da4     +LDD R26 , Z + 28
000693 8db5     +LDD R27 , Z + 28 + 1
000694 8d86     +LDD R24 , Z + 28 + 2
000695 8d97     +LDD R25 , Z + 28 + 3
                 	__GETD2Z 28
000696 939f      	PUSH R25
000697 938f      	PUSH R24
000698 93bf      	PUSH R27
000699 93af      	PUSH R26
00069a d2a4      	RCALL SUBOPT_0x4B
00069b 91ef      	POP  R30
00069c 91ff      	POP  R31
00069d 916f      	POP  R22
00069e 917f      	POP  R23
00069f d304      	RCALL __SUBD12
0006a0 d17b      	RCALL SUBOPT_0xE
                 ; 0002 0254 	if (btr > remain) btr = (WORD)remain;			/* Truncate btr by remaining bytes */
0006a1 d175      	RCALL SUBOPT_0xD
0006a2 89ae      	LDD  R26,Y+22
0006a3 89bf      	LDD  R27,Y+22+1
0006a4 2788      	CLR  R24
0006a5 2799      	CLR  R25
0006a6 d3d9      	RCALL __CPD12
0006a7 f418      	BRSH _0x4009C
0006a8 d196      	RCALL SUBOPT_0x17
0006a9 8bee      	STD  Y+22,R30
0006aa 8bff      	STD  Y+22+1,R31
                 ; 0002 0255 
                 ; 0002 0256 	while (btr)	{									/* Repeat until all data transferred */
                 _0x4009C:
                 _0x4009D:
0006ab 89ee      	LDD  R30,Y+22
0006ac 89ff      	LDD  R31,Y+22+1
0006ad 9730      	SBIW R30,0
0006ae f409      	BRNE PC+2
0006af c083      	RJMP _0x4009F
                 ; 0002 0257 		if ((fs->fptr % 512) == 0) {				/* On the sector boundary? */
0006b0 d28e      	RCALL SUBOPT_0x4B
0006b1 01fd      	MOVW R30,R26
0006b2 01bc      	MOVW R22,R24
0006b3 70f1      	ANDI R31,HIGH(0x1FF)
0006b4 9730      	SBIW R30,0
0006b5 f009      	BREQ PC+2
0006b6 c03b      	RJMP _0x400A0
                 ; 0002 0258 			if ((fs->fptr / 512 % fs->csize) == 0) {	/* On the cluster boundary? */
0006b7 d287      	RCALL SUBOPT_0x4B
0006b8 d28c      	RCALL SUBOPT_0x4C
0006b9 01df      	MOVW R26,R30
0006ba 01cb      	MOVW R24,R22
0006bb d173      	RCALL SUBOPT_0x13
0006bc d201      	RCALL SUBOPT_0x30
0006bd d268      	RCALL SUBOPT_0x45
0006be d383      	RCALL __MODD21U
0006bf d3b6      	RCALL __CPD10
0006c0 f4f9      	BRNE _0x400A1
                 ; 0002 0259 				clst = (fs->fptr == 0) ?			/* On the top of the file? */
                 ; 0002 025A 					fs->org_clust : get_fat(fs->curr_clust);
0006c1 d27d      	RCALL SUBOPT_0x4B
0006c2 d3b7      	RCALL __CPD02
0006c3 f421      	BRNE _0x400A2
0006c4 d164      	RCALL SUBOPT_0x11
0006c5 9690      	ADIW R26,32
0006c6 d383      	RCALL __GETD1P
0006c7 c002      	RJMP _0x400A3
                 _0x400A2:
0006c8 d282      	RCALL SUBOPT_0x4D
0006c9 dc09      	RCALL _get_fat_G002
                 _0x400A3:
                +
0006ca 8be8     +STD Y + 16 , R30
0006cb 8bf9     +STD Y + 16 + 1 , R31
0006cc 8b6a     +STD Y + 16 + 2 , R22
0006cd 8b7b     +STD Y + 16 + 3 , R23
                 	__PUTD1S 16
                 ; 0002 025B 				if (clst <= 1) goto fr_abort;
                +
0006ce 89a8     +LDD R26 , Y + 16
0006cf 89b9     +LDD R27 , Y + 16 + 1
0006d0 898a     +LDD R24 , Y + 16 + 2
0006d1 899b     +LDD R25 , Y + 16 + 3
                 	__GETD2S 16
0006d2 d193      	RCALL SUBOPT_0x20
0006d3 f408      	BRSH _0x400A5
0006d4 c060      	RJMP _0x400A6
                 ; 0002 025C 				fs->curr_clust = clst;				/* Update current cluster */
                 _0x400A5:
                +
0006d5 89e8     +LDD R30 , Y + 16
0006d6 89f9     +LDD R31 , Y + 16 + 1
0006d7 896a     +LDD R22 , Y + 16 + 2
0006d8 897b     +LDD R23 , Y + 16 + 3
                 	__GETD1S 16
                +
0006d9 81ae     +LDD R26 , Y + 6
0006da 81bf     +LDD R27 , Y + 6 + 1
0006db 9694     +ADIW R26 , 36
0006dc d378     +RCALL __PUTDP1
                 	__PUTD1SNS 6,36
                 ; 0002 025D 				fs->csect = 0;						/* Reset sector offset in the cluster */
0006dd d14b      	RCALL SUBOPT_0x11
0006de 9613      	ADIW R26,3
0006df d212      	RCALL SUBOPT_0x3A
                 ; 0002 025E 			}
                 ; 0002 025F 			sect = clust2sect(fs->curr_clust);		/* Get current sector */
                 _0x400A1:
0006e0 d26a      	RCALL SUBOPT_0x4D
0006e1 dc8c      	RCALL _clust2sect_G002
                +
0006e2 87ec     +STD Y + 12 , R30
0006e3 87fd     +STD Y + 12 + 1 , R31
0006e4 876e     +STD Y + 12 + 2 , R22
0006e5 877f     +STD Y + 12 + 3 , R23
                 	__PUTD1S 12
                 ; 0002 0260 			if (!sect) goto fr_abort;
0006e6 d38f      	RCALL __CPD10
0006e7 f409      	BRNE _0x400A7
0006e8 c04c      	RJMP _0x400A6
                 ; 0002 0261 			fs->dsect = sect + fs->csect++;
                 _0x400A7:
0006e9 d13f      	RCALL SUBOPT_0x11
0006ea d266      	RCALL SUBOPT_0x4E
0006eb d175      	RCALL SUBOPT_0x1F
0006ec d239      	RCALL SUBOPT_0x45
0006ed d2b1      	RCALL __ADDD12
                +
0006ee 81ae     +LDD R26 , Y + 6
0006ef 81bf     +LDD R27 , Y + 6 + 1
0006f0 9698     +ADIW R26 , 40
0006f1 d363     +RCALL __PUTDP1
                 	__PUTD1SNS 6,40
                 ; 0002 0262 		}
                 ; 0002 0263 		rcnt = 512 - ((WORD)fs->fptr % 512);		/* Get partial sector data from sector buffer */
                 _0x400A0:
0006f2 d13c      	RCALL SUBOPT_0x13
0006f3 8da0      	LDD  R26,Z+24
0006f4 8db1      	LDD  R27,Z+25
0006f5 01fd      	MOVW R30,R26
0006f6 70f1      	ANDI R31,HIGH(0x1FF)
0006f7 e0a0      	LDI  R26,LOW(512)
0006f8 e0b2      	LDI  R27,HIGH(512)
0006f9 1bae      	SUB  R26,R30
0006fa 0bbf      	SBC  R27,R31
0006fb 01ad      	MOVW R20,R26
                 ; 0002 0264 		if (rcnt > btr) rcnt = btr;
0006fc 89ee      	LDD  R30,Y+22
0006fd 89ff      	LDD  R31,Y+22+1
0006fe 17e4      	CP   R30,R20
0006ff 07f5      	CPC  R31,R21
000700 f410      	BRSH _0x400A8
                +
000701 894e     +LDD R20 , Y + 22
000702 895f     +LDD R21 , Y + 22 + 1
                 	__GETWRS 20,21,22
                 ; 0002 0265 		dr = disk_readp(!buff ? 0 : rbuff, fs->dsect, (WORD)(fs->fptr % 512), rcnt);
                 _0x400A8:
000703 8de8      	LDD  R30,Y+24
000704 8df9      	LDD  R31,Y+24+1
000705 9730      	SBIW R30,0
000706 f411      	BRNE _0x400A9
000707 d0d1      	RCALL SUBOPT_0x0
000708 c001      	RJMP _0x400AA
                 _0x400A9:
000709 01f9      	MOVW R30,R18
                 _0x400AA:
00070a d0d6      	RCALL SUBOPT_0x2
00070b d133      	RCALL SUBOPT_0x17
                +
00070c a5a0     +LDD R26 , Z + 40
00070d a5b1     +LDD R27 , Z + 40 + 1
00070e a582     +LDD R24 , Z + 40 + 2
00070f a593     +LDD R25 , Z + 40 + 3
                 	__GETD2Z 40
000710 d353      	RCALL __PUTPARD2
000711 85ac      	LDD  R26,Y+12
000712 85bd      	LDD  R27,Y+12+1
000713 9658      	ADIW R26,24
000714 d331      	RCALL __GETW1P
000715 70f1      	ANDI R31,HIGH(0x1FF)
000716 d0ca      	RCALL SUBOPT_0x2
000717 01da      	MOVW R26,R20
000718 dae0      	RCALL _disk_readp
000719 d1b5      	RCALL SUBOPT_0x34
                 ; 0002 0266 		if (dr) goto fr_abort;
00071a f4d1      	BRNE _0x400A6
                 ; 0002 0267 		fs->fptr += rcnt; rbuff += rcnt;			/* Update pointers and counters */
00071b d113      	RCALL SUBOPT_0x13
00071c d23b      	RCALL SUBOPT_0x4F
00071d 01df      	MOVW R26,R30
00071e 01cb      	MOVW R24,R22
00071f 01fa      	MOVW R30,R20
000720 d170      	RCALL SUBOPT_0x26
000721 d23b      	RCALL SUBOPT_0x50
                +
000722 0f24     +ADD R18 , R20
000723 1f35     +ADC R19 , R21
                 	__ADDWRR 18,19,20,21
                 ; 0002 0268 		btr -= rcnt; *br += rcnt;
000724 89ee      	LDD  R30,Y+22
000725 89ff      	LDD  R31,Y+22+1
000726 1be4      	SUB  R30,R20
000727 0bf5      	SBC  R31,R21
000728 8bee      	STD  Y+22,R30
000729 8bff      	STD  Y+22+1,R31
00072a 89ac      	LDD  R26,Y+20
00072b 89bd      	LDD  R27,Y+20+1
00072c 91ed      	LD   R30,X+
00072d 91fd      	LD   R31,X+
00072e 0fe4      	ADD  R30,R20
00072f 1ff5      	ADC  R31,R21
000730 93fe      	ST   -X,R31
000731 93ee      	ST   -X,R30
                 ; 0002 0269 	}
000732 cf78      	RJMP _0x4009D
                 _0x4009F:
                 ; 0002 026A 
                 ; 0002 026B 	return FR_OK;
000733 e0e0      	LDI  R30,LOW(0)
000734 c003      	RJMP _0x2000002
                 ; 0002 026C 
                 ; 0002 026D fr_abort:
                 _0x400A6:
                 ; 0002 026E 	fs->flag = 0;
000735 d0f3      	RCALL SUBOPT_0x11
000736 d206      	RCALL SUBOPT_0x4A
                 ; 0002 026F 	return FR_DISK_ERR;
000737 e0e1      	LDI  R30,LOW(1)
                 _0x2000002:
000738 d358      	RCALL __LOADLOCR6
000739 966a      	ADIW R28,26
00073a 9508      	RET
                 ; 0002 0270 }
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Write File                                                            */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_WRITE
                 ;
                 ;FRESULT pf_write (
                 ;	const void* buff,	/* Pointer to the data to be written */
                 ;	WORD btw,			/* Number of bytes to write (0:Finalize the current write operation) */
                 ;	WORD* bw			/* Pointer to number of bytes written */
                 ;)
                 ;{
                 ;	CLUST clst;
                 ;	DWORD sect, remain;
                 ;	const BYTE *p = buff;
                 ;	WORD wcnt;
                 ;	FATFS *fs = FatFs;
                 ;
                 ;
                 ;	*bw = 0;
                 ;	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
                 ;	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 ;		return FR_NOT_OPENED;
                 ;
                 ;	if (!btw) {		/* Finalize request */
                 ;		if ((fs->flag & FA__WIP) && disk_writep(0, 0)) goto fw_abort;
                 ;		fs->flag &= ~FA__WIP;
                 ;		return FR_OK;
                 ;	} else {		/* Write data request */
                 ;		if (!(fs->flag & FA__WIP))		/* Round down fptr to the sector boundary */
                 ;			fs->fptr &= 0xFFFFFE00;
                 ;	}
                 ;	remain = fs->fsize - fs->fptr;
                 ;	if (btw > remain) btw = (WORD)remain;			/* Truncate btw by remaining bytes */
                 ;
                 ;	while (btw)	{									/* Repeat until all data transferred */
                 ;		if (((WORD)fs->fptr % 512) == 0) {				/* On the sector boundary? */
                 ;			if ((fs->fptr / 512 % fs->csize) == 0) {	/* On the cluster boundary? */
                 ;				clst = (fs->fptr == 0) ?			/* On the top of the file? */
                 ;					fs->org_clust : get_fat(fs->curr_clust);
                 ;				if (clst <= 1) goto fw_abort;
                 ;				fs->curr_clust = clst;				/* Update current cluster */
                 ;				fs->csect = 0;						/* Reset sector offset in the cluster */
                 ;			}
                 ;			sect = clust2sect(fs->curr_clust);		/* Get current sector */
                 ;			if (!sect) goto fw_abort;
                 ;			fs->dsect = sect + fs->csect++;
                 ;			if (disk_writep(0, fs->dsect)) goto fw_abort;	/* Initiate a sector write operation */
                 ;			fs->flag |= FA__WIP;
                 ;		}
                 ;		wcnt = 512 - ((WORD)fs->fptr % 512);		/* Number of bytes to write to the sector */
                 ;		if (wcnt > btw) wcnt = btw;
                 ;		if (disk_writep(p, wcnt)) goto fw_abort;	/* Send data to the sector */
                 ;		fs->fptr += wcnt; p += wcnt;				/* Update pointers and counters */
                 ;		btw -= wcnt; *bw += wcnt;
                 ;		if (((WORD)fs->fptr % 512) == 0) {
                 ;			if (disk_writep(0, 0)) goto fw_abort;	/* Finalize the currtent secter write operation */
                 ;			fs->flag &= ~FA__WIP;
                 ;		}
                 ;	}
                 ;
                 ;	return FR_OK;
                 ;
                 ;fw_abort:
                 ;	fs->flag = 0;
                 ;	return FR_DISK_ERR;
                 ;}
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Seek File R/W Pointer                                                 */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_LSEEK
                 ;
                 ;FRESULT pf_lseek (
                 ; 0002 02C1 	DWORD ofs		/* File pointer from top of file */
                 ; 0002 02C2 )
                 ; 0002 02C3 {
                 _pf_lseek:
                 ; 0002 02C4 	CLUST clst;
                 ; 0002 02C5 	DWORD bcs, sect, ifptr;
                 ; 0002 02C6 	FATFS *fs = FatFs;
                 ; 0002 02C7 
                 ; 0002 02C8 
                 ; 0002 02C9 	if (!fs) return FR_NOT_ENABLED;		/* Check file system */
00073b d328      	RCALL __PUTPARD2
00073c 9760      	SBIW R28,16
00073d d166      	RCALL SUBOPT_0x2B
                 ;	ofs -> Y+18
                 ;	clst -> Y+14
                 ;	bcs -> Y+10
                 ;	sect -> Y+6
                 ;	ifptr -> Y+2
                 ;	*fs -> R16,R17
00073e 2e00      	MOV  R0,R16
00073f 2a01      	OR   R0,R17
000740 f411      	BRNE _0x400AD
000741 e0e6      	LDI  R30,LOW(6)
000742 c093      	RJMP _0x2000001
                 ; 0002 02CA 	if (!(fs->flag & FA_OPENED))		/* Check if opened */
                 _0x400AD:
000743 01f8      	MOVW R30,R16
000744 81a2      	LDD  R26,Z+2
000745 70a1      	ANDI R26,LOW(0x1)
000746 f411      	BRNE _0x400AE
                 ; 0002 02CB 			return FR_NOT_OPENED;
000747 e0e5      	LDI  R30,LOW(5)
000748 c08d      	RJMP _0x2000001
                 ; 0002 02CC 
                 ; 0002 02CD 	if (ofs > fs->fsize) ofs = fs->fsize;	/* Clip offset with the file size */
                 _0x400AE:
000749 01d8      	MOVW R26,R16
00074a 965c      	ADIW R26,28
00074b d215      	RCALL SUBOPT_0x51
00074c d333      	RCALL __CPD12
00074d f420      	BRSH _0x400AF
00074e 01d8      	MOVW R26,R16
00074f 965c      	ADIW R26,28
000750 d2f9      	RCALL __GETD1P
000751 d215      	RCALL SUBOPT_0x52
                 ; 0002 02CE 	ifptr = fs->fptr;
                 _0x400AF:
000752 01d8      	MOVW R26,R16
000753 9658      	ADIW R26,24
000754 d2f5      	RCALL __GETD1P
000755 d154      	RCALL SUBOPT_0x2C
                 ; 0002 02CF 	fs->fptr = 0;
000756 01d8      	MOVW R26,R16
000757 9658      	ADIW R26,24
000758 d160      	RCALL SUBOPT_0x2F
000759 d2fb      	RCALL __PUTDP1
                 ; 0002 02D0 	if (ofs > 0) {
00075a d211      	RCALL SUBOPT_0x53
00075b d31e      	RCALL __CPD02
00075c f008      	BRLO PC+2
00075d c073      	RJMP _0x400B0
                 ; 0002 02D1 		bcs = (DWORD)fs->csize * 512;	/* Cluster size (byte) */
00075e 01f8      	MOVW R30,R16
00075f d15e      	RCALL SUBOPT_0x30
000760 d1c5      	RCALL SUBOPT_0x45
000761 d0ad      	RCALL SUBOPT_0xB
000762 d287      	RCALL __MULD12U
                +
000763 87ea     +STD Y + 10 , R30
000764 87fb     +STD Y + 10 + 1 , R31
000765 876c     +STD Y + 10 + 2 , R22
000766 877d     +STD Y + 10 + 3 , R23
                 	__PUTD1S 10
                 ; 0002 02D2 		if (ifptr > 0 &&
                 ; 0002 02D3 			(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
000767 d14c      	RCALL SUBOPT_0x2E
000768 d311      	RCALL __CPD02
000769 f470      	BRSH _0x400B2
00076a d206      	RCALL SUBOPT_0x54
00076b d20a      	RCALL SUBOPT_0x55
00076c 937f      	PUSH R23
00076d 936f      	PUSH R22
00076e 93ff      	PUSH R31
00076f 93ef      	PUSH R30
000770 d087      	RCALL SUBOPT_0x6
000771 d204      	RCALL SUBOPT_0x55
000772 91af      	POP  R26
000773 91bf      	POP  R27
000774 918f      	POP  R24
000775 919f      	POP  R25
000776 d30e      	RCALL __CPD21
000777 f408      	BRSH _0x400B3
                 _0x400B2:
000778 c017      	RJMP _0x400B1
                 _0x400B3:
                 ; 0002 02D4 			fs->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
000779 d07e      	RCALL SUBOPT_0x6
00077a d207      	RCALL SUBOPT_0x56
00077b 01df      	MOVW R26,R30
00077c 01cb      	MOVW R24,R22
00077d d209      	RCALL SUBOPT_0x57
00077e d203      	RCALL SUBOPT_0x56
00077f d265      	RCALL __COMD1
000780 d22d      	RCALL __ANDD12
                +
000781 01d8     +MOVW R26 , R16
000782 9658     +ADIW R26 , 24
000783 d2d1     +RCALL __PUTDP1
                 	__PUTD1RNS 16,24
                 ; 0002 02D5 			ofs -= fs->fptr;
000784 01d8      	MOVW R26,R16
000785 9658      	ADIW R26,24
000786 d1da      	RCALL SUBOPT_0x51
000787 d221      	RCALL __SUBD21
                +
000788 8baa     +STD Y + 18 , R26
000789 8bbb     +STD Y + 18 + 1 , R27
00078a 8b8c     +STD Y + 18 + 2 , R24
00078b 8b9d     +STD Y + 18 + 3 , R25
                 	__PUTD2S 18
                 ; 0002 02D6 			clst = fs->curr_clust;
00078c 01d8      	MOVW R26,R16
00078d 9694      	ADIW R26,36
00078e d1fd      	RCALL SUBOPT_0x58
                 ; 0002 02D7 		} else {							/* When seek to back cluster, */
00078f c004      	RJMP _0x400B4
                 _0x400B1:
                 ; 0002 02D8 			clst = fs->org_clust;			/* start from the first cluster */
000790 01d8      	MOVW R26,R16
000791 9690      	ADIW R26,32
000792 d1f9      	RCALL SUBOPT_0x58
                 ; 0002 02D9 			fs->curr_clust = clst;
000793 d1fe      	RCALL SUBOPT_0x59
                 ; 0002 02DA 		}
                 _0x400B4:
                 ; 0002 02DB 		while (ofs > bcs) {				/* Cluster following loop */
                 _0x400B5:
000794 d1f2      	RCALL SUBOPT_0x57
000795 d1d6      	RCALL SUBOPT_0x53
000796 d2e9      	RCALL __CPD12
000797 f4c8      	BRSH _0x400B7
                 ; 0002 02DC 			clst = get_fat(clst);		/* Follow cluster chain */
000798 d0fb      	RCALL SUBOPT_0x27
000799 db39      	RCALL _get_fat_G002
                +
00079a 87ee     +STD Y + 14 , R30
00079b 87ff     +STD Y + 14 + 1 , R31
00079c 8b68     +STD Y + 14 + 2 , R22
00079d 8b79     +STD Y + 14 + 3 , R23
                 	__PUTD1S 14
                 ; 0002 02DD 			if (clst <= 1 || clst >= fs->max_clust) goto fe_abort;
00079e d0f5      	RCALL SUBOPT_0x27
00079f d0c6      	RCALL SUBOPT_0x20
0007a0 f028      	BRLO _0x400B9
0007a1 01d8      	MOVW R26,R16
0007a2 d0cb      	RCALL SUBOPT_0x21
0007a3 d0f0      	RCALL SUBOPT_0x27
0007a4 d2e0      	RCALL __CPD21
0007a5 f008      	BRLO _0x400B8
                 _0x400B9:
0007a6 c02c      	RJMP _0x400BB
                 ; 0002 02DE 			fs->curr_clust = clst;
                 _0x400B8:
0007a7 d1ea      	RCALL SUBOPT_0x59
                 ; 0002 02DF 			fs->fptr += bcs;
0007a8 01f8      	MOVW R30,R16
0007a9 d1ae      	RCALL SUBOPT_0x4F
0007aa d1ef      	RCALL SUBOPT_0x5A
0007ab d1b1      	RCALL SUBOPT_0x50
                 ; 0002 02E0 			ofs -= bcs;
0007ac d1ed      	RCALL SUBOPT_0x5A
0007ad d1c3      	RCALL SUBOPT_0x54
0007ae d1f5      	RCALL __SUBD12
0007af d1b7      	RCALL SUBOPT_0x52
                 ; 0002 02E1 		}
0007b0 cfe3      	RJMP _0x400B5
                 _0x400B7:
                 ; 0002 02E2 		fs->fptr += ofs;
0007b1 01f8      	MOVW R30,R16
0007b2 d1a5      	RCALL SUBOPT_0x4F
0007b3 d1b8      	RCALL SUBOPT_0x53
0007b4 d1a8      	RCALL SUBOPT_0x50
                 ; 0002 02E3 		sect = clust2sect(clst);		/* Current sector */
0007b5 d0de      	RCALL SUBOPT_0x27
0007b6 dbb7      	RCALL _clust2sect_G002
                +
0007b7 83ee     +STD Y + 6 , R30
0007b8 83ff     +STD Y + 6 + 1 , R31
0007b9 8768     +STD Y + 6 + 2 , R22
0007ba 8779     +STD Y + 6 + 3 , R23
                 	__PUTD1S 6
                 ; 0002 02E4 		if (!sect) goto fe_abort;
0007bb d2ba      	RCALL __CPD10
0007bc f0b1      	BREQ _0x400BB
                 ; 0002 02E5 		fs->csect = (BYTE)(ofs / 512);	/* Sector offset in the cluster */
0007bd d1ae      	RCALL SUBOPT_0x53
0007be d186      	RCALL SUBOPT_0x4C
                +
0007bf 01d8     +MOVW R26 , R16
0007c0 9613     +ADIW R26 , 3
0007c1 93ec     +ST X , R30
                 	__PUTB1RNS 16,3
                 ; 0002 02E6 		if (ofs % 512)
0007c2 d1ae      	RCALL SUBOPT_0x54
0007c3 70f1      	ANDI R31,HIGH(0x1FF)
0007c4 9730      	SBIW R30,0
0007c5 f059      	BREQ _0x400BD
                 ; 0002 02E7 			fs->dsect = sect + fs->csect++;
0007c6 01d8      	MOVW R26,R16
0007c7 d189      	RCALL SUBOPT_0x4E
                +
0007c8 81ae     +LDD R26 , Y + 6
0007c9 81bf     +LDD R27 , Y + 6 + 1
0007ca 8588     +LDD R24 , Y + 6 + 2
0007cb 8599     +LDD R25 , Y + 6 + 3
                 	__GETD2S 6
0007cc d159      	RCALL SUBOPT_0x45
0007cd d1d1      	RCALL __ADDD12
                +
0007ce 01d8     +MOVW R26 , R16
0007cf 9698     +ADIW R26 , 40
0007d0 d284     +RCALL __PUTDP1
                 	__PUTD1RNS 16,40
                 ; 0002 02E8 	}
                 _0x400BD:
                 ; 0002 02E9 
                 ; 0002 02EA 	return FR_OK;
                 _0x400B0:
0007d1 e0e0      	LDI  R30,LOW(0)
0007d2 c003      	RJMP _0x2000001
                 ; 0002 02EB 
                 ; 0002 02EC fe_abort:
                 _0x400BB:
                 ; 0002 02ED 	fs->flag = 0;
0007d3 01d8      	MOVW R26,R16
0007d4 d168      	RCALL SUBOPT_0x4A
                 ; 0002 02EE 	return FR_DISK_ERR;
0007d5 e0e1      	LDI  R30,LOW(1)
                 _0x2000001:
0007d6 d2be      	RCALL __LOADLOCR2
0007d7 9666      	ADIW R28,22
0007d8 9508      	RET
                 ; 0002 02EF }
                 ;#endif
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Create a Directroy Object                                             */
                 ;/*-----------------------------------------------------------------------*/
                 ;#if _USE_DIR
                 ;
                 ;FRESULT pf_opendir (
                 ; 0002 02FA 	DIR *dj,			/* Pointer to directory object to create */
                 ; 0002 02FB 	const char *path	/* Pointer to the directory path */
                 ; 0002 02FC )
                 ; 0002 02FD {
                 ; 0002 02FE 	FRESULT res;
                 ; 0002 02FF 	BYTE sp[12], dir[32];
                 ; 0002 0300 	FATFS *fs = FatFs;
                 ; 0002 0301 
                 ; 0002 0302 
                 ; 0002 0303 	if (!fs) {				/* Check file system */
                 ;	*dj -> Y+50
                 ;	*path -> Y+48
                 ;	res -> R17
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
                 ; 0002 0304 		res = FR_NOT_ENABLED;
                 ; 0002 0305 	} else {
                 ; 0002 0306 		fs->buf = dir;
                 ; 0002 0307 		dj->fn = sp;
                 ; 0002 0308 		res = follow_path(dj, path);			/* Follow the path to the directory */
                 ; 0002 0309 		if (res == FR_OK) {						/* Follow completed */
                 ; 0002 030A 			if (dir[0]) {						/* It is not the root dir */
                 ; 0002 030B 				if (dir[DIR_Attr] & AM_DIR) {	/* The object is a directory */
                 ; 0002 030C 					dj->sclust =
                 ; 0002 030D #if _FS_FAT32
                 ; 0002 030E 					((DWORD)LD_WORD(dir+DIR_FstClusHI) << 16) |
                 ; 0002 030F #endif
                 ; 0002 0310 					LD_WORD(dir+DIR_FstClusLO);
                 ; 0002 0311 				} else {						/* The object is not a directory */
                 ; 0002 0312 					res = FR_NO_PATH;
                 ; 0002 0313 				}
                 ; 0002 0314 			}
                 ; 0002 0315 			if (res == FR_OK)
                 ; 0002 0316 				res = dir_rewind(dj);			/* Rewind dir */
                 ; 0002 0317 		}
                 ; 0002 0318 		if (res == FR_NO_FILE) res = FR_NO_PATH;
                 ; 0002 0319 	}
                 ; 0002 031A 
                 ; 0002 031B 	return res;
                 ; 0002 031C }
                 ;
                 ;
                 ;
                 ;
                 ;/*-----------------------------------------------------------------------*/
                 ;/* Read Directory Entry in Sequense                                      */
                 ;/*-----------------------------------------------------------------------*/
                 ;
                 ;FRESULT pf_readdir (
                 ; 0002 0326 	DIR *dj,			/* Pointer to the open directory object */
                 ; 0002 0327 	FILINFO *fno		/* Pointer to file information to return */
                 ; 0002 0328 )
                 ; 0002 0329 {
                 ; 0002 032A 	FRESULT res;
                 ; 0002 032B 	BYTE sp[12], dir[32];
                 ; 0002 032C 	FATFS *fs = FatFs;
                 ; 0002 032D 
                 ; 0002 032E 
                 ; 0002 032F 	if (!fs) {				/* Check file system */
                 ;	*dj -> Y+50
                 ;	*fno -> Y+48
                 ;	res -> R17
                 ;	sp -> Y+36
                 ;	dir -> Y+4
                 ;	*fs -> R18,R19
                 ; 0002 0330 		res = FR_NOT_ENABLED;
                 ; 0002 0331 	} else {
                 ; 0002 0332 		fs->buf = dir;
                 ; 0002 0333 		dj->fn = sp;
                 ; 0002 0334 		if (!fno) {
                 ; 0002 0335 			res = dir_rewind(dj);
                 ; 0002 0336 		} else {
                 ; 0002 0337 			res = dir_read(dj);
                 ; 0002 0338 			if (res == FR_NO_FILE) {
                 ; 0002 0339 				dj->sect = 0;
                 ; 0002 033A 				res = FR_OK;
                 ; 0002 033B 			}
                 ; 0002 033C 			if (res == FR_OK) {				/* A valid entry is found */
                 ; 0002 033D 				get_fileinfo(dj, fno);		/* Get the object information */
                 ; 0002 033E 				res = dir_next(dj);			/* Increment index for next */
                 ; 0002 033F 				if (res == FR_NO_FILE) {
                 ; 0002 0340 					dj->sect = 0;
                 ; 0002 0341 					res = FR_OK;
                 ; 0002 0342 				}
                 ; 0002 0343 			}
                 ; 0002 0344 		}
                 ; 0002 0345 	}
                 ; 0002 0346 
                 ; 0002 0347 	return res;
                 ; 0002 0348 }
                 ;
                 ;#endif /* _USE_DIR */
                 ;
                 
                 	.DSEG
                 _buffer:
000166           	.BYTE 0x200
                 _count:
000366           	.BYTE 0x2
                 _CardType_G001:
000368           	.BYTE 0x1
                 _wc_S0010007000:
000369           	.BYTE 0x2
                 _FatFs_G002:
00036b           	.BYTE 0x2
                 _cvt_G002:
00036d           	.BYTE 0x80
                 
                 	.CSEG
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x0:
0007d9 e0e0      	LDI  R30,LOW(0)
0007da e0f0      	LDI  R31,HIGH(0)
0007db 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x1:
0007dc e6e6      	LDI  R30,LOW(_buffer)
0007dd e0f1      	LDI  R31,HIGH(_buffer)
0007de 93fa      	ST   -Y,R31
0007df 93ea      	ST   -Y,R30
0007e0 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 33 TIMES, CODE SIZE REDUCTION:30 WORDS
                 SUBOPT_0x2:
0007e1 93fa      	ST   -Y,R31
0007e2 93ea      	ST   -Y,R30
0007e3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x3:
0007e4 91a0 0366 	LDS  R26,_count
0007e6 91b0 0367 	LDS  R27,_count+1
0007e8 30a0      	CPI  R26,LOW(0x100)
0007e9 e0e1      	LDI  R30,HIGH(0x100)
0007ea 07be      	CPC  R27,R30
0007eb 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x4:
0007ec 93ea      	ST   -Y,R30
                +
0007ed e0a0     +LDI R26 , LOW ( 0x0 )
0007ee e0b0     +LDI R27 , HIGH ( 0x0 )
0007ef e080     +LDI R24 , BYTE3 ( 0x0 )
0007f0 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
0007f1 c947      	RJMP _send_cmd_G001
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x5:
0007f2 d934      	RCALL _xmit_spi
                +
0007f3 81aa     +LDD R26 , Y + 2
0007f4 81bb     +LDD R27 , Y + 2 + 1
0007f5 818c     +LDD R24 , Y + 2 + 2
0007f6 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
0007f7 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 10 TIMES, CODE SIZE REDUCTION:25 WORDS
                 SUBOPT_0x6:
                +
0007f8 81ea     +LDD R30 , Y + 2
0007f9 81fb     +LDD R31 , Y + 2 + 1
0007fa 816c     +LDD R22 , Y + 2 + 2
0007fb 817d     +LDD R23 , Y + 2 + 3
                 	__GETD1S 2
0007fc 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x7:
                +
0007fd e0a0     +LDI R26 , LOW ( 0x0 )
0007fe e0b0     +LDI R27 , HIGH ( 0x0 )
0007ff e080     +LDI R24 , BYTE3 ( 0x0 )
000800 e090     +LDI R25 , BYTE4 ( 0x0 )
                 	__GETD2N 0x0
000801 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x8:
000802 2fe1      	MOV  R30,R17
000803 e0f0      	LDI  R31,0
000804 01de      	MOVW R26,R28
000805 9616      	ADIW R26,6
000806 0fea      	ADD  R30,R26
000807 1ffb      	ADC  R31,R27
000808 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x9:
000809 2e04      	MOV  R0,R20
00080a 2a05      	OR   R0,R21
00080b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0xA:
00080c d92c      	RCALL _send_cmd_G001
00080d 30e0      	CPI  R30,0
00080e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0xB:
                +
00080f e0a0     +LDI R26 , LOW ( 0x200 )
000810 e0b2     +LDI R27 , HIGH ( 0x200 )
000811 e080     +LDI R24 , BYTE3 ( 0x200 )
000812 e090     +LDI R25 , BYTE4 ( 0x200 )
                 	__GETD2N 0x200
000813 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 12 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0xC:
000814 93ba      	ST   -Y,R27
000815 93aa      	ST   -Y,R26
000816 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0xD:
                +
000817 85e8     +LDD R30 , Y + 8
000818 85f9     +LDD R31 , Y + 8 + 1
000819 856a     +LDD R22 , Y + 8 + 2
00081a 857b     +LDD R23 , Y + 8 + 3
                 	__GETD1S 8
00081b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0xE:
                +
00081c 87e8     +STD Y + 8 , R30
00081d 87f9     +STD Y + 8 + 1 , R31
00081e 876a     +STD Y + 8 + 2 , R22
00081f 877b     +STD Y + 8 + 3 , R23
                 	__PUTD1S 8
000820 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0xF:
                +
000821 85a9     +LDD R26 , Y + 9
000822 85ba     +LDD R27 , Y + 9 + 1
000823 858b     +LDD R24 , Y + 9 + 2
000824 859c     +LDD R25 , Y + 9 + 3
                 	__GETD2S 9
000825 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x10:
                +
000826 5021     +SUBI R18 , LOW ( 1 )
000827 4030     +SBCI R19 , HIGH ( 1 )
                 	__SUBWRN 18,19,1
000828 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 17 TIMES, CODE SIZE REDUCTION:14 WORDS
                 SUBOPT_0x11:
000829 81ae      	LDD  R26,Y+6
00082a 81bf      	LDD  R27,Y+6+1
00082b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x12:
00082c 81ec      	LDD  R30,Y+4
00082d 81fd      	LDD  R31,Y+4+1
00082e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 18 TIMES, CODE SIZE REDUCTION:15 WORDS
                 SUBOPT_0x13:
00082f 81ee      	LDD  R30,Y+6
000830 81ff      	LDD  R31,Y+6+1
000831 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x14:
000832 dffc      	RCALL SUBOPT_0x13
000833 9731      	SBIW R30,1
000834 83ee      	STD  Y+6,R30
000835 83ff      	STD  Y+6+1,R31
000836 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x15:
000837 dff4      	RCALL SUBOPT_0x12
000838 9731      	SBIW R30,1
000839 83ec      	STD  Y+4,R30
00083a 83fd      	STD  Y+4+1,R31
00083b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x16:
00083c 2fe1      	MOV  R30,R17
00083d d255      	RCALL __LOADLOCR4
00083e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 11 TIMES, CODE SIZE REDUCTION:8 WORDS
                 SUBOPT_0x17:
00083f 85e8      	LDD  R30,Y+8
000840 85f9      	LDD  R31,Y+8+1
000841 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x18:
000842 2e02      	MOV  R0,R18
000843 2a03      	OR   R0,R19
000844 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x19:
000845 91e0 0369 	LDS  R30,_wc_S0010007000
000847 91f0 036a 	LDS  R31,_wc_S0010007000+1
000849 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 9 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x1A:
00084a 85a8      	LDD  R26,Y+8
00084b 85b9      	LDD  R27,Y+8+1
00084c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x1B:
                +
00084d 81ec     +LDD R30 , Y + 4
00084e 81fd     +LDD R31 , Y + 4 + 1
00084f 816e     +LDD R22 , Y + 4 + 2
000850 817f     +LDD R23 , Y + 4 + 3
                 	__GETD1S 4
000851 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x1C:
                +
000852 83ec     +STD Y + 4 , R30
000853 83fd     +STD Y + 4 + 1 , R31
000854 836e     +STD Y + 4 + 2 , R22
000855 837f     +STD Y + 4 + 3 , R23
                 	__PUTD1S 4
000856 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x1D:
                +
000857 81ad     +LDD R26 , Y + 5
000858 81be     +LDD R27 , Y + 5 + 1
000859 818f     +LDD R24 , Y + 5 + 2
00085a 8598     +LDD R25 , Y + 5 + 3
                 	__GETD2S 5
00085b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x1E:
00085c 91e0 036b 	LDS  R30,_FatFs_G002
00085e 91f0 036c 	LDS  R31,_FatFs_G002+1
000860 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x1F:
                +
000861 85ac     +LDD R26 , Y + 12
000862 85bd     +LDD R27 , Y + 12 + 1
000863 858e     +LDD R24 , Y + 12 + 2
000864 859f     +LDD R25 , Y + 12 + 3
                 	__GETD2S 12
000865 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:16 WORDS
                 SUBOPT_0x20:
                +
000866 30a2     +CPI R26 , LOW ( 0x2 )
000867 e0e0     +LDI R30 , HIGH ( 0x2 )
000868 07be     +CPC R27 , R30
000869 e0e0     +LDI R30 , BYTE3 ( 0x2 )
00086a 078e     +CPC R24 , R30
00086b e0e0     +LDI R30 , BYTE4 ( 0x2 )
00086c 079e     +CPC R25 , R30
                 	__CPD2N 0x2
00086d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x21:
00086e 9618      	ADIW R26,8
00086f d1da      	RCALL __GETD1P
000870 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:10 WORDS
                 SUBOPT_0x22:
000871 01fe      	MOVW R30,R28
000872 9638      	ADIW R30,8
000873 df6d      	RCALL SUBOPT_0x2
000874 dfca      	RCALL SUBOPT_0x17
                +
000875 85a4     +LDD R26 , Z + 12
000876 85b5     +LDD R27 , Z + 12 + 1
000877 8586     +LDD R24 , Z + 12 + 2
000878 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
000879 01f9      	MOVW R30,R18
00087a 2766      	CLR  R22
00087b 2777      	CLR  R23
00087c d122      	RCALL __ADDD12
00087d d1e1      	RCALL __PUTPARD1
00087e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:10 WORDS
                 SUBOPT_0x23:
00087f e0a2      	LDI  R26,LOW(2)
000880 e0b0      	LDI  R27,0
000881 d977      	RCALL _disk_readp
000882 30e0      	CPI  R30,0
000883 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x24:
000884 df5c      	RCALL SUBOPT_0x2
000885 e0a1      	LDI  R26,LOW(1)
000886 e0b0      	LDI  R27,0
000887 d971      	RCALL _disk_readp
000888 30e0      	CPI  R30,0
000889 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:8 WORDS
                 SUBOPT_0x25:
00088a df56      	RCALL SUBOPT_0x2
00088b dfb3      	RCALL SUBOPT_0x17
                +
00088c 85a4     +LDD R26 , Z + 12
00088d 85b5     +LDD R27 , Z + 12 + 1
00088e 8586     +LDD R24 , Z + 12 + 2
00088f 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
000890 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 13 TIMES, CODE SIZE REDUCTION:10 WORDS
                 SUBOPT_0x26:
000891 2766      	CLR  R22
000892 2777      	CLR  R23
000893 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x27:
                +
000894 85ae     +LDD R26 , Y + 14
000895 85bf     +LDD R27 , Y + 14 + 1
000896 8988     +LDD R24 , Y + 14 + 2
000897 8999     +LDD R25 , Y + 14 + 3
                 	__GETD2S 14
000898 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x28:
000899 d105      	RCALL __ADDD12
00089a d1c4      	RCALL __PUTPARD1
00089b 89ea      	LDD  R30,Y+18
00089c 89fb      	LDD  R31,Y+18+1
00089d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x29:
00089e df42      	RCALL SUBOPT_0x2
00089f cfdf      	RJMP SUBOPT_0x23
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x2A:
0008a0 e0b0      	LDI  R27,0
0008a1 d957      	RCALL _disk_readp
0008a2 30e0      	CPI  R30,0
0008a3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x2B:
0008a4 d1e9      	RCALL __SAVELOCR2
                +
0008a5 9100 036b+LDS R16 , 0 + ( _FatFs_G002 )
0008a7 9110 036c+LDS R17 , 0 + ( _FatFs_G002 ) + 1
                 	__GETWRMN 16,17,0,_FatFs_G002
0008a9 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x2C:
                +
0008aa 83ea     +STD Y + 2 , R30
0008ab 83fb     +STD Y + 2 + 1 , R31
0008ac 836c     +STD Y + 2 + 2 , R22
0008ad 837d     +STD Y + 2 + 3 , R23
                 	__PUTD1S 2
0008ae 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x2D:
                +
0008af 85a0     +LDD R26 , Z + 8
0008b0 85b1     +LDD R27 , Z + 8 + 1
0008b1 8582     +LDD R24 , Z + 8 + 2
0008b2 8593     +LDD R25 , Z + 8 + 3
                 	__GETD2Z 8
0008b3 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x2E:
                +
0008b4 81aa     +LDD R26 , Y + 2
0008b5 81bb     +LDD R27 , Y + 2 + 1
0008b6 818c     +LDD R24 , Y + 2 + 2
0008b7 819d     +LDD R25 , Y + 2 + 3
                 	__GETD2S 2
0008b8 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x2F:
                +
0008b9 e0e0     +LDI R30 , LOW ( 0x0 )
0008ba e0f0     +LDI R31 , HIGH ( 0x0 )
0008bb e060     +LDI R22 , BYTE3 ( 0x0 )
0008bc e070     +LDI R23 , BYTE4 ( 0x0 )
                 	__GETD1N 0x0
0008bd 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x30:
0008be 81e1      	LDD  R30,Z+1
0008bf e0f0      	LDI  R31,0
0008c0 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x31:
0008c1 d1ca      	RCALL __SAVELOCR4
                +
0008c2 9120 036b+LDS R18 , 0 + ( _FatFs_G002 )
0008c4 9130 036c+LDS R19 , 0 + ( _FatFs_G002 ) + 1
                 	__GETWRMN 18,19,0,_FatFs_G002
0008c6 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x32:
                +
0008c7 81ac     +LDD R26 , Y + 4
0008c8 81bd     +LDD R27 , Y + 4 + 1
0008c9 818e     +LDD R24 , Y + 4 + 2
0008ca 819f     +LDD R25 , Y + 4 + 3
                 	__GETD2S 4
0008cb 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x33:
0008cc 81ac      	LDD  R26,Y+4
0008cd 81bd      	LDD  R27,Y+4+1
0008ce 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x34:
0008cf 2f1e      	MOV  R17,R30
0008d0 3010      	CPI  R17,0
0008d1 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x35:
0008d2 91a0 036b 	LDS  R26,_FatFs_G002
0008d4 91b0 036c 	LDS  R27,_FatFs_G002+1
0008d6 9616      	ADIW R26,6
0008d7 912d      	LD   R18,X+
0008d8 913c      	LD   R19,X
0008d9 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x36:
                +
0008da 85a4     +LDD R26 , Z + 12
0008db 85b5     +LDD R27 , Z + 12 + 1
0008dc 8586     +LDD R24 , Z + 12 + 2
0008dd 8597     +LDD R25 , Z + 12 + 3
                 	__GETD2Z 12
0008de 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x37:
0008df 2fe2      	MOV  R30,R18
0008e0 5f2f      	SUBI R18,-1
0008e1 df47      	RCALL SUBOPT_0x11
0008e2 e0f0      	LDI  R31,0
0008e3 0fae      	ADD  R26,R30
0008e4 1fbf      	ADC  R27,R31
0008e5 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:8 WORDS
                 SUBOPT_0x38:
0008e6 2fe5      	MOV  R30,R21
0008e7 5f5f      	SUBI R21,-1
0008e8 df61      	RCALL SUBOPT_0x1A
0008e9 e0f0      	LDI  R31,0
0008ea 0fea      	ADD  R30,R26
0008eb 1ffb      	ADC  R31,R27
0008ec 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x39:
0008ed df3e      	RCALL SUBOPT_0x12
0008ee 9631      	ADIW R30,1
0008ef 83ec      	STD  Y+4,R30
0008f0 83fd      	STD  Y+4+1,R31
0008f1 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x3A:
0008f2 e0e0      	LDI  R30,LOW(0)
0008f3 93ec      	ST   X,R30
0008f4 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x3B:
0008f5 df33      	RCALL SUBOPT_0x11
0008f6 9612      	ADIW R26,2
0008f7 d14e      	RCALL __GETW1P
0008f8 85e3      	LDD  R30,Z+11
0008f9 30e0      	CPI  R30,0
0008fa 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x3C:
0008fb df30      	RCALL SUBOPT_0x12
0008fc dee4      	RCALL SUBOPT_0x2
0008fd defa      	RCALL SUBOPT_0x6
0008fe d160      	RCALL __PUTPARD1
0008ff 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x3D:
000900 dfcb      	RCALL SUBOPT_0x33
000901 d144      	RCALL __GETW1P
000902 34e6      	CPI  R30,LOW(0x4146)
000903 e4a1      	LDI  R26,HIGH(0x4146)
000904 07fa      	CPC  R31,R26
000905 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x3E:
000906 a9ed      	LDD  R30,Y+53
000907 a9fe      	LDD  R31,Y+53+1
000908 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x3F:
000909 01fe      	MOVW R30,R28
00090a 9671      	ADIW R30,17
00090b ced5      	RJMP SUBOPT_0x2
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x40:
                +
00090c 85af     +LDD R26 , Y + 15
00090d 89b8     +LDD R27 , Y + 15 + 1
00090e 8989     +LDD R24 , Y + 15 + 2
00090f 899a     +LDD R25 , Y + 15 + 3
                 	__GETD2S 15
000910 dc0e      	RCALL _check_fs_G002
000911 2f1e      	MOV  R17,R30
000912 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x41:
                +
000913 85ef     +LDD R30 , Y + 15
000914 89f8     +LDD R31 , Y + 15 + 1
000915 8969     +LDD R22 , Y + 15 + 2
000916 897a     +LDD R23 , Y + 15 + 3
                 	__GETD1S 15
000917 d147      	RCALL __PUTPARD1
000918 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x42:
000919 973d      	SBIW R30,13
00091a 01df      	MOVW R26,R30
00091b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x43:
                +
00091c 87e9     +STD Y + 9 , R30
00091d 87fa     +STD Y + 9 + 1 , R31
00091e 876b     +STD Y + 9 + 2 , R22
00091f 877c     +STD Y + 9 + 3 , R23
                 	__PUTD1S 9
000920 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x44:
                +
000921 85e9     +LDD R30 , Y + 9
000922 85fa     +LDD R31 , Y + 9 + 1
000923 856b     +LDD R22 , Y + 9 + 2
000924 857c     +LDD R23 , Y + 9 + 3
                 	__GETD1S 9
000925 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x45:
000926 d0b9      	RCALL __CWD1
000927 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x46:
                +
000928 83ed     +STD Y + 5 , R30
000929 83fe     +STD Y + 5 + 1 , R31
00092a 836f     +STD Y + 5 + 2 , R22
00092b 8778     +STD Y + 5 + 3 , R23
                 	__PUTD1S 5
00092c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x47:
00092d dfd8      	RCALL SUBOPT_0x3E
00092e 81a4      	LDD  R26,Z+4
00092f 81b5      	LDD  R27,Z+5
000930 01fd      	MOVW R30,R26
000931 d09b      	RCALL __LSRW4
000932 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x48:
                +
000933 81a9     +LDD R26 , Y + 1
000934 81ba     +LDD R27 , Y + 1 + 1
000935 818b     +LDD R24 , Y + 1 + 2
000936 819c     +LDD R25 , Y + 1 + 3
                 	__GETD2S 1
000937 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x49:
000938 dfcd      	RCALL SUBOPT_0x3E
000939 dfa0      	RCALL SUBOPT_0x36
00093a dfe6      	RCALL SUBOPT_0x44
00093b d063      	RCALL __ADDD12
00093c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x4A:
00093d 9612      	ADIW R26,2
00093e cfb3      	RJMP SUBOPT_0x3A
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:10 WORDS
                 SUBOPT_0x4B:
00093f deef      	RCALL SUBOPT_0x13
                +
000940 8da0     +LDD R26 , Z + 24
000941 8db1     +LDD R27 , Z + 24 + 1
000942 8d82     +LDD R24 , Z + 24 + 2
000943 8d93     +LDD R25 , Z + 24 + 3
                 	__GETD2Z 24
000944 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x4C:
                +
000945 e0e0     +LDI R30 , LOW ( 0x200 )
000946 e0f2     +LDI R31 , HIGH ( 0x200 )
000947 e060     +LDI R22 , BYTE3 ( 0x200 )
000948 e070     +LDI R23 , BYTE4 ( 0x200 )
                 	__GETD1N 0x200
000949 d0d3      	RCALL __DIVD21U
00094a 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x4D:
00094b dee3      	RCALL SUBOPT_0x13
                +
00094c a1a4     +LDD R26 , Z + 36
00094d a1b5     +LDD R27 , Z + 36 + 1
00094e a186     +LDD R24 , Z + 36 + 2
00094f a197     +LDD R25 , Z + 36 + 3
                 	__GETD2Z 36
000950 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x4E:
000951 9613      	ADIW R26,3
000952 91ec      	LD   R30,X
000953 5fef      	SUBI R30,-LOW(1)
000954 93ec      	ST   X,R30
000955 50e1      	SUBI R30,LOW(1)
000956 e0f0      	LDI  R31,0
000957 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x4F:
000958 9678      	ADIW R30,24
000959 010f      	MOVW R0,R30
00095a 01df      	MOVW R26,R30
00095b d0ee      	RCALL __GETD1P
00095c 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x50:
00095d d041      	RCALL __ADDD12
00095e 01d0      	MOVW R26,R0
00095f d0f5      	RCALL __PUTDP1
000960 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x51:
000961 d0e8      	RCALL __GETD1P
                +
000962 89aa     +LDD R26 , Y + 18
000963 89bb     +LDD R27 , Y + 18 + 1
000964 898c     +LDD R24 , Y + 18 + 2
000965 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
000966 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x52:
                +
000967 8bea     +STD Y + 18 , R30
000968 8bfb     +STD Y + 18 + 1 , R31
000969 8b6c     +STD Y + 18 + 2 , R22
00096a 8b7d     +STD Y + 18 + 3 , R23
                 	__PUTD1S 18
00096b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:7 WORDS
                 SUBOPT_0x53:
                +
00096c 89aa     +LDD R26 , Y + 18
00096d 89bb     +LDD R27 , Y + 18 + 1
00096e 898c     +LDD R24 , Y + 18 + 2
00096f 899d     +LDD R25 , Y + 18 + 3
                 	__GETD2S 18
000970 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x54:
                +
000971 89ea     +LDD R30 , Y + 18
000972 89fb     +LDD R31 , Y + 18 + 1
000973 896c     +LDD R22 , Y + 18 + 2
000974 897d     +LDD R23 , Y + 18 + 3
                 	__GETD1S 18
000975 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:8 WORDS
                 SUBOPT_0x55:
                +
000976 50e1     +SUBI R30 , LOW ( 1 )
000977 40f0     +SBCI R31 , HIGH ( 1 )
000978 4060     +SBCI R22 , BYTE3 ( 1 )
000979 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
00097a 01df      	MOVW R26,R30
00097b 01cb      	MOVW R24,R22
                +
00097c 85ea     +LDD R30 , Y + 10
00097d 85fb     +LDD R31 , Y + 10 + 1
00097e 856c     +LDD R22 , Y + 10 + 2
00097f 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
000980 d09c      	RCALL __DIVD21U
000981 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x56:
                +
000982 50e1     +SUBI R30 , LOW ( 1 )
000983 40f0     +SBCI R31 , HIGH ( 1 )
000984 4060     +SBCI R22 , BYTE3 ( 1 )
000985 4070     +SBCI R23 , BYTE4 ( 1 )
                 	__SUBD1N 1
000986 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x57:
                +
000987 85ea     +LDD R30 , Y + 10
000988 85fb     +LDD R31 , Y + 10 + 1
000989 856c     +LDD R22 , Y + 10 + 2
00098a 857d     +LDD R23 , Y + 10 + 3
                 	__GETD1S 10
00098b 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x58:
00098c d0bd      	RCALL __GETD1P
                +
00098d 87ee     +STD Y + 14 , R30
00098e 87ff     +STD Y + 14 + 1 , R31
00098f 8b68     +STD Y + 14 + 2 , R22
000990 8b79     +STD Y + 14 + 3 , R23
                 	__PUTD1S 14
000991 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0x59:
                +
000992 85ee     +LDD R30 , Y + 14
000993 85ff     +LDD R31 , Y + 14 + 1
000994 8968     +LDD R22 , Y + 14 + 2
000995 8979     +LDD R23 , Y + 14 + 3
                 	__GETD1S 14
                +
000996 01d8     +MOVW R26 , R16
000997 9694     +ADIW R26 , 36
000998 d0bc     +RCALL __PUTDP1
                 	__PUTD1RNS 16,36
000999 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x5A:
                +
00099a 85aa     +LDD R26 , Y + 10
00099b 85bb     +LDD R27 , Y + 10 + 1
00099c 858c     +LDD R24 , Y + 10 + 2
00099d 859d     +LDD R25 , Y + 10 + 3
                 	__GETD2S 10
00099e 9508      	RET
                 
                 
                 	.CSEG
                 __ADDD12:
00099f 0fea      	ADD  R30,R26
0009a0 1ffb      	ADC  R31,R27
0009a1 1f68      	ADC  R22,R24
0009a2 1f79      	ADC  R23,R25
0009a3 9508      	RET
                 
                 __SUBD12:
0009a4 1bea      	SUB  R30,R26
0009a5 0bfb      	SBC  R31,R27
0009a6 0b68      	SBC  R22,R24
0009a7 0b79      	SBC  R23,R25
0009a8 9508      	RET
                 
                 __SUBD21:
0009a9 1bae      	SUB  R26,R30
0009aa 0bbf      	SBC  R27,R31
0009ab 0b86      	SBC  R24,R22
0009ac 0b97      	SBC  R25,R23
0009ad 9508      	RET
                 
                 __ANDD12:
0009ae 23ea      	AND  R30,R26
0009af 23fb      	AND  R31,R27
0009b0 2368      	AND  R22,R24
0009b1 2379      	AND  R23,R25
0009b2 9508      	RET
                 
                 __ORD12:
0009b3 2bea      	OR   R30,R26
0009b4 2bfb      	OR   R31,R27
0009b5 2b68      	OR   R22,R24
0009b6 2b79      	OR   R23,R25
0009b7 9508      	RET
                 
                 __LSRD12:
0009b8 23ee      	TST  R30
0009b9 2e0e      	MOV  R0,R30
0009ba 01fd      	MOVW R30,R26
0009bb 01bc      	MOVW R22,R24
0009bc f031      	BREQ __LSRD12R
                 __LSRD12L:
0009bd 9576      	LSR  R23
0009be 9567      	ROR  R22
0009bf 95f7      	ROR  R31
0009c0 95e7      	ROR  R30
0009c1 940a      	DEC  R0
0009c2 f7d1      	BRNE __LSRD12L
                 __LSRD12R:
0009c3 9508      	RET
                 
                 __LSLW4:
0009c4 0fee      	LSL  R30
0009c5 1fff      	ROL  R31
                 __LSLW3:
0009c6 0fee      	LSL  R30
0009c7 1fff      	ROL  R31
                 __LSLW2:
0009c8 0fee      	LSL  R30
0009c9 1fff      	ROL  R31
0009ca 0fee      	LSL  R30
0009cb 1fff      	ROL  R31
0009cc 9508      	RET
                 
                 __LSRW4:
0009cd 95f6      	LSR  R31
0009ce 95e7      	ROR  R30
                 __LSRW3:
0009cf 95f6      	LSR  R31
0009d0 95e7      	ROR  R30
                 __LSRW2:
0009d1 95f6      	LSR  R31
0009d2 95e7      	ROR  R30
0009d3 95f6      	LSR  R31
0009d4 95e7      	ROR  R30
0009d5 9508      	RET
                 
                 __LSRD16:
0009d6 2fe6      	MOV  R30,R22
0009d7 2ff7      	MOV  R31,R23
0009d8 e060      	LDI  R22,0
0009d9 e070      	LDI  R23,0
0009da 9508      	RET
                 
                 __LSLD16:
0009db 2f6e      	MOV  R22,R30
0009dc 2f7f      	MOV  R23,R31
0009dd e0e0      	LDI  R30,0
0009de e0f0      	LDI  R31,0
0009df 9508      	RET
                 
                 __CWD1:
0009e0 2f6f      	MOV  R22,R31
0009e1 0f66      	ADD  R22,R22
0009e2 0b66      	SBC  R22,R22
0009e3 2f76      	MOV  R23,R22
0009e4 9508      	RET
                 
                 __COMD1:
0009e5 95e0      	COM  R30
0009e6 95f0      	COM  R31
0009e7 9560      	COM  R22
0009e8 9570      	COM  R23
0009e9 9508      	RET
                 
                 __MULD12U:
0009ea 9f7a      	MUL  R23,R26
0009eb 2d70      	MOV  R23,R0
0009ec 9f6b      	MUL  R22,R27
0009ed 0d70      	ADD  R23,R0
0009ee 9ff8      	MUL  R31,R24
0009ef 0d70      	ADD  R23,R0
0009f0 9fe9      	MUL  R30,R25
0009f1 0d70      	ADD  R23,R0
0009f2 9f6a      	MUL  R22,R26
0009f3 2d60      	MOV  R22,R0
0009f4 0d71      	ADD  R23,R1
0009f5 9ffb      	MUL  R31,R27
0009f6 0d60      	ADD  R22,R0
0009f7 1d71      	ADC  R23,R1
0009f8 9fe8      	MUL  R30,R24
0009f9 0d60      	ADD  R22,R0
0009fa 1d71      	ADC  R23,R1
0009fb 2788      	CLR  R24
0009fc 9ffa      	MUL  R31,R26
0009fd 2df0      	MOV  R31,R0
0009fe 0d61      	ADD  R22,R1
0009ff 1f78      	ADC  R23,R24
000a00 9feb      	MUL  R30,R27
000a01 0df0      	ADD  R31,R0
000a02 1d61      	ADC  R22,R1
000a03 1f78      	ADC  R23,R24
000a04 9fea      	MUL  R30,R26
000a05 2de0      	MOV  R30,R0
000a06 0df1      	ADD  R31,R1
000a07 1f68      	ADC  R22,R24
000a08 1f78      	ADC  R23,R24
000a09 9508      	RET
                 
                 __DIVW21U:
000a0a 2400      	CLR  R0
000a0b 2411      	CLR  R1
000a0c e190      	LDI  R25,16
                 __DIVW21U1:
000a0d 0faa      	LSL  R26
000a0e 1fbb      	ROL  R27
000a0f 1c00      	ROL  R0
000a10 1c11      	ROL  R1
000a11 1a0e      	SUB  R0,R30
000a12 0a1f      	SBC  R1,R31
000a13 f418      	BRCC __DIVW21U2
000a14 0e0e      	ADD  R0,R30
000a15 1e1f      	ADC  R1,R31
000a16 c001      	RJMP __DIVW21U3
                 __DIVW21U2:
000a17 60a1      	SBR  R26,1
                 __DIVW21U3:
000a18 959a      	DEC  R25
000a19 f799      	BRNE __DIVW21U1
000a1a 01fd      	MOVW R30,R26
000a1b 01d0      	MOVW R26,R0
000a1c 9508      	RET
                 
                 __DIVD21U:
000a1d 933f      	PUSH R19
000a1e 934f      	PUSH R20
000a1f 935f      	PUSH R21
000a20 2400      	CLR  R0
000a21 2411      	CLR  R1
000a22 2744      	CLR  R20
000a23 2755      	CLR  R21
000a24 e230      	LDI  R19,32
                 __DIVD21U1:
000a25 0faa      	LSL  R26
000a26 1fbb      	ROL  R27
000a27 1f88      	ROL  R24
000a28 1f99      	ROL  R25
000a29 1c00      	ROL  R0
000a2a 1c11      	ROL  R1
000a2b 1f44      	ROL  R20
000a2c 1f55      	ROL  R21
000a2d 1a0e      	SUB  R0,R30
000a2e 0a1f      	SBC  R1,R31
000a2f 0b46      	SBC  R20,R22
000a30 0b57      	SBC  R21,R23
000a31 f428      	BRCC __DIVD21U2
000a32 0e0e      	ADD  R0,R30
000a33 1e1f      	ADC  R1,R31
000a34 1f46      	ADC  R20,R22
000a35 1f57      	ADC  R21,R23
000a36 c001      	RJMP __DIVD21U3
                 __DIVD21U2:
000a37 60a1      	SBR  R26,1
                 __DIVD21U3:
000a38 953a      	DEC  R19
000a39 f759      	BRNE __DIVD21U1
000a3a 01fd      	MOVW R30,R26
000a3b 01bc      	MOVW R22,R24
000a3c 01d0      	MOVW R26,R0
000a3d 01ca      	MOVW R24,R20
000a3e 915f      	POP  R21
000a3f 914f      	POP  R20
000a40 913f      	POP  R19
000a41 9508      	RET
                 
                 __MODD21U:
000a42 dfda      	RCALL __DIVD21U
000a43 01fd      	MOVW R30,R26
000a44 01bc      	MOVW R22,R24
000a45 9508      	RET
                 
                 __GETW1P:
000a46 91ed      	LD   R30,X+
000a47 91fc      	LD   R31,X
000a48 9711      	SBIW R26,1
000a49 9508      	RET
                 
                 __GETD1P:
000a4a 91ed      	LD   R30,X+
000a4b 91fd      	LD   R31,X+
000a4c 916d      	LD   R22,X+
000a4d 917c      	LD   R23,X
000a4e 9713      	SBIW R26,3
000a4f 9508      	RET
                 
                 __GETD1P_INC:
000a50 91ed      	LD   R30,X+
000a51 91fd      	LD   R31,X+
000a52 916d      	LD   R22,X+
000a53 917d      	LD   R23,X+
000a54 9508      	RET
                 
                 __PUTDP1:
000a55 93ed      	ST   X+,R30
000a56 93fd      	ST   X+,R31
000a57 936d      	ST   X+,R22
000a58 937c      	ST   X,R23
000a59 9508      	RET
                 
                 __PUTDP1_DEC:
000a5a 937e      	ST   -X,R23
000a5b 936e      	ST   -X,R22
000a5c 93fe      	ST   -X,R31
000a5d 93ee      	ST   -X,R30
000a5e 9508      	RET
                 
                 __PUTPARD1:
000a5f 937a      	ST   -Y,R23
000a60 936a      	ST   -Y,R22
000a61 93fa      	ST   -Y,R31
000a62 93ea      	ST   -Y,R30
000a63 9508      	RET
                 
                 __PUTPARD2:
000a64 939a      	ST   -Y,R25
000a65 938a      	ST   -Y,R24
000a66 93ba      	ST   -Y,R27
000a67 93aa      	ST   -Y,R26
000a68 9508      	RET
                 
                 __SWAPD12:
000a69 2e18      	MOV  R1,R24
000a6a 2f86      	MOV  R24,R22
000a6b 2d61      	MOV  R22,R1
000a6c 2e19      	MOV  R1,R25
000a6d 2f97      	MOV  R25,R23
000a6e 2d71      	MOV  R23,R1
                 
                 __SWAPW12:
000a6f 2e1b      	MOV  R1,R27
000a70 2fbf      	MOV  R27,R31
000a71 2df1      	MOV  R31,R1
                 
                 __SWAPB12:
000a72 2e1a      	MOV  R1,R26
000a73 2fae      	MOV  R26,R30
000a74 2de1      	MOV  R30,R1
000a75 9508      	RET
                 
                 __CPD10:
000a76 9730      	SBIW R30,0
000a77 4060      	SBCI R22,0
000a78 4070      	SBCI R23,0
000a79 9508      	RET
                 
                 __CPD02:
000a7a 2400      	CLR  R0
000a7b 160a      	CP   R0,R26
000a7c 060b      	CPC  R0,R27
000a7d 0608      	CPC  R0,R24
000a7e 0609      	CPC  R0,R25
000a7f 9508      	RET
                 
                 __CPD12:
000a80 17ea      	CP   R30,R26
000a81 07fb      	CPC  R31,R27
000a82 0768      	CPC  R22,R24
000a83 0779      	CPC  R23,R25
000a84 9508      	RET
                 
                 __CPD21:
000a85 17ae      	CP   R26,R30
000a86 07bf      	CPC  R27,R31
000a87 0786      	CPC  R24,R22
000a88 0797      	CPC  R25,R23
000a89 9508      	RET
                 
                 __SAVELOCR6:
000a8a 935a      	ST   -Y,R21
                 __SAVELOCR5:
000a8b 934a      	ST   -Y,R20
                 __SAVELOCR4:
000a8c 933a      	ST   -Y,R19
                 __SAVELOCR3:
000a8d 932a      	ST   -Y,R18
                 __SAVELOCR2:
000a8e 931a      	ST   -Y,R17
000a8f 930a      	ST   -Y,R16
000a90 9508      	RET
                 
                 __LOADLOCR6:
000a91 815d      	LDD  R21,Y+5
                 __LOADLOCR5:
000a92 814c      	LDD  R20,Y+4
                 __LOADLOCR4:
000a93 813b      	LDD  R19,Y+3
                 __LOADLOCR3:
000a94 812a      	LDD  R18,Y+2
                 __LOADLOCR2:
000a95 8119      	LDD  R17,Y+1
000a96 8108      	LD   R16,Y
000a97 9508      	RET
                 
                 ;END OF CODE MARKER
                 __END_OF_CODE:


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

ATmega8 register use summary:
r0 :  45 r1 :  24 r2 :   0 r3 :   0 r4 :   0 r5 :   0 r6 :   0 r7 :   0 
r8 :   0 r9 :   0 r10:   0 r11:   0 r12:   0 r13:   0 r14:   0 r15:   0 
r16:  67 r17:  85 r18:  48 r19:  38 r20:  28 r21:  27 r22:  97 r23:  84 
r24:  81 r25:  62 r26: 296 r27: 131 r28:  43 r29:   1 r30: 533 r31: 206 
x  :  72 y  : 376 z  :  58 
Registers used: 21 out of 35 (60.0%)

ATmega8 instruction use summary:
.lds  :   0 .lds.l:   0 .sts  :   0 .sts.l:   0 adc   :  21 add   :  20 
adiw  :  87 and   :   6 andi  :  30 asr   :   0 bclr  :   0 bld   :   0 
brbc  :   0 brbs  :   0 brcc  :   2 brcs  :   0 break :   0 breq  :  60 
brge  :   1 brhc  :   0 brhs  :   0 brid  :   0 brie  :   0 brlo  :  20 
brlt  :   0 brmi  :   0 brne  :  68 brpl  :   0 brsh  :  15 brtc  :   0 
brts  :   0 brvc  :   0 brvs  :   0 bset  :   0 bst   :   0 cbi   :   1 
cbr   :   0 clc   :   0 clh   :   0 cli   :   1 cln   :   0 clr   :  20 
cls   :   0 clt   :   0 clv   :   0 clz   :   0 com   :   4 cp    :   8 
cpc   :  34 cpi   :  62 cpse  :   0 dec   :   4 des   :   0 eor   :   0 
fmul  :   0 fmuls :   0 fmulsu:   0 icall :   0 ijmp  :   0 in    :  11 
inc   :   0 ld    :  42 ldd   : 282 ldi   : 270 lds   :  16 lpm   :   7 
lsl   :   8 lsr   :   6 mov   :  55 movw  : 117 mul   :  10 muls  :   0 
mulsu :   0 neg   :   0 nop   :   0 or    :   8 ori   :   2 out   :  31 
pop   :  49 push  :  49 rcall : 570 ret   : 132 reti  :   1 rjmp  : 144 
rol   :  15 ror   :   8 sbc   :  16 sbci  :  30 sbi   :   2 sbic  :   1 
sbis  :   2 sbiw  :  42 sbr   :   2 sbrc  :   0 sbrs  :   1 sec   :   0 
seh   :   0 sei   :   1 sen   :   0 ser   :   0 ses   :   0 set   :   0 
sev   :   0 sez   :   0 sleep :   0 spm   :   0 st    :  84 std   :  91 
sts   :   9 sub   :   9 subi  :  25 swap  :   0 tst   :   1 wdr   :   0 

Instructions used: 56 out of 114 (49.1%)

ATmega8 memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x001530   5276    148   5424    8192  66.2%
[.dseg] 0x000060 0x0003ed      0    653    653    1024  63.8%
[.eseg] 0x000000 0x000000      0      0      0     512   0.0%

Assembly complete, 0 errors, 0 warnings
